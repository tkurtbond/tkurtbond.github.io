<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Random musings on code and tabletop games.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Lacking Natural Simplicity | Lacking Natural Simplicity</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="https://tkurtbond.github.io/">
<link rel="next" href="index-81.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5.js"></script><![endif]--><link rel="prefetch" href="posts/2019/11/09/macos-catalina-doesnt-have-a-ftp-client/" type="text/html">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<div class="blog-masthead">
    <div class="container">
<!-- This keeps the margins nice -->
        <nav class="blog-nav" role="navigation"><a href="#" class="blog-nav-item">Home</a>
            <a href="archive.html" class="blog-nav-item">Archives</a>
            <a href="categories/index.html" class="blog-nav-item">Tags</a>
            <a href="rss.xml" class="blog-nav-item">RSS feed</a>

            

                
                
                    
                
            
        </nav>
</div>
<!-- /.container -->
</div>
<!-- End of Menubar -->

<div class="container" id="content" role="main">
    <div class="body-content">
        <div class="blog-header">
            <h1 class="blog-title">
                <a href="https://tkurtbond.github.io/">

                    <span id="blog-title">Lacking Natural Simplicity</span>
                </a>
            </h1>
            <p class="lead blog-description">Random musings on code and tabletop games.</p>
            
        </div>
        <!--Body content-->
        <div class="row">
            <div class="col-sm-8 blog-main">
                

<div class="postindex">
    <article class="blog-post h-entry post-text"><header><h2 class="p-name entry-title blog-post-title"><a href="posts/2019/11/09/macos-catalina-doesnt-have-a-ftp-client/" class="u-url">macOS Catalina doesn't have a FTP client!</a></h2>
        <div class="metadata blog-post-meta">
            <p class="byline author vcard"><span class="byline-name fn">T. Kurt Bond</span></p>
            <p class="dateline"><a href="posts/2019/11/09/macos-catalina-doesnt-have-a-ftp-client/" rel="bookmark"><time class="published dt-published" datetime="2019-11-09T22:00:04-05:00" title="2019-11-09 22:00">2019-11-09 22:00</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Ack!  macOS Catalina doesn't have an FTP client!  Yes, I know it is
terribly insecure, but I only use it inside our firewall to access one
legacy computer system.  I was glad <a class="reference external" href="https://brew.sh/">brew</a> had <code class="docutils literal">LFTP</code>, and I figured out
how to use active mode in <code class="docutils literal">LFTP</code>:</p>
<pre class="code bash"><a name="rest_code_3d7e4365de1a49e8bc7cdec917235deb-1"></a><span class="nb">set</span> ftp:passive-mode off
</pre>
</div>
    </div>
    </article><article class="blog-post h-entry post-text"><header><h2 class="p-name entry-title blog-post-title"><a href="posts/2019/11/09/apple-podcasts-doesnt-recognize-my-ipod-shuffle/" class="u-url">Apple Podcasts doesn't recognize my iPod Shuffle</a></h2>
        <div class="metadata blog-post-meta">
            <p class="byline author vcard"><span class="byline-name fn">T. Kurt Bond</span></p>
            <p class="dateline"><a href="posts/2019/11/09/apple-podcasts-doesnt-recognize-my-ipod-shuffle/" rel="bookmark"><time class="published dt-published" datetime="2019-11-09T19:00:47-05:00" title="2019-11-09 19:00">2019-11-09 19:00</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Well, after the most recent upgrade to macOS Catalina my <a class="reference external" href="https://en.wikipedia.org/wiki/IPod_Shuffle">iPod
Shuffle</a> is not recognized by Apple Podcasts, so I have no way of
loading more podcasts on it.  This is a pity, because it was the only
mp3 player that I actually liked, though I liked the second generation
one better than the fourth generation.  It had no screen, which is an
advantage since I mostly listen to podcasts in the car.  The controls
were very intuitive and were designed to be easy to operate without
looking at them.  They were also reasonably hard to press by
mistake. I shall miss it.  Oh, cruel modern world to have cast it out!</p>
<p>I also had what appears to be an atypical workflow for the Shuffle.
In iTunes I would manually pick the episodes of the podcasts I was
interested and download them, then copy them manually to the Shuffle.
After I listened to them on the Shuffle I'd delete the download
manually in iTunes.  I never automatically synced the contents of my
Shuffle from iTunes.  With the second generation Shuffle I could copy
the files onto the Shuffle in the specific order I wanted.  The reason
I didn't like the fourth generation Shuffle was it organized the files
alphabetically by podcast and date released, and you had to hit a
specific button and listen to it enumerate the podcasts to move from
one podcast to another.</p>
<p>I have another MP3 player, a SanDisk Clip Sport (<a class="reference external" href="http://downloads.sandisk.com/downloads/um/clipsport-um.pdf">manual</a>) which I
tried some time ago and didn't like as much as the Shuffle.  My main
problem with it was that it was harder to operate without looking at
it: it has a screen, which you have to look at sometimes, and its
controls are not as easy to use without looking at them.  The controls
are also much more sensitive to pressure than the controls on the
Shuffle, so it is easier to activate them accidentally.  (I've
fast forwarded when my arm accidentally touched the controls while
carrying something near my chest.)  And, of course, the interface for
copying podcasts onto the Clip Sport is just copying files onto
external drive the Clip Sport shows up as, into the proper folder for
podcasts. So the “listened to” status and the time into each podcast
you've reached is not something the podcatcher application can help
you track.</p>
<p>Oh well.  I guess I'll have to give the Clip Sport another try.
Luckily I had exported my podcast feed from iTunes before I converted
to macOS Catalina — I had 122 podcast subscription.  I installed
<a class="reference external" href="https://gpodder.github.io/">gpodder</a> on my macOS laptop to manage the podcasts. (I was glad a
version of it as a macOS application was available.) It told me that
several of my subscriptions didn't have valid feeds any more, or
simpler weren't there, so now I have 105 podcast subscriptions.  To
download a podcast I can right click on the episode name in the
episode list and choose “Download”.  (It would be convenient if the
not downloaded/downloading/downloaded indication icon was an active
button to download it with one click.)  It has an option, when you
right click on a podcast, to open the download directory for that
podcast, which makes it easy to copy the files to the Clip Sport.  Of
course, they end up on the Clip Sport alphabetically by filename, and
some podcasts have really weird names — I'd swear some of them were
<a class="reference external" href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUID</a>'s.  There is a gpodder option to rename the files to the title
of the episode, which is good when episodes include the episode number
in the title.</p>
</div>
    </div>
    </article><article class="blog-post h-entry post-text"><header><h2 class="p-name entry-title blog-post-title"><a href="posts/2019/11/08/playing-with-hashlife/" class="u-url">Playing with Hashlife</a></h2>
        <div class="metadata blog-post-meta">
            <p class="byline author vcard"><span class="byline-name fn">T. Kurt Bond</span></p>
            <p class="dateline"><a href="posts/2019/11/08/playing-with-hashlife/" rel="bookmark"><time class="published dt-published" datetime="2019-11-08T09:43:19-05:00" title="2019-11-08 09:43">2019-11-08 09:43</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>C.P. found <a class="reference external" href="https://github.com/stylewarning">Robert Smith</a>'s <a class="reference external" href="https://github.com/stylewarning/lisp-random/tree/master/hashlife">implementation</a> of Bill Gosper's HASHLIFE
algorithm and wanted my help with running it.  I cloned the <a class="reference external" href="https://github.com/stylewarning/lisp-random">repo</a> it
was in and ran <code class="docutils literal">sbcl</code> in the <code class="docutils literal">hashlife</code> directory.  Then I
entered:</p>
<pre class="code lisp"><a name="rest_code_870b9c61f60545db8eee015564a896e2-1"></a><span class="p">(</span><span class="nv">asdf:operate</span> <span class="ss">'asdf:load-op</span> <span class="ss">'charmlife</span><span class="p">)</span>
</pre>
<p>That result in <code class="docutils literal">Component CHARMLIFE not found</code> error in sbcl.  I
thought that was odd — it was right there in the current directory.  I
looked at <code class="docutils literal"><span class="pre">asdf:*central-registry*</span></code>, and the only thing in it was
the quicklisp directory.  The ASDF <a class="reference external" href="https://common-lisp.net/~mmommer/asdf-howto.shtml#sec11">howto</a> showed an example of setting
<code class="docutils literal"><span class="pre">asdf:*central-registry*</span></code>:</p>
<pre class="code lisp"><a name="rest_code_02801ccd1dd94b63a7eabeb7f30c29c1-1"></a><span class="p">(</span><span class="nb">setf</span> <span class="nv">asdf:*central-registry*</span>
<a name="rest_code_02801ccd1dd94b63a7eabeb7f30c29c1-2"></a>  <span class="c1">;; Default directories, usually just the ``current directory''</span>
<a name="rest_code_02801ccd1dd94b63a7eabeb7f30c29c1-3"></a>  <span class="o">'</span><span class="p">(</span><span class="vg">*default-pathname-defaults*</span>
<a name="rest_code_02801ccd1dd94b63a7eabeb7f30c29c1-4"></a>
<a name="rest_code_02801ccd1dd94b63a7eabeb7f30c29c1-5"></a>    <span class="c1">;; Additional places where ASDF can find</span>
<a name="rest_code_02801ccd1dd94b63a7eabeb7f30c29c1-6"></a>    <span class="c1">;; system definition files</span>
<a name="rest_code_02801ccd1dd94b63a7eabeb7f30c29c1-7"></a>    <span class="l l-Other">#p"/home/foo/lisp/systems/"</span>
<a name="rest_code_02801ccd1dd94b63a7eabeb7f30c29c1-8"></a>    <span class="l l-Other">#p"/usr/share/common-lisp/systems/"</span><span class="p">))</span>
</pre>
<p>Noticing that it had the symbol <code class="docutils literal"><span class="pre">*default-pathname-defaults*</span></code> in the
new value, I guessed that it being missing from mine caused ASDF to
not find the system in the current directory.  So I added it and tried
again.  This time ASDF couldn't find <code class="docutils literal"><span class="pre">cl-charms</span></code>.  I guessed and
used <a class="reference external" href="https://www.quicklisp.org/">Quicklisp</a> to load it.  That worked.  Then I looked at
<code class="docutils literal">charmlife.lisp</code> and looked at the <code class="docutils literal">main</code> function and figured out
how to run it and how to interact with the program when it was running.</p>
<p>Here's what I had to do:</p>
<pre class="code lisp"><a name="rest_code_b836dd7671044943aea67e124e85a86d-1"></a><span class="p">(</span><span class="nb">setf</span> <span class="nv">asdf:*central-registry*</span>
<a name="rest_code_b836dd7671044943aea67e124e85a86d-2"></a>      <span class="p">(</span><span class="nb">cons</span> <span class="ss">'*default-pathname-defaults*</span>
<a name="rest_code_b836dd7671044943aea67e124e85a86d-3"></a>            <span class="nv">asdf:*central-registry*</span><span class="p">))</span>
<a name="rest_code_b836dd7671044943aea67e124e85a86d-4"></a><span class="p">(</span><span class="nv">ql:quickload</span> <span class="s">"cl-charms"</span><span class="p">)</span>
<a name="rest_code_b836dd7671044943aea67e124e85a86d-5"></a><span class="p">(</span><span class="nv">asdf:operate</span> <span class="ss">'asdf:load-op</span> <span class="ss">'charmlife</span><span class="p">)</span>
<a name="rest_code_b836dd7671044943aea67e124e85a86d-6"></a><span class="p">(</span><span class="nv">charmlife:main</span><span class="p">)</span>
</pre>
</div>
    </div>
    </article><article class="blog-post h-entry post-text"><header><h2 class="p-name entry-title blog-post-title"><a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/" class="u-url">Looping on 'dnf -y system-upgrade download' until it succeeds</a></h2>
        <div class="metadata blog-post-meta">
            <p class="byline author vcard"><span class="byline-name fn">T. Kurt Bond</span></p>
            <p class="dateline"><a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/" rel="bookmark"><time class="published dt-published" datetime="2019-11-07T21:16:59-05:00" title="2019-11-07 21:16">2019-11-07 21:16</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Fedora 31 is out, and fool that I am I'm upgrading to it.
Unfortunately, my DSL connection is slow and my DSL modem router is flaky.
With over 3000 packages to download,</p>
<pre class="code bash"><a name="rest_code_bf673262ca4d4c76952d4900024fbdaa-1"></a>dnf -y system-upgrade download --refresh --releasever<span class="o">=</span><span class="m">31</span>
</pre>
<p>is bound to die in the middle at least once, if not multiple times,
and with more than 6 hours estimated for the download to run I can't
sit watching it and restarting it every time it dies.</p>
<p>I tried running <code class="docutils literal">dnf</code> as the argument to a while loop, but was
unable to C-c to interrupt it when I <em>did</em> want to kill it since
<code class="docutils literal">dnf</code> caught the SIGINT and the loop started the <code class="docutils literal">dnf</code> command
over again before I could C-c the shell.</p>
<p>Here's the script I came up with to work around the issue:</p>
<p><a class="reference external" href="listings/tryfedoraupdate.html">tryfedoraupdate</a>  <a class="reference external" href="listings/tryfedoraupdate">(Source)</a></p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/#rest_code_29a6ef84a27246289dc2e6c1d287f9b9-1"> 1</a>
<a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/#rest_code_29a6ef84a27246289dc2e6c1d287f9b9-2"> 2</a>
<a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/#rest_code_29a6ef84a27246289dc2e6c1d287f9b9-3"> 3</a>
<a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/#rest_code_29a6ef84a27246289dc2e6c1d287f9b9-4"> 4</a>
<a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/#rest_code_29a6ef84a27246289dc2e6c1d287f9b9-5"> 5</a>
<a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/#rest_code_29a6ef84a27246289dc2e6c1d287f9b9-6"> 6</a>
<a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/#rest_code_29a6ef84a27246289dc2e6c1d287f9b9-7"> 7</a>
<a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/#rest_code_29a6ef84a27246289dc2e6c1d287f9b9-8"> 8</a>
<a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/#rest_code_29a6ef84a27246289dc2e6c1d287f9b9-9"> 9</a>
<a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/#rest_code_29a6ef84a27246289dc2e6c1d287f9b9-10">10</a>
<a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/#rest_code_29a6ef84a27246289dc2e6c1d287f9b9-11">11</a>
<a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/#rest_code_29a6ef84a27246289dc2e6c1d287f9b9-12">12</a>
<a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/#rest_code_29a6ef84a27246289dc2e6c1d287f9b9-13">13</a>
<a href="posts/2019/11/07/looping-on-dnf-y-system-upgrade-download-until-it-succeeds/#rest_code_29a6ef84a27246289dc2e6c1d287f9b9-14">14</a></pre></div></td>
<td class="code"><pre class="code bash"><a name="rest_code_29a6ef84a27246289dc2e6c1d287f9b9-1"></a><span class="ch">#! /usr/bin/bash</span>
<a name="rest_code_29a6ef84a27246289dc2e6c1d287f9b9-2"></a>
<a name="rest_code_29a6ef84a27246289dc2e6c1d287f9b9-3"></a><span class="k">while</span> ! dnf -y system-upgrade download --refresh --releasever<span class="o">=</span><span class="m">31</span>
<a name="rest_code_29a6ef84a27246289dc2e6c1d287f9b9-4"></a><span class="k">do</span>
<a name="rest_code_29a6ef84a27246289dc2e6c1d287f9b9-5"></a>    <span class="nb">read</span> -t <span class="m">30</span> -p <span class="s2">"Continue? (y/n) "</span> reply
<a name="rest_code_29a6ef84a27246289dc2e6c1d287f9b9-6"></a>    <span class="k">if</span> <span class="o">((</span><span class="nv">$?</span>&gt;128<span class="o">))</span><span class="p">;</span> <span class="k">then</span>
<a name="rest_code_29a6ef84a27246289dc2e6c1d287f9b9-7"></a>        <span class="nb">echo</span> <span class="s2">"timed out, continuing..."</span>
<a name="rest_code_29a6ef84a27246289dc2e6c1d287f9b9-8"></a>    <span class="k">elif</span> <span class="o">[[</span> <span class="s2">"</span><span class="nv">$reply</span><span class="s2">"</span> <span class="o">=</span>~ <span class="o">[</span>Nn<span class="o">]</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
<a name="rest_code_29a6ef84a27246289dc2e6c1d287f9b9-9"></a>        <span class="nb">echo</span> <span class="s2">"Exiting..."</span>
<a name="rest_code_29a6ef84a27246289dc2e6c1d287f9b9-10"></a>        <span class="nb">exit</span>
<a name="rest_code_29a6ef84a27246289dc2e6c1d287f9b9-11"></a>    <span class="k">else</span>
<a name="rest_code_29a6ef84a27246289dc2e6c1d287f9b9-12"></a>        <span class="nb">echo</span> <span class="s2">"Continuing..."</span>
<a name="rest_code_29a6ef84a27246289dc2e6c1d287f9b9-13"></a>    <span class="k">fi</span>
<a name="rest_code_29a6ef84a27246289dc2e6c1d287f9b9-14"></a><span class="k">done</span>
</pre></td>
</tr></table>
<p>This way I can stop the script easily, but if it dies itself it will
continue after a timeout.</p>
</div>
    </div>
    </article><article class="blog-post h-entry post-text"><header><h2 class="p-name entry-title blog-post-title"><a href="posts/2019/11/07/ulisses-spiele-updates-heliograph-space-1889-pdfs-with-bookmarks-and-document-outlines/" class="u-url">Ulisses Spiele updates Heliograph Space 1889 pdfs with bookmarks and document outlines</a></h2>
        <div class="metadata blog-post-meta">
            <p class="byline author vcard"><span class="byline-name fn">T. Kurt Bond</span></p>
            <p class="dateline"><a href="posts/2019/11/07/ulisses-spiele-updates-heliograph-space-1889-pdfs-with-bookmarks-and-document-outlines/" rel="bookmark"><time class="published dt-published" datetime="2019-11-07T10:10:36-05:00" title="2019-11-07 10:10">2019-11-07 10:10</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Today I got notices from <a class="reference external" href="https://ulisses-spiele.de/">Ulisses Spiele</a> via <a class="reference external" href="https://www.drivethrurpg.com/">DriveThruRPG</a> that
each of the <a class="reference external" href="http://www.heliograph.com/">Heliograph</a> <a class="reference external" href="https://en.wikipedia.org/wiki/Space:_1889">Space 1889</a> PDFs had been updated, saying:</p>
<blockquote>
<p>“An updated PDF with bookmarks and meta information is now available.”</p>
</blockquote>
<p>I'm a little surprised to see this at this late date — is there that
much demand for these PDFs?  Still, I'm pleased to get the updates,
and glad there's still interest.  I've never tried the <a class="reference external" href="https://rpggeek.com/rpgsystem/742/ubiquity-roleplaying-system">Ubiquity</a> based
version, though I‘ve been thinking about buying the <a class="reference external" href="https://en.wikipedia.org/wiki/Savage_Worlds">Savage Worlds</a>
versions of those adventures, but the original system has charms of
its own.</p>
</div>
    </div>
    </article><article class="blog-post h-entry post-text"><header><h2 class="p-name entry-title blog-post-title"><a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/" class="u-url">Converting my pyBloxsom blog into a Nikola blog</a></h2>
        <div class="metadata blog-post-meta">
            <p class="byline author vcard"><span class="byline-name fn">T. Kurt Bond</span></p>
            <p class="dateline"><a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/" rel="bookmark"><time class="published dt-published" datetime="2019-11-06T14:10:35-05:00" title="2019-11-06 14:10">2019-11-06 14:10</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Yesterday I decided to try blogging again.  I started writing a post
at blogger.com, but that was like wading through a rotting whale
corpse.  Instead I decided to use <a class="reference external" href="https://help.github.com/en/github/working-with-github-pages/about-github-pages">GitHub Pages</a>
and use the static blog/site generator <a class="reference external" href="https://getnikola.com/">Nikola</a> to generate the
content, editing reStructuredText (ReST) files.</p>
<p>I wrote my first <a class="reference external" href="posts/2019/11/05/getting-nxml-mode-in-emacs-to-validate-docbook-5-documents/">post</a> and it was good!  Using ReST again was much
better than editing in a GUI like blogger.com, and having it hosted by
GitHub Pages was more restful than running a machine hosting a
website.</p>
<p>But then I thought off all the posts I had in my old blog, before I
stopped running machine hosting a website.  They were all written in
ReST — maybe I could put them up on my new blog?</p>
<p>I took a couple three hours and wrote a shell script to find the old
<a class="reference external" href="https://pyblosxom.github.io/">pyBloxsom</a> files and feed them into a python script that I also wrote.
Along the way I made sure the files all had <code class="docutils literal">#published</code> and
<code class="docutils literal">#tags</code> lines, in that order, immediately following the title line.</p>
<p>Here's the shell script:</p>
<p><a class="reference external" href="listings/drive-pyblox-to-nikola.html">drive-pyblox-to-nikola</a>  <a class="reference external" href="listings/drive-pyblox-to-nikola">(Source)</a></p>
<pre class="code bash"><a name="rest_code_dfaca502e889479e81ee85f96100fc77-1"></a><span class="ch">#! /usr/bin/env bash</span>
<a name="rest_code_dfaca502e889479e81ee85f96100fc77-2"></a>
<a name="rest_code_dfaca502e889479e81ee85f96100fc77-3"></a><span class="o">(</span><span class="nb">cd</span> ~/myblog <span class="o">&amp;&amp;</span>
<a name="rest_code_dfaca502e889479e81ee85f96100fc77-4"></a>     find notentries/ entries/ -type f -name <span class="se">\*</span>.rst <span class="p">|</span>
<a name="rest_code_dfaca502e889479e81ee85f96100fc77-5"></a>         ~/comp/tkbtools/Scripts/pyblox-to-nikola<span class="o">)</span>
</pre>
<p>Here's the python script:</p>
<p><a class="reference external" href="listings/pyblox-to-nikola.html">pyblox-to-nikola</a>  <a class="reference external" href="listings/pyblox-to-nikola">(Source)</a></p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-1"> 1</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-2"> 2</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-3"> 3</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-4"> 4</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-5"> 5</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-6"> 6</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-7"> 7</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-8"> 8</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-9"> 9</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-10">10</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-11">11</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-12">12</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-13">13</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-14">14</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-15">15</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-16">16</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-17">17</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-18">18</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-19">19</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-20">20</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-21">21</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-22">22</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-23">23</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-24">24</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-25">25</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-26">26</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-27">27</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-28">28</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-29">29</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-30">30</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-31">31</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-32">32</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-33">33</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-34">34</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-35">35</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-36">36</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-37">37</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-38">38</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-39">39</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-40">40</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-41">41</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-42">42</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-43">43</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-44">44</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-45">45</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-46">46</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-47">47</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-48">48</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-49">49</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-50">50</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-51">51</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-52">52</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-53">53</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-54">54</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-55">55</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-56">56</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-57">57</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-58">58</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-59">59</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-60">60</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-61">61</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-62">62</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-63">63</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-64">64</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-65">65</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-66">66</a>
<a href="posts/2019/11/06/converting-my-pybloxsom-blog-into-a-nikola-blog/#rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-67">67</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-1"></a><span class="ch">#! /usr/bin/env python3.7</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-2"></a>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-3"></a><span class="kn">import</span> <span class="nn">os</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-4"></a><span class="kn">import</span> <span class="nn">os.path</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-5"></a><span class="kn">import</span> <span class="nn">sys</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-6"></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-7"></a>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-8"></a><span class="c1"># datetime.strptime ('2019-11-05 20:32:24', '%Y-%m-%d %H:%M:%S')</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-9"></a><span class="c1"># dt.strftime ('%Y-%m-%d %H:%M:%S UTC-05:00')</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-10"></a>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-11"></a><span class="n">entries_prefix</span> <span class="o">=</span> <span class="s1">'entries/'</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-12"></a><span class="n">notentries_prefix</span> <span class="o">=</span> <span class="s1">'notentries/'</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-13"></a><span class="n">published_prefix</span> <span class="o">=</span> <span class="s1">'#published '</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-14"></a><span class="n">tags_prefix</span> <span class="o">=</span> <span class="s1">'#tags '</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-15"></a>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-16"></a><span class="n">files_read</span> <span class="o">=</span> <span class="mi">0</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-17"></a><span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">:</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-18"></a>    <span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span><span class="o">.</span><span class="n">rstrip</span> <span class="p">()</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-19"></a>    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span>  <span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-20"></a>    <span class="n">dirname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span> <span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-21"></a>    <span class="k">if</span> <span class="n">dirname</span><span class="o">.</span><span class="n">startswith</span> <span class="p">(</span><span class="n">entries_prefix</span><span class="p">):</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-22"></a>        <span class="n">category</span> <span class="o">=</span> <span class="n">dirname</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">entries_prefix</span><span class="p">):]</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-23"></a>    <span class="k">elif</span> <span class="n">dirname</span><span class="o">.</span><span class="n">startswith</span> <span class="p">(</span><span class="n">notentries_prefix</span><span class="p">):</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-24"></a>        <span class="n">category</span> <span class="o">=</span> <span class="n">dirname</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">notentries_prefix</span><span class="p">):]</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-25"></a>    <span class="k">else</span><span class="p">:</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-26"></a>        <span class="n">category</span> <span class="o">=</span> <span class="s1">''</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-27"></a>    <span class="p">(</span><span class="n">slug</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span> <span class="p">(</span><span class="n">basename</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-28"></a>    <span class="k">print</span> <span class="p">(</span><span class="s1">'filename: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">basename: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">dirname: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">category: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">slug: </span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-29"></a>           <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">basename</span><span class="p">,</span> <span class="n">dirname</span><span class="p">,</span> <span class="n">category</span><span class="p">,</span> <span class="n">slug</span><span class="p">))</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-30"></a>    <span class="n">inf</span> <span class="o">=</span> <span class="nb">open</span> <span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-31"></a>    <span class="n">files_read</span> <span class="o">=</span> <span class="n">files_read</span> <span class="o">+</span> <span class="mi">1</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-32"></a>    <span class="n">title</span> <span class="o">=</span> <span class="n">inf</span><span class="o">.</span><span class="n">readline</span> <span class="p">()</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-33"></a>    <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">.</span><span class="n">rstrip</span> <span class="p">()</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-34"></a>    <span class="n">published</span> <span class="o">=</span> <span class="n">inf</span><span class="o">.</span><span class="n">readline</span> <span class="p">()</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-35"></a>    <span class="n">published</span> <span class="o">=</span> <span class="n">published</span><span class="o">.</span><span class="n">strip</span> <span class="p">()</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-36"></a>    <span class="k">if</span> <span class="n">published</span><span class="o">.</span><span class="n">startswith</span> <span class="p">(</span><span class="n">published_prefix</span><span class="p">):</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-37"></a>        <span class="n">published</span> <span class="o">=</span> <span class="n">published</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">published_prefix</span><span class="p">):]</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-38"></a>    <span class="k">else</span><span class="p">:</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-39"></a>        <span class="k">raise</span> <span class="p">(</span><span class="s1">'Unknown line should be #published'</span><span class="p">,</span> <span class="n">published</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-40"></a>    <span class="n">published_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span> <span class="p">(</span><span class="n">published</span><span class="p">,</span> <span class="s1">'%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S'</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-41"></a>    <span class="n">nikola_date</span> <span class="o">=</span> <span class="n">published_date</span><span class="o">.</span><span class="n">strftime</span> <span class="p">(</span><span class="s1">'%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S UTC-05:00'</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-42"></a>    <span class="n">datepath</span> <span class="o">=</span> <span class="n">published_date</span><span class="o">.</span><span class="n">strftime</span> <span class="p">(</span><span class="s1">'%Y/%m/</span><span class="si">%d</span><span class="s1">'</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-43"></a>    <span class="n">newdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span> <span class="p">(</span><span class="s1">'/Users/tkb/nikola/newblog/posts'</span><span class="p">,</span> <span class="n">datepath</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-44"></a>    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span> <span class="p">(</span><span class="n">newdir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-45"></a>    <span class="n">tags</span> <span class="o">=</span> <span class="n">inf</span><span class="o">.</span><span class="n">readline</span> <span class="p">()</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-46"></a>    <span class="n">tags</span> <span class="o">=</span> <span class="n">tags</span><span class="o">.</span><span class="n">rstrip</span> <span class="p">()</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-47"></a>    <span class="k">if</span> <span class="n">tags</span><span class="o">.</span><span class="n">startswith</span> <span class="p">(</span><span class="n">tags_prefix</span><span class="p">):</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-48"></a>        <span class="n">tags</span> <span class="o">=</span> <span class="n">tags</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">tags_prefix</span><span class="p">):]</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-49"></a>    <span class="k">else</span><span class="p">:</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-50"></a>        <span class="k">raise</span> <span class="p">(</span><span class="s1">'Unknown line should be #tags'</span><span class="p">,</span> <span class="n">tags</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-51"></a>    <span class="n">tags</span> <span class="o">=</span> <span class="n">tags</span><span class="o">.</span><span class="n">lower</span> <span class="p">()</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-52"></a>    <span class="n">outfname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span> <span class="p">(</span><span class="n">newdir</span><span class="p">,</span> <span class="n">basename</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-53"></a>    <span class="k">print</span> <span class="p">(</span><span class="s1">'outfname: </span><span class="si">%s</span><span class="s1">'</span> <span class="o">%</span> <span class="n">outfname</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-54"></a>    <span class="n">outf</span> <span class="o">=</span> <span class="nb">open</span> <span class="p">(</span><span class="n">outfname</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-55"></a>    <span class="n">outf</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s1">'.. title: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">'</span> <span class="o">%</span> <span class="n">title</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-56"></a>    <span class="n">outf</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s1">'.. slug: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">'</span> <span class="o">%</span> <span class="n">slug</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-57"></a>    <span class="n">outf</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s1">'.. date: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">'</span> <span class="o">%</span> <span class="n">nikola_date</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-58"></a>    <span class="n">outf</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s1">'.. tags: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">'</span> <span class="o">%</span> <span class="n">tags</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-59"></a>    <span class="n">outf</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s1">'.. category: </span><span class="si">%s</span><span class="se">\n</span><span class="s1">'</span> <span class="o">%</span> <span class="n">category</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-60"></a>    <span class="n">outf</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s1">'.. link: </span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-61"></a>    <span class="n">outf</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s1">'.. description: </span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-62"></a>    <span class="n">outf</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s1">'.. type: text</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-63"></a>    <span class="n">outf</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="s1">'</span><span class="se">\n</span><span class="s1">'</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-64"></a>    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">inf</span><span class="p">:</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-65"></a>        <span class="n">outf</span><span class="o">.</span><span class="n">write</span> <span class="p">(</span><span class="n">line</span><span class="p">)</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-66"></a>    <span class="n">inf</span><span class="o">.</span><span class="n">close</span> <span class="p">()</span>
<a name="rest_code_6523d5fbe0d14ce78c8b5daa05a8da0e-67"></a><span class="k">print</span> <span class="p">(</span><span class="s1">'</span><span class="se">\n\n</span><span class="s1">Files Read: </span><span class="si">%d</span><span class="s1">'</span> <span class="o">%</span> <span class="n">files_read</span><span class="p">)</span>
</pre></td>
</tr></table>
<p>There were 810 <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> files to process.  Once that was
done, I had to work through those files multiple times finding all the
broken internal links, since many of them were absolute links to my
old blog or other pages on my old website.  I did <cite>grep-find</cite> in Emacs
multiple times to find all the occurances of my old website's hostname
(which went through a couple of variations over time), then looked for
site relative links that started with <code class="docutils literal">/~tkb</code>, a tedious but not too
difficult process.</p>
</div>
    </div>
    </article><article class="blog-post h-entry post-text"><header><h2 class="p-name entry-title blog-post-title"><a href="posts/2019/11/05/getting-nxml-mode-in-emacs-to-validate-docbook-5-documents/" class="u-url">Getting nxml-mode in emacs to validate DocBook 5 documents</a></h2>
        <div class="metadata blog-post-meta">
            <p class="byline author vcard"><span class="byline-name fn">T. Kurt Bond</span></p>
            <p class="dateline"><a href="posts/2019/11/05/getting-nxml-mode-in-emacs-to-validate-docbook-5-documents/" rel="bookmark"><time class="published dt-published" datetime="2019-11-05T20:32:24-05:00" title="2019-11-05 20:32">2019-11-05 20:32</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>I have occasion to edit and build a DocBook 5 document under both
macOS Catalina and Fedora 30.</p>
<p>On macOS I've used homebrew to install the docbook, docbook-xsl, and
libxslt (for xsltproc), and fop formulas, and changed my PATH to
include the directory where brew installed <code class="docutils literal">xsltproc</code>. which will then
use <code class="docutils literal">/usr/local/etc/xml/catalog</code> to find files, in which brew installed
links to the docbook schemas and xsl stylesheets.</p>
<p>On Fedora I've used <code class="docutils literal">dnf</code> to install the docbook5-schemas,
docbook5-style-xsl, and fop packages.</p>
<p>The document builds fine on both OSes, but Emacs doesn't validate
properly against the DocBook RELAX NG schemas, because the <code class="docutils literal">*.rnc</code> files
supplied with Emacs (26.3 on macOS, 26.2 on Fedora) are for DocBook 4.
However, Emacs will look at a <code class="docutils literal">schemas.xml</code> file in the same directory
as the file you are editing to find the <code class="docutils literal">*.rnc</code> files.  Unfortunately,
of course, they have different locations on macOS with brew and on
Fedora.</p>
<p>So I wrote a script, generate-schemas-xml, in bash using xmlcatalog to
look up the translation for the URI for the RELAX NG compiled schema
file and generate the <code class="docutils literal">schemas.xml</code> file and substitute the translation
into the file:</p>
<p><a class="reference external" href="listings/generate-schemas-xml.html">generate-schemas-xml</a>  <a class="reference external" href="listings/generate-schemas-xml">(Source)</a></p>
<pre class="code bash"><a name="rest_code_b5ae476a3f7d4dcca0d043ffe75451f8-1"></a><span class="ch">#! /usr/bin/env bash</span>
<a name="rest_code_b5ae476a3f7d4dcca0d043ffe75451f8-2"></a>
<a name="rest_code_b5ae476a3f7d4dcca0d043ffe75451f8-3"></a><span class="nv">schema_location</span><span class="o">=</span><span class="s2">"</span><span class="k">$(</span>xmlcatalog <span class="s2">""</span> <span class="s2">"http://docbook.org/xml/5.0/rng/docbookxi.rnc"</span> <span class="p">|</span>
<a name="rest_code_b5ae476a3f7d4dcca0d043ffe75451f8-4"></a>    grep <span class="s2">"^file:///"</span> <span class="p">|</span> sed <span class="s1">'s#^file://##'</span><span class="k">)</span><span class="s2">"</span>
<a name="rest_code_b5ae476a3f7d4dcca0d043ffe75451f8-5"></a>
<a name="rest_code_b5ae476a3f7d4dcca0d043ffe75451f8-6"></a>cat &gt;schemas.xml <span class="s">&lt;&lt;EOF</span>
<a name="rest_code_b5ae476a3f7d4dcca0d043ffe75451f8-7"></a><span class="s">&lt;locatingRules xmlns="http://thaiopensource.com/ns/locating-rules/1.0"&gt;</span>
<a name="rest_code_b5ae476a3f7d4dcca0d043ffe75451f8-8"></a><span class="s">&lt;namespace ns="http://docbook.org/ns/docbook" uri="$schema_location"/&gt;</span>
<a name="rest_code_b5ae476a3f7d4dcca0d043ffe75451f8-9"></a><span class="s">&lt;/locatingRules&gt;</span>
<a name="rest_code_b5ae476a3f7d4dcca0d043ffe75451f8-10"></a><span class="s">EOF</span>
</pre>
<p>Then I had my Makefile generate the <code class="docutils literal">schemas.xml</code> file if it was missing.</p>
<p>It was more complicated that I'd have liked, but it does work.</p>
</div>
    </div>
    </article><article class="blog-post h-entry post-text"><header><h2 class="p-name entry-title blog-post-title"><a href="posts/2015/12/14/delving-deeper-revisited/" class="u-url">Delving Deeper Revisited</a></h2>
        <div class="metadata blog-post-meta">
            <p class="byline author vcard"><span class="byline-name fn">T. Kurt Bond</span></p>
            <p class="dateline"><a href="posts/2015/12/14/delving-deeper-revisited/" rel="bookmark"><time class="published dt-published" datetime="2015-12-14T14:09:02-05:00" title="2015-12-14 14:09">2015-12-14 14:09</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>I ran across the current edition of <a class="reference external" href="http://forum.immersiveink.com/viewtopic.php?f=15&amp;t=113">Delving Deeper</a> on the web a
few weeks ago, and it prompted me to reread it in some depth.  (It had
been some time since I read my copy of the Delving Deeper <a class="reference external" href="posts/2013/03/21/my-delving-deeper-boxset-came-today/">box
set</a>.)  The current version of the Delving Deeper Reference Rules
(V4) is available <a class="reference external" href="http://ddo.immersiveink.com/dd.html">online</a> in hypertext or for free download as three
digest-sized booklets.</p>
<p>I've decided I like this rule set very much.  It really seems to
reflect the rules of the original 3 Little Brown Books of Original D&amp;D
very well, and I can see that there are enough differences from, say,
the Labyrinth Lord rules that I have been using, to make it a
different experience.  I'm looking forward to trying it out.</p>
<p>It prompted me to sit down and draw out a dungeon level and fill it
using the method in <cite>Delving Deeper</cite>, which turned out to be good fun.</p>
</div>
    </div>
    </article><article class="blog-post h-entry post-text"><header><h2 class="p-name entry-title blog-post-title"><a href="posts/2014/11/23/poise-dms-plus/" class="u-url">POISE DMS-PLus</a></h2>
        <div class="metadata blog-post-meta">
            <p class="byline author vcard"><span class="byline-name fn">T. Kurt Bond</span></p>
            <p class="dateline"><a href="posts/2014/11/23/poise-dms-plus/" rel="bookmark"><time class="published dt-published" datetime="2014-11-23T01:48:58-05:00" title="2014-11-23 01:48">2014-11-23 01:48</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <p>I found a <a class="reference external" href="http://www2.esp-tulsa.com/products.htm#dmsplus">web page</a> that lists all the POISE products, now known as the
Jenzabar PX Administrative Information Systems, including the POISE
DMS-Plus.</p>
    </div>
    </article><article class="blog-post h-entry post-text"><header><h2 class="p-name entry-title blog-post-title"><a href="posts/2014/11/22/dwimmermount-arrived/" class="u-url">Dwimmermount arrived</a></h2>
        <div class="metadata blog-post-meta">
            <p class="byline author vcard"><span class="byline-name fn">T. Kurt Bond</span></p>
            <p class="dateline"><a href="posts/2014/11/22/dwimmermount-arrived/" rel="bookmark"><time class="published dt-published" datetime="2014-11-22T20:47:13-05:00" title="2014-11-22 20:47">2014-11-22 20:47</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <p>My physical copy of <a class="reference external" href="https://www.kickstarter.com/projects/autarch/dwimmermount">Dwimmermount</a> arrived today.  It's huge.  It looks good.</p>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="next">
                <a href="index-81.html" rel="next">Older posts</a>
            </li>
        </ul></nav>
</div>
            <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
                    <div class="sidebar-module sidebar-module-inset">
      <h4>About</h4>
      <p>Lacking Natural Simplicity is one definition of sophisticated.  
         This blog chronicles my journey through our at times too complicated 
         and sophisticated world. </p>
    </div>
    <div class="sidebar-module">
      <h4>Links</h4>
      <ol class="list-unstyled">
<li><a href="pages/about-the-blog/index.html">About the Blog</a></li>
        <li><a href="pages/colophon/index.html">Colophon</a></li>
        <li><a href="pages/pages/index.html">Pages</a></li>
      </ol>
</div>
    
            </div>
        <!--End of body content-->
        </div>
    </div>
</div>

<footer class="blog-footer" id="footer">
    Contents © 2019         <a href="mailto:tkurtbond@gmail.com">T. Kurt Bond</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
    
</footer><script src="assets/js/all-nocdn.js"></script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
