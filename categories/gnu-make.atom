<?xml version='1.0' encoding='UTF-8'?>
<?xml-stylesheet href="https://tkurtbond.github.io/assets/xml/atom.xsl" type="text/xsl media="all"?>
<feed xml:lang="en" xmlns="http://www.w3.org/2005/Atom">
  <title>Lacking Natural Simplicity (Posts about gnu make)</title>
  <id>https://tkurtbond.github.io/categories/gnu-make.atom</id>
  <updated>2023-02-06T15:22:06Z</updated>
  <author>
    <name>T. Kurt Bond</name>
  </author>
  <link rel="self" type="application/atom+xml" href="https://tkurtbond.github.io/categories/gnu-make.atom"/>
  <link rel="alternate" type="text/html" href="https://tkurtbond.github.io/categories/gnu-make/"/>
  <generator uri="https://getnikola.com/">Nikola</generator>
  <entry>
    <title>Need to specify a file in a GNUmakefile that starts with ~?</title>
    <id>https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/</id>
    <updated>2020-07-08T06:09:38-04:00</updated>
    <published>2020-07-08T06:09:38-04:00</published>
    <author>
      <name>T. Kurt Bond</name>
    </author>
    <link rel="alternate" type="text/html" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/"/>
    <summary type="html">&lt;p&gt;Like on macOS Catalina where you can't have directories outside your
home directory any more, so need to refer to the directory you
manually installed some software to?  You can't just include the raw
&lt;span class="file"&gt;~/where/ever&lt;/span&gt; in that PATH in the GNUmakefile because the
&lt;code&gt;~&lt;/code&gt; prefix won't be translated into the user's home directory.
That substitution is done by the shell when a command is executed, but
the shells expect that tilde to have been expanded in the command that
sets the path.  It doesn't do “Tilde Expansion” on each part of the
PATH when it goes looking things up in the path.  So, you have to get
that expansion done manually if you set it in a GNUmakefile.&lt;/p&gt;
&lt;p&gt;Anyway, This ugly hack works:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code makefile"&gt;&lt;a id="rest_code_6da8b2b4221744289e8e858ff805c56e-1" name="rest_code_6da8b2b4221744289e8e858ff805c56e-1" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_6da8b2b4221744289e8e858ff805c56e-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;export &lt;/span&gt;&lt;span class="nv"&gt;PATH&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;shell &lt;span class="nb"&gt;eval&lt;/span&gt; &lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'~/sw/versions/heirloom-doctools/git/ucb'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;a id="rest_code_6da8b2b4221744289e8e858ff805c56e-2" name="rest_code_6da8b2b4221744289e8e858ff805c56e-2" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_6da8b2b4221744289e8e858ff805c56e-2"&gt;&lt;/a&gt;                 &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$$&lt;/span&gt;dir&lt;span class="o"&gt;)&lt;/span&gt;:&lt;span class="k"&gt;$(&lt;/span&gt;PATH&lt;span class="k"&gt;)&lt;/span&gt;
&lt;a id="rest_code_6da8b2b4221744289e8e858ff805c56e-3" name="rest_code_6da8b2b4221744289e8e858ff805c56e-3" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_6da8b2b4221744289e8e858ff805c56e-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;export &lt;/span&gt;&lt;span class="nv"&gt;TROFFFONTS&lt;/span&gt; &lt;span class="o"&gt;:=&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;shell &lt;span class="nb"&gt;eval&lt;/span&gt; &lt;span class="nv"&gt;dir&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'~/Library/Fonts'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;a id="rest_code_6da8b2b4221744289e8e858ff805c56e-4" name="rest_code_6da8b2b4221744289e8e858ff805c56e-4" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_6da8b2b4221744289e8e858ff805c56e-4"&gt;&lt;/a&gt;        &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$$&lt;/span&gt;dir&lt;span class="o"&gt;)&lt;/span&gt;:/Library/Fonts
&lt;a id="rest_code_6da8b2b4221744289e8e858ff805c56e-5" name="rest_code_6da8b2b4221744289e8e858ff805c56e-5" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_6da8b2b4221744289e8e858ff805c56e-5"&gt;&lt;/a&gt;
&lt;a id="rest_code_6da8b2b4221744289e8e858ff805c56e-6" name="rest_code_6da8b2b4221744289e8e858ff805c56e-6" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_6da8b2b4221744289e8e858ff805c56e-6"&gt;&lt;/a&gt;&lt;span class="nf"&gt;all&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;a id="rest_code_6da8b2b4221744289e8e858ff805c56e-7" name="rest_code_6da8b2b4221744289e8e858ff805c56e-7" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_6da8b2b4221744289e8e858ff805c56e-7"&gt;&lt;/a&gt;        @echo &lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;a id="rest_code_6da8b2b4221744289e8e858ff805c56e-8" name="rest_code_6da8b2b4221744289e8e858ff805c56e-8" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_6da8b2b4221744289e8e858ff805c56e-8"&gt;&lt;/a&gt;        @echo
&lt;a id="rest_code_6da8b2b4221744289e8e858ff805c56e-9" name="rest_code_6da8b2b4221744289e8e858ff805c56e-9" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_6da8b2b4221744289e8e858ff805c56e-9"&gt;&lt;/a&gt;        @echo &lt;span class="nv"&gt;TROFFFONTS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;TROFFFONTS&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;a id="rest_code_6da8b2b4221744289e8e858ff805c56e-10" name="rest_code_6da8b2b4221744289e8e858ff805c56e-10" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_6da8b2b4221744289e8e858ff805c56e-10"&gt;&lt;/a&gt;        @echo
&lt;a id="rest_code_6da8b2b4221744289e8e858ff805c56e-11" name="rest_code_6da8b2b4221744289e8e858ff805c56e-11" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_6da8b2b4221744289e8e858ff805c56e-11"&gt;&lt;/a&gt;        @echo -n &lt;span class="s1"&gt;'"type troff" returns '&lt;/span&gt;
&lt;a id="rest_code_6da8b2b4221744289e8e858ff805c56e-12" name="rest_code_6da8b2b4221744289e8e858ff805c56e-12" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_6da8b2b4221744289e8e858ff805c56e-12"&gt;&lt;/a&gt;        @type troff
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Put this in a file somewhere and invoke &lt;span class="app"&gt;GNU make&lt;/span&gt; on it and it prints:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code text"&gt;&lt;a id="rest_code_87f6269ea0a84d55ba44c08748be393f-1" name="rest_code_87f6269ea0a84d55ba44c08748be393f-1" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_87f6269ea0a84d55ba44c08748be393f-1"&gt;&lt;/a&gt;PATH=/Users/tkb/sw/versions/heirloom-doctools/git/ucb:/Users/tkb/local/rndbin:/Users/tkb/.cargo/bin:/Users/tkb/.nimble/bin:/usr/local/opt/libxslt/bin:/usr/local/opt/libxml2/bin:/Users/tkb/sw/versions/mew/git/bin:/Users/tkb/sw/versions/groff-git/bin:/Users/tkb/sw/versions/chibi-scheme/git/bin:/usr/local/opt/tcl-tk/bin:/usr/local/opt/expat/bin:/Users/tkb/.opam/default/bin:/usr/local/opt/texinfo/bin:/usr/local/opt/gnu-sed/libexec/gnubin:/usr/local/opt/findutils/libexec/gnubin:/usr/local/opt/curl/bin:/usr/local/opt/coreutils/libexec/gnubin:/Users/tkb/.local/bin:/Users/tkb/context-osx-64/tex/texmf-osx-64/bin:/Applications/Emacs.app/Contents/MacOS/bin:/Users/tkb/local/unix/bin:/Users/tkb/local/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/opt/X11/bin:/Users/tkb/local/unix/rndbin:/Applications/Racket v7.5/bin:/Users/tkb/go/bin:/Applications/Emacs.app/Contents/MacOS/bin-x86_64-10_14:/Applications/Emacs.app/Contents/MacOS/libexec-x86_64-10_14
&lt;a id="rest_code_87f6269ea0a84d55ba44c08748be393f-2" name="rest_code_87f6269ea0a84d55ba44c08748be393f-2" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_87f6269ea0a84d55ba44c08748be393f-2"&gt;&lt;/a&gt;
&lt;a id="rest_code_87f6269ea0a84d55ba44c08748be393f-3" name="rest_code_87f6269ea0a84d55ba44c08748be393f-3" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_87f6269ea0a84d55ba44c08748be393f-3"&gt;&lt;/a&gt;TROFFFONTS=/Users/tkb/Library/Fonts:/Library/Fonts
&lt;a id="rest_code_87f6269ea0a84d55ba44c08748be393f-4" name="rest_code_87f6269ea0a84d55ba44c08748be393f-4" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_87f6269ea0a84d55ba44c08748be393f-4"&gt;&lt;/a&gt;
&lt;a id="rest_code_87f6269ea0a84d55ba44c08748be393f-5" name="rest_code_87f6269ea0a84d55ba44c08748be393f-5" href="https://tkurtbond.github.io/posts/2020/07/08/need-to-specify-a-file-in-a-gnumakefile-that-starts-with/#rest_code_87f6269ea0a84d55ba44c08748be393f-5"&gt;&lt;/a&gt;"type troff" returns troff is /Users/tkb/sw/versions/heirloom-doctools/git/ucb/troff
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(Yes, my path may be a little excessive.)&lt;/p&gt;
&lt;p&gt;Unfortunately I haven't figured out how to do this with the &lt;span class="app"&gt;BSD make&lt;/span&gt;s.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Last edited: 2020-08-03 16:03:19 EDT&lt;/em&gt;&lt;/p&gt;
&lt;!-- Local Variables:
time-stamp-format: "%04y-%02m-%02d %02H:%02M:%02S %Z"
time-stamp-start: "Last edited:[ \t]+\\\\?"
time-stamp-end: "\\*\\\\?\n"
time-stamp-line-limit: -20
End: --&gt;</summary>
    <category term="gnu-make" label="gnu make"/>
    <category term="macos-catalina" label="macos catalina"/>
  </entry>
</feed>
