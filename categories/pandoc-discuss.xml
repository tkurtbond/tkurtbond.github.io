<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Lacking Natural Simplicity (Posts about pandoc-discuss)</title><link>https://tkurtbond.github.io/</link><description></description><atom:link href="https://tkurtbond.github.io/categories/pandoc-discuss.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents © 2022 &lt;a href="mailto:tkurtbond@gmail.com"&gt;T. Kurt Bond&lt;/a&gt; </copyright><lastBuildDate>Fri, 25 Feb 2022 15:17:50 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>How I author e-mails to pandoc-discuss and issues on the pandoc repo</title><link>https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/</link><dc:creator>T. Kurt Bond</dc:creator><description>&lt;p&gt;To submit an issue to the &lt;a class="reference external" href="https://pandoc.org"&gt;pandoc&lt;/a&gt; GitHub &lt;a class="reference external" href="https://github.com/jgm/pandoc"&gt;repository&lt;/a&gt; or an e-mail to
the &lt;a class="reference external" href="https://groups.google.com/forum/#!forum/pandoc-discuss"&gt;pandoc-discuss&lt;/a&gt; Google group when it is complicated I write a
reStructuredText (&lt;a class="reference external" href="https://docutils.sourceforge.io/rst.html"&gt;reST&lt;/a&gt;) file that shows the problem and a &lt;a class="reference external" href="https://docutils.sourceforge.io/rst.html"&gt;reST&lt;/a&gt; file
that explains the problem that prompted the issue/e-mail and include
the pandoc and os version information and includes the problem &lt;a class="reference external" href="https://docutils.sourceforge.io/rst.html"&gt;reST&lt;/a&gt;
file and sometimes the resulting output files.  I process these files
with &lt;a class="reference external" href="https://pandoc.org"&gt;pandoc&lt;/a&gt;, of course.  If it is going to the mailing list I format
it to HTML with a fancy style and cut and paste it from Chrome into
gmail.  If it is going to be an issue report on GitHub I format it
into &lt;span class="file"&gt;.gfm&lt;/span&gt; (Github Flavored Markdown: &lt;a class="reference external" href="https://github.github.com/gfm/"&gt;GFM&lt;/a&gt;) file because that’s
what you write GitHub issues in and also format it into HTML to check
that the &lt;span class="file"&gt;.gfm&lt;/span&gt; is formed properly.  Typically when I’m writing the
issue &lt;a class="reference external" href="https://docutils.sourceforge.io/rst.html"&gt;reST&lt;/a&gt; file I don’t use language names on code blocks for the
syntax highlighting because that doesn’t seem to come out right in
GFM.&lt;/p&gt;
&lt;p&gt;For example, here is a &lt;a class="reference external" href="https://groups.google.com/d/msg/pandoc-discuss/U44h5Uo7qgQ/xDBRWwERBAAJ"&gt;post&lt;/a&gt;, “RST to RST Conversion Loses Interpreted
Text Roles”, to &lt;a class="reference external" href="https://groups.google.com/forum/#!forum/pandoc-discuss"&gt;pandoc-discuss&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Here is the problem &lt;a class="reference external" href="https://docutils.sourceforge.io/rst.html"&gt;reST&lt;/a&gt; source:&lt;/p&gt;
&lt;pre class="code ReST"&gt;&lt;a id="rest_code_b2dbc6f4b7ba40d0b3e856084f712387-1" name="rest_code_b2dbc6f4b7ba40d0b3e856084f712387-1" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_b2dbc6f4b7ba40d0b3e856084f712387-1"&gt;&lt;/a&gt;RST to RST Conversion Looses Interpreted Text Roles
&lt;a id="rest_code_b2dbc6f4b7ba40d0b3e856084f712387-2" name="rest_code_b2dbc6f4b7ba40d0b3e856084f712387-2" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_b2dbc6f4b7ba40d0b3e856084f712387-2"&gt;&lt;/a&gt;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
&lt;a id="rest_code_b2dbc6f4b7ba40d0b3e856084f712387-3" name="rest_code_b2dbc6f4b7ba40d0b3e856084f712387-3" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_b2dbc6f4b7ba40d0b3e856084f712387-3"&gt;&lt;/a&gt;
&lt;a id="rest_code_b2dbc6f4b7ba40d0b3e856084f712387-4" name="rest_code_b2dbc6f4b7ba40d0b3e856084f712387-4" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_b2dbc6f4b7ba40d0b3e856084f712387-4"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;role&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; app
&lt;a id="rest_code_b2dbc6f4b7ba40d0b3e856084f712387-5" name="rest_code_b2dbc6f4b7ba40d0b3e856084f712387-5" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_b2dbc6f4b7ba40d0b3e856084f712387-5"&gt;&lt;/a&gt;
&lt;a id="rest_code_b2dbc6f4b7ba40d0b3e856084f712387-6" name="rest_code_b2dbc6f4b7ba40d0b3e856084f712387-6" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_b2dbc6f4b7ba40d0b3e856084f712387-6"&gt;&lt;/a&gt;&lt;span class="na"&gt;:app:&lt;/span&gt;&lt;span class="nv"&gt;`GNU Emacs`&lt;/span&gt; is an app.  So is &lt;span class="na"&gt;:app:&lt;/span&gt;&lt;span class="nv"&gt;`Eclipse`&lt;/span&gt;.
&lt;/pre&gt;&lt;p&gt;Here is the e-mail &lt;a class="reference external" href="https://docutils.sourceforge.io/rst.html"&gt;reST&lt;/a&gt; source:&lt;/p&gt;
&lt;pre class="code ReST"&gt;&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-1" name="rest_code_83280631f3594326b18fe0f71cef3708-1" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-1"&gt;&lt;/a&gt;RST to RST Conversion Loses Interpreted Text Roles
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-2" name="rest_code_83280631f3594326b18fe0f71cef3708-2" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-2"&gt;&lt;/a&gt;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-3" name="rest_code_83280631f3594326b18fe0f71cef3708-3" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-3"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-4" name="rest_code_83280631f3594326b18fe0f71cef3708-4" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-4"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;role&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; file(literal)
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-5" name="rest_code_83280631f3594326b18fe0f71cef3708-5" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-5"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;role&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; app
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-6" name="rest_code_83280631f3594326b18fe0f71cef3708-6" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-6"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-7" name="rest_code_83280631f3594326b18fe0f71cef3708-7" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-7"&gt;&lt;/a&gt;It turns out that when you use &lt;span class="na"&gt;:app:&lt;/span&gt;&lt;span class="nv"&gt;`pandoc`&lt;/span&gt; to convert from &lt;span class="s"&gt;``rst``&lt;/span&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-8" name="rest_code_83280631f3594326b18fe0f71cef3708-8" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-8"&gt;&lt;/a&gt;to &lt;span class="s"&gt;``rst``&lt;/span&gt; the process loses interpreted text roles.
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-9" name="rest_code_83280631f3594326b18fe0f71cef3708-9" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-9"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-10" name="rest_code_83280631f3594326b18fe0f71cef3708-10" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-10"&gt;&lt;/a&gt;My &lt;span class="na"&gt;:app:&lt;/span&gt;&lt;span class="nv"&gt;`pandoc`&lt;/span&gt; version is:
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-11" name="rest_code_83280631f3594326b18fe0f71cef3708-11" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-11"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-12" name="rest_code_83280631f3594326b18fe0f71cef3708-12" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-12"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;include&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; pandoc.version
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-13" name="rest_code_83280631f3594326b18fe0f71cef3708-13" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-13"&gt;&lt;/a&gt;   &lt;span class="nc"&gt;:code:&lt;/span&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-14" name="rest_code_83280631f3594326b18fe0f71cef3708-14" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-14"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-15" name="rest_code_83280631f3594326b18fe0f71cef3708-15" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-15"&gt;&lt;/a&gt;My OS information is:
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-16" name="rest_code_83280631f3594326b18fe0f71cef3708-16" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-16"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-17" name="rest_code_83280631f3594326b18fe0f71cef3708-17" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-17"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;include&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; os.version
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-18" name="rest_code_83280631f3594326b18fe0f71cef3708-18" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-18"&gt;&lt;/a&gt;   &lt;span class="nc"&gt;:code:&lt;/span&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-19" name="rest_code_83280631f3594326b18fe0f71cef3708-19" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-19"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-20" name="rest_code_83280631f3594326b18fe0f71cef3708-20" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-20"&gt;&lt;/a&gt;I generated the outputs to check with the following commands:
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-21" name="rest_code_83280631f3594326b18fe0f71cef3708-21" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-21"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-22" name="rest_code_83280631f3594326b18fe0f71cef3708-22" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-22"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;code&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-23" name="rest_code_83280631f3594326b18fe0f71cef3708-23" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-23"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-24" name="rest_code_83280631f3594326b18fe0f71cef3708-24" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-24"&gt;&lt;/a&gt;   pandoc -r rst -w rst -o r2rclitr-out.rst r2rclitr-in.rst
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-25" name="rest_code_83280631f3594326b18fe0f71cef3708-25" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-25"&gt;&lt;/a&gt;   pandoc -r rst -w native --output=r2rclitr-in.native r2rclitr-in.rst
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-26" name="rest_code_83280631f3594326b18fe0f71cef3708-26" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-26"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-27" name="rest_code_83280631f3594326b18fe0f71cef3708-27" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-27"&gt;&lt;/a&gt;So, for the ReStructuredText input (file &lt;span class="na"&gt;:file:&lt;/span&gt;&lt;span class="nv"&gt;`r2rclitr-in.rst`&lt;/span&gt;):
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-28" name="rest_code_83280631f3594326b18fe0f71cef3708-28" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-28"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-29" name="rest_code_83280631f3594326b18fe0f71cef3708-29" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-29"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;include&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; r2rclitr-in.rst
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-30" name="rest_code_83280631f3594326b18fe0f71cef3708-30" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-30"&gt;&lt;/a&gt;   &lt;span class="nc"&gt;:code:&lt;/span&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-31" name="rest_code_83280631f3594326b18fe0f71cef3708-31" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-31"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-32" name="rest_code_83280631f3594326b18fe0f71cef3708-32" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-32"&gt;&lt;/a&gt;the resulting &lt;span class="s"&gt;``rst``&lt;/span&gt; output (&lt;span class="na"&gt;:file:&lt;/span&gt;&lt;span class="nv"&gt;`r2rclitr-out.rst`&lt;/span&gt;) is generated:
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-33" name="rest_code_83280631f3594326b18fe0f71cef3708-33" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-33"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-34" name="rest_code_83280631f3594326b18fe0f71cef3708-34" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-34"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;include&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; r2rclitr-out.rst
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-35" name="rest_code_83280631f3594326b18fe0f71cef3708-35" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-35"&gt;&lt;/a&gt;   &lt;span class="nc"&gt;:code:&lt;/span&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-36" name="rest_code_83280631f3594326b18fe0f71cef3708-36" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-36"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-37" name="rest_code_83280631f3594326b18fe0f71cef3708-37" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-37"&gt;&lt;/a&gt;And the &lt;span class="s"&gt;``native``&lt;/span&gt; output (&lt;span class="na"&gt;:file:&lt;/span&gt;&lt;span class="nv"&gt;`r2rclitr-in.native`&lt;/span&gt;) generated:
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-38" name="rest_code_83280631f3594326b18fe0f71cef3708-38" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-38"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-39" name="rest_code_83280631f3594326b18fe0f71cef3708-39" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-39"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;include&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; r2rclitr-in.native
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-40" name="rest_code_83280631f3594326b18fe0f71cef3708-40" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-40"&gt;&lt;/a&gt;   &lt;span class="nc"&gt;:code:&lt;/span&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-41" name="rest_code_83280631f3594326b18fe0f71cef3708-41" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-41"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-42" name="rest_code_83280631f3594326b18fe0f71cef3708-42" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-42"&gt;&lt;/a&gt;has &lt;span class="s"&gt;``Span``&lt;/span&gt; elements with classes, so it should be possible to turn
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-43" name="rest_code_83280631f3594326b18fe0f71cef3708-43" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-43"&gt;&lt;/a&gt;those back into interpreted text roles in &lt;span class="s"&gt;``rst``&lt;/span&gt; output.  I suppose
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-44" name="rest_code_83280631f3594326b18fe0f71cef3708-44" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-44"&gt;&lt;/a&gt;you'd have to write out at the beginning of the RST output file a list
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-45" name="rest_code_83280631f3594326b18fe0f71cef3708-45" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-45"&gt;&lt;/a&gt;of
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-46" name="rest_code_83280631f3594326b18fe0f71cef3708-46" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-46"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-47" name="rest_code_83280631f3594326b18fe0f71cef3708-47" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-47"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;code&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-48" name="rest_code_83280631f3594326b18fe0f71cef3708-48" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-48"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-49" name="rest_code_83280631f3594326b18fe0f71cef3708-49" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-49"&gt;&lt;/a&gt;&lt;span class="p"&gt;   ..&lt;/span&gt; &lt;span class="ow"&gt;role&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; rolename
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-50" name="rest_code_83280631f3594326b18fe0f71cef3708-50" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-50"&gt;&lt;/a&gt;
&lt;a id="rest_code_83280631f3594326b18fe0f71cef3708-51" name="rest_code_83280631f3594326b18fe0f71cef3708-51" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_83280631f3594326b18fe0f71cef3708-51"&gt;&lt;/a&gt;lines for every class &lt;span class="s"&gt;``rolename``&lt;/span&gt; in a span.  Would this be possible?
&lt;/pre&gt;&lt;p&gt;Here is the &lt;span class="file"&gt;GNUmakefile&lt;/span&gt; for it:&lt;/p&gt;
&lt;pre class="code makefile"&gt;&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-1" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-1" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-1"&gt;&lt;/a&gt;&lt;span class="nf"&gt;all&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;2&lt;span class="n"&gt;rclitr&lt;/span&gt;-&lt;span class="n"&gt;email&lt;/span&gt;.&lt;span class="n"&gt;html&lt;/span&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-2" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-2" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-2"&gt;&lt;/a&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-3" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-3" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-3"&gt;&lt;/a&gt;&lt;span class="nf"&gt;r2rclitr-email.html&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;pandoc&lt;/span&gt;.&lt;span class="n"&gt;version&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;.&lt;span class="n"&gt;version&lt;/span&gt; &lt;span class="n"&gt;pandoc&lt;/span&gt;.&lt;span class="n"&gt;style&lt;/span&gt; \
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-4" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-4" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-4"&gt;&lt;/a&gt;        &lt;span class="n"&gt;r&lt;/span&gt;2&lt;span class="n"&gt;rclitr&lt;/span&gt;-&lt;span class="n"&gt;in&lt;/span&gt;.&lt;span class="n"&gt;rst&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;2&lt;span class="n"&gt;rclitr&lt;/span&gt;-&lt;span class="n"&gt;out&lt;/span&gt;.&lt;span class="n"&gt;rst&lt;/span&gt;  &lt;span class="n"&gt;r&lt;/span&gt;2&lt;span class="n"&gt;rclitr&lt;/span&gt;-&lt;span class="n"&gt;in&lt;/span&gt;.&lt;span class="n"&gt;native&lt;/span&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-5" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-5" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-5"&gt;&lt;/a&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-6" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-6" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-6"&gt;&lt;/a&gt;&lt;span class="nf"&gt;pandoc.version&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;shell&lt;/span&gt; &lt;span class="nv"&gt;type&lt;/span&gt; &lt;span class="nv"&gt;-p&lt;/span&gt; &lt;span class="nv"&gt;pandoc&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-7" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-7" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-7"&gt;&lt;/a&gt;        pandoc --version &lt;span class="p"&gt;|&lt;/span&gt; head -2 &amp;gt;&lt;span class="nv"&gt;$@&lt;/span&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-8" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-8" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-8"&gt;&lt;/a&gt;&lt;span class="nf"&gt;os.version&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-9" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-9" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-9"&gt;&lt;/a&gt;        osinfo &amp;gt;&lt;span class="nv"&gt;$@&lt;/span&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-10" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-10" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-10"&gt;&lt;/a&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-11" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-11" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-11"&gt;&lt;/a&gt;&lt;span class="c"&gt;# ReST input&lt;/span&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-12" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-12" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-12"&gt;&lt;/a&gt;&lt;span class="nf"&gt;%-out.rst&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; %-&lt;span class="n"&gt;in&lt;/span&gt;.&lt;span class="n"&gt;rst&lt;/span&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-13" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-13" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-13"&gt;&lt;/a&gt;        pandoc -r rst -w rst -o &lt;span class="nv"&gt;$@&lt;/span&gt; $&amp;lt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-14" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-14" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-14"&gt;&lt;/a&gt;&lt;span class="nf"&gt;%.html &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; %.&lt;span class="n"&gt;rst&lt;/span&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-15" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-15" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-15"&gt;&lt;/a&gt;        pandoc -r rst -w html --include-in-header&lt;span class="o"&gt;=&lt;/span&gt;pandoc.style --output&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$@&lt;/span&gt; $&amp;lt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-16" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-16" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-16"&gt;&lt;/a&gt;&lt;span class="nf"&gt;%.native &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; %.&lt;span class="n"&gt;rst&lt;/span&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-17" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-17" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-17"&gt;&lt;/a&gt;        pandoc -r rst -w native --output&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$@&lt;/span&gt; $&amp;lt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-18" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-18" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-18"&gt;&lt;/a&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-19" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-19" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-19"&gt;&lt;/a&gt;&lt;span class="nf"&gt;.PHONY&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;clean&lt;/span&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-20" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-20" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-20"&gt;&lt;/a&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-21" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-21" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-21"&gt;&lt;/a&gt;&lt;span class="nf"&gt;clean&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;a id="rest_code_c2132b5217d347839d0ebaa1da798b5f-22" name="rest_code_c2132b5217d347839d0ebaa1da798b5f-22" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_c2132b5217d347839d0ebaa1da798b5f-22"&gt;&lt;/a&gt;        -rm *.pdf *.html *.ms *.ctx *.ltx *.native os.version *-out.rst
&lt;/pre&gt;&lt;p&gt;When I'm doing an issue the result is a &lt;a class="reference external" href="https://github.github.com/gfm/"&gt;GFM&lt;/a&gt; file that I can cut and
paste into the editor used for issues on GitHub, which expects &lt;a class="reference external" href="https://github.github.com/gfm/"&gt;GFM&lt;/a&gt;.
I write it in &lt;a class="reference external" href="https://docutils.sourceforge.io/rst.html"&gt;reST&lt;/a&gt; because that can include files and processing from
&lt;a class="reference external" href="https://docutils.sourceforge.io/rst.html"&gt;reST&lt;/a&gt; to &lt;a class="reference external" href="https://github.github.com/gfm/"&gt;GFM&lt;/a&gt; does the inclusion, so I don't have to do it by hand.&lt;/p&gt;
&lt;p&gt;Here's an example &lt;a class="reference external" href="https://github.com/jgm/pandoc/issues/6592"&gt;issue&lt;/a&gt;, "Reference Not Found Error #6592" on the
pandoc &lt;a class="reference external" href="https://github.com/jgm/pandoc"&gt;repository&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The problem &lt;a class="reference external" href="https://docutils.sourceforge.io/rst.html"&gt;reST&lt;/a&gt; file &lt;span class="file"&gt;rnf.rst&lt;/span&gt; is&lt;/p&gt;
&lt;pre class="code ReST"&gt;&lt;a id="rest_code_e4c3ec6f45bd4936b33b989b5e62185e-1" name="rest_code_e4c3ec6f45bd4936b33b989b5e62185e-1" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_e4c3ec6f45bd4936b33b989b5e62185e-1"&gt;&lt;/a&gt;​﻿   &lt;span class="gs"&gt;**Option:**&lt;/span&gt; Arachnaurs' webs are made with a neurotoxin_ that can
&lt;a id="rest_code_e4c3ec6f45bd4936b33b989b5e62185e-2" name="rest_code_e4c3ec6f45bd4936b33b989b5e62185e-2" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_e4c3ec6f45bd4936b33b989b5e62185e-2"&gt;&lt;/a&gt;​   quickly paralyze their prey!  When wrapped in a web, make a Vigor
&lt;a id="rest_code_e4c3ec6f45bd4936b33b989b5e62185e-3" name="rest_code_e4c3ec6f45bd4936b33b989b5e62185e-3" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_e4c3ec6f45bd4936b33b989b5e62185e-3"&gt;&lt;/a&gt;​   roll or quickly lose consciousness.
&lt;a id="rest_code_e4c3ec6f45bd4936b33b989b5e62185e-4" name="rest_code_e4c3ec6f45bd4936b33b989b5e62185e-4" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_e4c3ec6f45bd4936b33b989b5e62185e-4"&gt;&lt;/a&gt;
&lt;a id="rest_code_e4c3ec6f45bd4936b33b989b5e62185e-5" name="rest_code_e4c3ec6f45bd4936b33b989b5e62185e-5" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_e4c3ec6f45bd4936b33b989b5e62185e-5"&gt;&lt;/a&gt;&lt;span class="p"&gt;   ..&lt;/span&gt; &lt;span class="nt"&gt;_neurotoxin:&lt;/span&gt; https://www.sciencenews.org/article/spiders-poisonous-webs-neuro-toxins-genes
&lt;/pre&gt;&lt;p&gt;(The contents of the actual file are all indented 3 spaces, but I had
to prefix all the lines in the code block in this source with the
Unicode &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Zero-width_space"&gt;ZERO WIDTH SPACE&lt;/a&gt; so the indentation would show.)&lt;/p&gt;
&lt;p&gt;The issue &lt;a class="reference external" href="https://docutils.sourceforge.io/rst.html"&gt;reST&lt;/a&gt; file &lt;span class="file"&gt;rnf-issue.rst&lt;/span&gt; is&lt;/p&gt;
&lt;pre class="code ReST"&gt;&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-1" name="rest_code_91550a60bc3d4bee90ad795384fce749-1" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-1"&gt;&lt;/a&gt;Reference Not Found Error
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-2" name="rest_code_91550a60bc3d4bee90ad795384fce749-2" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-2"&gt;&lt;/a&gt;@@@@@@@@@@@@@@@@@@@@@@@@@
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-3" name="rest_code_91550a60bc3d4bee90ad795384fce749-3" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-3"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-4" name="rest_code_91550a60bc3d4bee90ad795384fce749-4" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-4"&gt;&lt;/a&gt;When I process the following reST file (notice it the whole file is
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-5" name="rest_code_91550a60bc3d4bee90ad795384fce749-5" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-5"&gt;&lt;/a&gt;indented 3 spaces)
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-6" name="rest_code_91550a60bc3d4bee90ad795384fce749-6" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-6"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-7" name="rest_code_91550a60bc3d4bee90ad795384fce749-7" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-7"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;include&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; rnf.rst
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-8" name="rest_code_91550a60bc3d4bee90ad795384fce749-8" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-8"&gt;&lt;/a&gt;   &lt;span class="nc"&gt;:code:&lt;/span&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-9" name="rest_code_91550a60bc3d4bee90ad795384fce749-9" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-9"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-10" name="rest_code_91550a60bc3d4bee90ad795384fce749-10" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-10"&gt;&lt;/a&gt;into &lt;span class="s"&gt;``ms``&lt;/span&gt; or PDF via &lt;span class="s"&gt;``ms``&lt;/span&gt; output with the command
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-11" name="rest_code_91550a60bc3d4bee90ad795384fce749-11" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-11"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-12" name="rest_code_91550a60bc3d4bee90ad795384fce749-12" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-12"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;code&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-13" name="rest_code_91550a60bc3d4bee90ad795384fce749-13" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-13"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-14" name="rest_code_91550a60bc3d4bee90ad795384fce749-14" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-14"&gt;&lt;/a&gt;   pandoc -s -r rst -w ms -o rnf.ms.pdf rnf.rst
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-15" name="rest_code_91550a60bc3d4bee90ad795384fce749-15" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-15"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-16" name="rest_code_91550a60bc3d4bee90ad795384fce749-16" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-16"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-17" name="rest_code_91550a60bc3d4bee90ad795384fce749-17" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-17"&gt;&lt;/a&gt;I get the errors
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-18" name="rest_code_91550a60bc3d4bee90ad795384fce749-18" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-18"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-19" name="rest_code_91550a60bc3d4bee90ad795384fce749-19" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-19"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;code&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-20" name="rest_code_91550a60bc3d4bee90ad795384fce749-20" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-20"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-21" name="rest_code_91550a60bc3d4bee90ad795384fce749-21" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-21"&gt;&lt;/a&gt;   [WARNING] Reference not found for 'neurotoxin' at chunk line 1 column 57
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-22" name="rest_code_91550a60bc3d4bee90ad795384fce749-22" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-22"&gt;&lt;/a&gt;   &amp;lt;standard input&amp;gt;:70: macro error: pdfhref has no destination
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-23" name="rest_code_91550a60bc3d4bee90ad795384fce749-23" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-23"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-24" name="rest_code_91550a60bc3d4bee90ad795384fce749-24" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-24"&gt;&lt;/a&gt;and the resulting output PDF file and &lt;span class="s"&gt;``.ms``&lt;/span&gt; file indeed do not
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-25" name="rest_code_91550a60bc3d4bee90ad795384fce749-25" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-25"&gt;&lt;/a&gt;have the link.
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-26" name="rest_code_91550a60bc3d4bee90ad795384fce749-26" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-26"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-27" name="rest_code_91550a60bc3d4bee90ad795384fce749-27" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-27"&gt;&lt;/a&gt;Here's the &lt;span class="s"&gt;``.ms``&lt;/span&gt; file that was generated:
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-28" name="rest_code_91550a60bc3d4bee90ad795384fce749-28" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-28"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-29" name="rest_code_91550a60bc3d4bee90ad795384fce749-29" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-29"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;include&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; rnf.ms
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-30" name="rest_code_91550a60bc3d4bee90ad795384fce749-30" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-30"&gt;&lt;/a&gt;   &lt;span class="nc"&gt;:code:&lt;/span&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-31" name="rest_code_91550a60bc3d4bee90ad795384fce749-31" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-31"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-32" name="rest_code_91550a60bc3d4bee90ad795384fce749-32" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-32"&gt;&lt;/a&gt;I'm using the following version of Pandoc:
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-33" name="rest_code_91550a60bc3d4bee90ad795384fce749-33" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-33"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-34" name="rest_code_91550a60bc3d4bee90ad795384fce749-34" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-34"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;include&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; pandoc.version
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-35" name="rest_code_91550a60bc3d4bee90ad795384fce749-35" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-35"&gt;&lt;/a&gt;   &lt;span class="nc"&gt;:code:&lt;/span&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-36" name="rest_code_91550a60bc3d4bee90ad795384fce749-36" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-36"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-37" name="rest_code_91550a60bc3d4bee90ad795384fce749-37" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-37"&gt;&lt;/a&gt;My OS information is:
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-38" name="rest_code_91550a60bc3d4bee90ad795384fce749-38" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-38"&gt;&lt;/a&gt;
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-39" name="rest_code_91550a60bc3d4bee90ad795384fce749-39" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-39"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;include&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; os.version
&lt;a id="rest_code_91550a60bc3d4bee90ad795384fce749-40" name="rest_code_91550a60bc3d4bee90ad795384fce749-40" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_91550a60bc3d4bee90ad795384fce749-40"&gt;&lt;/a&gt;   &lt;span class="nc"&gt;:code:&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;The generated &lt;a class="reference external" href="https://github.github.com/gfm/"&gt;GFM&lt;/a&gt; is&lt;/p&gt;
&lt;pre class="code text"&gt;&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-1" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-1" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-1"&gt;&lt;/a&gt;Reference Not Found Error
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-2" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-2" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-2"&gt;&lt;/a&gt;=========================
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-3" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-3" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-3"&gt;&lt;/a&gt;
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-4" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-4" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-4"&gt;&lt;/a&gt;When I process the following reST file (notice it the whole file is
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-5" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-5" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-5"&gt;&lt;/a&gt;indented 3 spaces)
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-6" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-6" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-6"&gt;&lt;/a&gt;
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-7" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-7" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-7"&gt;&lt;/a&gt;       **Option:** Arachnaurs' webs are made with a neurotoxin_ that can
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-8" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-8" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-8"&gt;&lt;/a&gt;       quickly paralyze their prey!  When wrapped in a web, make a Vigor
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-9" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-9" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-9"&gt;&lt;/a&gt;       roll or quickly lose consciousness.
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-10" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-10" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-10"&gt;&lt;/a&gt;
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-11" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-11" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-11"&gt;&lt;/a&gt;       .. _neurotoxin: https://www.sciencenews.org/article/spiders-poisonous-webs-neuro-toxins-genes
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-12" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-12" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-12"&gt;&lt;/a&gt;
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-13" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-13" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-13"&gt;&lt;/a&gt;into `ms` or PDF via `ms` output with the command
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-14" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-14" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-14"&gt;&lt;/a&gt;
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-15" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-15" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-15"&gt;&lt;/a&gt;    pandoc -s -r rst -w ms -o rnf.ms.pdf rnf.rst
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-16" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-16" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-16"&gt;&lt;/a&gt;
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-17" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-17" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-17"&gt;&lt;/a&gt;I get the errors
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-18" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-18" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-18"&gt;&lt;/a&gt;
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-19" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-19" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-19"&gt;&lt;/a&gt;    [WARNING] Reference not found for 'neurotoxin' at chunk line 1 column 57
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-20" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-20" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-20"&gt;&lt;/a&gt;    &amp;lt;standard input&amp;gt;:70: macro error: pdfhref has no destination
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-21" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-21" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-21"&gt;&lt;/a&gt;
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-22" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-22" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-22"&gt;&lt;/a&gt;and the resulting output PDF file and `.ms` file indeed do not have the
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-23" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-23" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-23"&gt;&lt;/a&gt;link.
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-24" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-24" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-24"&gt;&lt;/a&gt;
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-25" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-25" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-25"&gt;&lt;/a&gt;Here's the `.ms` file that was generated:
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-26" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-26" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-26"&gt;&lt;/a&gt;
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-27" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-27" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-27"&gt;&lt;/a&gt;    .QS
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-28" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-28" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-28"&gt;&lt;/a&gt;    .LP
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-29" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-29" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-29"&gt;&lt;/a&gt;    \f[B]Option:\f[R] Arachnaurs\[aq] webs are made with a \c
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-30" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-30" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-30"&gt;&lt;/a&gt;    .pdfhref W -D "" -A "\c" \
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-31" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-31" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-31"&gt;&lt;/a&gt;     -- "neurotoxin"
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-32" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-32" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-32"&gt;&lt;/a&gt;    \&amp;amp; that can quickly paralyze their prey! When wrapped in a web, make a
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-33" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-33" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-33"&gt;&lt;/a&gt;    Vigor roll or quickly lose consciousness.
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-34" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-34" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-34"&gt;&lt;/a&gt;    .QE
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-35" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-35" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-35"&gt;&lt;/a&gt;
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-36" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-36" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-36"&gt;&lt;/a&gt;I'm using the following version of Pandoc:
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-37" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-37" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-37"&gt;&lt;/a&gt;
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-38" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-38" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-38"&gt;&lt;/a&gt;    pandoc 2.10.1
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-39" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-39" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-39"&gt;&lt;/a&gt;    Compiled with pandoc-types 1.21, texmath 0.12.0.2, skylighting 0.8.5
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-40" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-40" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-40"&gt;&lt;/a&gt;
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-41" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-41" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-41"&gt;&lt;/a&gt;My OS information is:
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-42" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-42" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-42"&gt;&lt;/a&gt;
&lt;a id="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-43" name="rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-43" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_d1fbb555e1fd47ddbc2532d5ecf7227f-43"&gt;&lt;/a&gt;    Mac OS X, Version 10.15.6, Build 19G73
&lt;/pre&gt;&lt;p&gt;Here is the &lt;span class="file"&gt;GNUmakefile&lt;/span&gt; for it:&lt;/p&gt;
&lt;pre class="code makefile"&gt;&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-1" name="rest_code_66be158e5eab44cf93e8fc60708020ce-1" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-1"&gt;&lt;/a&gt;&lt;span class="nf"&gt;all&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;rnf&lt;/span&gt;-&lt;span class="n"&gt;issue&lt;/span&gt;.&lt;span class="n"&gt;gfm&lt;/span&gt; &lt;span class="n"&gt;rnf&lt;/span&gt;-&lt;span class="n"&gt;issue&lt;/span&gt;.&lt;span class="n"&gt;html&lt;/span&gt; &lt;span class="n"&gt;rnf&lt;/span&gt;-&lt;span class="n"&gt;issue&lt;/span&gt;.&lt;span class="n"&gt;gfm&lt;/span&gt;.&lt;span class="n"&gt;html&lt;/span&gt; &lt;span class="n"&gt;rnf&lt;/span&gt;.&lt;span class="n"&gt;ms&lt;/span&gt;.&lt;span class="n"&gt;pdf&lt;/span&gt; &lt;span class="n"&gt;rnf&lt;/span&gt;.&lt;span class="n"&gt;ms&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-2" name="rest_code_66be158e5eab44cf93e8fc60708020ce-2" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-2"&gt;&lt;/a&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-3" name="rest_code_66be158e5eab44cf93e8fc60708020ce-3" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-3"&gt;&lt;/a&gt;&lt;span class="nf"&gt;rnf-issue.html rnf-issue.gfm rnf-issue.gfm.html&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;rnf&lt;/span&gt;.&lt;span class="n"&gt;rst&lt;/span&gt; \
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-4" name="rest_code_66be158e5eab44cf93e8fc60708020ce-4" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-4"&gt;&lt;/a&gt;        &lt;span class="n"&gt;pandoc&lt;/span&gt;.&lt;span class="n"&gt;version&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;.&lt;span class="n"&gt;version&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-5" name="rest_code_66be158e5eab44cf93e8fc60708020ce-5" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-5"&gt;&lt;/a&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-6" name="rest_code_66be158e5eab44cf93e8fc60708020ce-6" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-6"&gt;&lt;/a&gt;&lt;span class="nf"&gt;.PRECIOUS&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;rnf&lt;/span&gt;-&lt;span class="n"&gt;issue&lt;/span&gt;.&lt;span class="n"&gt;gfm&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-7" name="rest_code_66be158e5eab44cf93e8fc60708020ce-7" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-7"&gt;&lt;/a&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-8" name="rest_code_66be158e5eab44cf93e8fc60708020ce-8" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-8"&gt;&lt;/a&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-9" name="rest_code_66be158e5eab44cf93e8fc60708020ce-9" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-9"&gt;&lt;/a&gt;&lt;span class="nf"&gt;pandoc.version&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nv"&gt;shell&lt;/span&gt; &lt;span class="nv"&gt;type&lt;/span&gt; &lt;span class="nv"&gt;-p&lt;/span&gt; &lt;span class="nv"&gt;pandoc&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-10" name="rest_code_66be158e5eab44cf93e8fc60708020ce-10" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-10"&gt;&lt;/a&gt;        pandoc --version &lt;span class="p"&gt;|&lt;/span&gt; head -2 &amp;gt;&lt;span class="nv"&gt;$@&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-11" name="rest_code_66be158e5eab44cf93e8fc60708020ce-11" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-11"&gt;&lt;/a&gt;&lt;span class="nf"&gt;os.version&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-12" name="rest_code_66be158e5eab44cf93e8fc60708020ce-12" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-12"&gt;&lt;/a&gt;        osinfo &amp;gt;&lt;span class="nv"&gt;$@&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-13" name="rest_code_66be158e5eab44cf93e8fc60708020ce-13" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-13"&gt;&lt;/a&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-14" name="rest_code_66be158e5eab44cf93e8fc60708020ce-14" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-14"&gt;&lt;/a&gt;&lt;span class="nf"&gt;%.ms &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; %.&lt;span class="n"&gt;rst&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-15" name="rest_code_66be158e5eab44cf93e8fc60708020ce-15" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-15"&gt;&lt;/a&gt;        pandoc -r rst -w ms -o &lt;span class="nv"&gt;$@&lt;/span&gt; $&amp;lt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-16" name="rest_code_66be158e5eab44cf93e8fc60708020ce-16" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-16"&gt;&lt;/a&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-17" name="rest_code_66be158e5eab44cf93e8fc60708020ce-17" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-17"&gt;&lt;/a&gt;&lt;span class="nf"&gt;%.ms.pdf &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; %.&lt;span class="n"&gt;rst&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-18" name="rest_code_66be158e5eab44cf93e8fc60708020ce-18" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-18"&gt;&lt;/a&gt;        pandoc -s -r rst -w ms -o &lt;span class="nv"&gt;$@&lt;/span&gt; $&amp;lt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-19" name="rest_code_66be158e5eab44cf93e8fc60708020ce-19" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-19"&gt;&lt;/a&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-20" name="rest_code_66be158e5eab44cf93e8fc60708020ce-20" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-20"&gt;&lt;/a&gt;&lt;span class="nf"&gt;%.html &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; %.&lt;span class="n"&gt;rst&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-21" name="rest_code_66be158e5eab44cf93e8fc60708020ce-21" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-21"&gt;&lt;/a&gt;        pandoc -s -r rst -w html -H fancy.style --output&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$@&lt;/span&gt; $&amp;lt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-22" name="rest_code_66be158e5eab44cf93e8fc60708020ce-22" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-22"&gt;&lt;/a&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-23" name="rest_code_66be158e5eab44cf93e8fc60708020ce-23" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-23"&gt;&lt;/a&gt;&lt;span class="nf"&gt;%-pandoc.html &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; %.&lt;span class="n"&gt;rst&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-24" name="rest_code_66be158e5eab44cf93e8fc60708020ce-24" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-24"&gt;&lt;/a&gt;        pandoc -r rst -w html --output&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$@&lt;/span&gt; $&amp;lt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-25" name="rest_code_66be158e5eab44cf93e8fc60708020ce-25" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-25"&gt;&lt;/a&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-26" name="rest_code_66be158e5eab44cf93e8fc60708020ce-26" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-26"&gt;&lt;/a&gt;&lt;span class="nf"&gt;%-docutils.html&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; %.&lt;span class="n"&gt;rst&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-27" name="rest_code_66be158e5eab44cf93e8fc60708020ce-27" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-27"&gt;&lt;/a&gt;        rst2html.py $&amp;lt; &lt;span class="p"&gt;|&lt;/span&gt; sed &lt;span class="s1"&gt;'1,/^&amp;lt;div class="document"&amp;gt;/d'&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sed -e &lt;span class="s1"&gt;'1,2d'&lt;/span&gt; -e &lt;span class="s1"&gt;'\%&amp;lt;/div&amp;gt;%,$$d'&lt;/span&gt; &amp;gt;&lt;span class="nv"&gt;$@&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-28" name="rest_code_66be158e5eab44cf93e8fc60708020ce-28" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-28"&gt;&lt;/a&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-29" name="rest_code_66be158e5eab44cf93e8fc60708020ce-29" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-29"&gt;&lt;/a&gt;&lt;span class="nf"&gt;%.gfm &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; %.&lt;span class="n"&gt;rst&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-30" name="rest_code_66be158e5eab44cf93e8fc60708020ce-30" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-30"&gt;&lt;/a&gt;        pandoc -r rst -w gfm -o &lt;span class="nv"&gt;$@&lt;/span&gt; $&amp;lt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-31" name="rest_code_66be158e5eab44cf93e8fc60708020ce-31" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-31"&gt;&lt;/a&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-32" name="rest_code_66be158e5eab44cf93e8fc60708020ce-32" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-32"&gt;&lt;/a&gt;&lt;span class="nf"&gt;%.gfm.html &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; %.&lt;span class="n"&gt;gfm&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-33" name="rest_code_66be158e5eab44cf93e8fc60708020ce-33" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-33"&gt;&lt;/a&gt;        pandoc -s -r gfm -w html -H fancy.style -o &lt;span class="nv"&gt;$@&lt;/span&gt; $&amp;lt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-34" name="rest_code_66be158e5eab44cf93e8fc60708020ce-34" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-34"&gt;&lt;/a&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-35" name="rest_code_66be158e5eab44cf93e8fc60708020ce-35" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-35"&gt;&lt;/a&gt;&lt;span class="nf"&gt;.PHONY&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;clean&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-36" name="rest_code_66be158e5eab44cf93e8fc60708020ce-36" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-36"&gt;&lt;/a&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-37" name="rest_code_66be158e5eab44cf93e8fc60708020ce-37" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-37"&gt;&lt;/a&gt;&lt;span class="nf"&gt;clean&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-38" name="rest_code_66be158e5eab44cf93e8fc60708020ce-38" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-38"&gt;&lt;/a&gt;        -rm *.html *.native os.version pandoc.version docutils.version *.gfm
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-39" name="rest_code_66be158e5eab44cf93e8fc60708020ce-39" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-39"&gt;&lt;/a&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-40" name="rest_code_66be158e5eab44cf93e8fc60708020ce-40" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-40"&gt;&lt;/a&gt;&lt;span class="nf"&gt;.depend&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;rnf&lt;/span&gt;-&lt;span class="n"&gt;issue&lt;/span&gt;.&lt;span class="n"&gt;rst&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-41" name="rest_code_66be158e5eab44cf93e8fc60708020ce-41" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-41"&gt;&lt;/a&gt;        rst-depends rnf-issue.rst &amp;gt;&lt;span class="nv"&gt;$@&lt;/span&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-42" name="rest_code_66be158e5eab44cf93e8fc60708020ce-42" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-42"&gt;&lt;/a&gt;
&lt;a id="rest_code_66be158e5eab44cf93e8fc60708020ce-43" name="rest_code_66be158e5eab44cf93e8fc60708020ce-43" href="https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/#rest_code_66be158e5eab44cf93e8fc60708020ce-43"&gt;&lt;/a&gt;&lt;span class="cp"&gt;include .depend&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;This may seem complex, but in practice I use templates to start out
all the files and by building it all with &lt;span class="program"&gt;make&lt;/span&gt; and &lt;a class="reference external" href="https://pandoc.org"&gt;pandoc&lt;/a&gt;
using the &lt;code class="docutils literal"&gt;include&lt;/code&gt; directive of &lt;a class="reference external" href="https://docutils.sourceforge.io/rst.html"&gt;reST&lt;/a&gt; I ensure that the contents of
the message are correctly built from the various included files.&lt;/p&gt;</description><category>gfm</category><category>github flavored markdown</category><category>issues</category><category>pandoc</category><category>pandoc-discuss</category><category>restructuredtext</category><category>rst</category><guid>https://tkurtbond.github.io/posts/2020/08/05/how-i-author-e-mails-to-pandoc-discuss-and-issues-on-the-pandoc-repo/</guid><pubDate>Wed, 05 Aug 2020 18:40:53 GMT</pubDate></item><item><title>Customizing pandoc ms output with a Lua filter</title><link>https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/</link><dc:creator>T. Kurt Bond</dc:creator><description>&lt;p&gt;This article started as a &lt;a class="reference external" href="https://groups.google.com/d/msg/pandoc-discuss/UJgyLbxTNxo/MZDVFts-BAAJ"&gt;message&lt;/a&gt; I sent to the the &lt;a class="reference external" href="https://groups.google.com/forum/#!forum/pandoc-discuss"&gt;pandoc-discuss&lt;/a&gt;
Google Group.  This version has more links and has been slightly
reworded.&lt;/p&gt;
&lt;p&gt;I work with &lt;a class="reference external" href="https://docutils.sourceforge.io/rst.html"&gt;ReStructuredText&lt;/a&gt; documents a lot and often use &lt;a class="reference external" href="https://pandoc.org/"&gt;pandoc&lt;/a&gt; to
format them, especially to PDF by way of &lt;span class="app"&gt;pandoc&lt;/span&gt;'s &lt;code class="docutils literal"&gt;ms&lt;/code&gt;
output format, which uses &lt;span class="app"&gt;groff&lt;/span&gt; with the &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-ms&lt;/span&gt;&lt;/code&gt; macros to produce the
PDF output.  Using &lt;code class="docutils literal"&gt;ms&lt;/code&gt; output is fast, &lt;span class="app"&gt;groff&lt;/span&gt; is usually available
on the operating systems I use, and if you &lt;em&gt;do&lt;/em&gt; have to install &lt;span class="app"&gt;groff&lt;/span&gt;
it is easy to do and much, much smaller than any &lt;span class="app"&gt;TeX&lt;/span&gt; distributions.&lt;/p&gt;
&lt;p&gt;However, it would be a nice to be able to customize the &lt;code class="docutils literal"&gt;ms&lt;/code&gt; output
more for specific input, like if you are using technical writing and
are pining for something like the various inline roles of &lt;a class="reference external" href="https://tdg.docbook.org/tdg/5.1/ch02.html#s.inline"&gt;DocBook&lt;/a&gt;, or
wanted poems to be typeset more stylishly that the &lt;code class="docutils literal"&gt;ms&lt;/code&gt; output does.&lt;/p&gt;
&lt;p&gt;You should probably be a little familiar with the &lt;a class="reference external" href="https://pandoc.org/MANUAL.html"&gt;Pandoc User
Manual&lt;/a&gt; and have the documentation for &lt;a class="reference external" href="https://pandoc.org/lua-filters.html"&gt;Lua Filter&lt;/a&gt;'s available for
reference while reading this article.  And having a reading
familiarity with &lt;a class="reference external" href="https://www.gnu.org/software/groff/"&gt;groff&lt;/a&gt; and its &lt;a class="reference external" href="https://www.gnu.org/software/groff/manual/"&gt;manual&lt;/a&gt; and specifically the &lt;a class="reference external" href="https://www.gnu.org/software/groff/manual/html_node/ms.html#ms"&gt;-ms
macros&lt;/a&gt; will be useful too.  And maybe &lt;a class="reference external" href="https://www.lua.org/"&gt;Lua&lt;/a&gt; as well.&lt;/p&gt;
&lt;p&gt;Starting with an &lt;a class="reference external" href="https://dave.autonoma.ca/blog/2020/04/28/typesetting-markdown-part-8/"&gt;article&lt;/a&gt; from Dave Jarvis that had an example &lt;a class="reference external" href="https://pandoc.org/lua-filters.html"&gt;Lua
filter&lt;/a&gt; for customizing the &lt;span class="app"&gt;ConTeXt&lt;/span&gt; output and a little help
from the pandoc-discuss mailing list I came up with this example &lt;a class="reference external" href="https://pandoc.org/lua-filters.html"&gt;Lua
Filter&lt;/a&gt; that formats program names and poems specially.&lt;/p&gt;
&lt;p&gt;This filter wraps spans with a class, such as from interpreted text
roles defined in the source ReST (like &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;:program:`pandoc`&lt;/span&gt;&lt;/code&gt;) in calls
to user defined &lt;span class="app"&gt;groff&lt;/span&gt; strings &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;\*[start&amp;lt;class&amp;gt;]&lt;/span&gt;&lt;/code&gt; and
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;\*[stop&amp;lt;class&amp;gt;]&lt;/span&gt;&lt;/code&gt;.  (I've specified the string definitions for
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;\*[startprogram]&lt;/span&gt;&lt;/code&gt; and &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;\*[stopprogram]&lt;/span&gt;&lt;/code&gt; in the source ReST as a
raw block for &lt;code class="docutils literal"&gt;ms&lt;/code&gt; output but they could be in a customized &lt;code class="docutils literal"&gt;ms&lt;/code&gt;
pandoc template, too.)  These strings can include &lt;span class="app"&gt;groff&lt;/span&gt; escapes to
change the font and the glyph color and then change back to the
previous font and glyph color.  In this example I made PDF output for
the interpreted text role &lt;code class="docutils literal"&gt;program&lt;/code&gt; come out in a constant width
font and in red.&lt;/p&gt;
&lt;p&gt;It also wraps divs with classes with calls to user defined &lt;span class="app"&gt;groff&lt;/span&gt;
macros &lt;code class="docutils literal"&gt;.start&amp;lt;class&amp;gt;&lt;/code&gt; and &lt;code class="docutils literal"&gt;.stop&amp;lt;class&amp;gt;&lt;/code&gt; (also included in the
source ReST in the raw block for ms output).&lt;/p&gt;
&lt;p&gt;For divs with the poem class, it converts any contained LineBlock
elements into a list of Plain elements containing its contents,
avoiding the ms output for the LineBlock starting with &lt;code class="docutils literal"&gt;.LP&lt;/code&gt;, which
would cancel the &lt;code class="docutils literal"&gt;.DS&lt;/code&gt; (display start) macro I want to use in the
.startpoem macro definition.  The &lt;code class="docutils literal"&gt;.LP&lt;/code&gt; would also reset the font family
in use to the default, another reason to avoid it. &lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#lp" id="footnote-reference-1" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;1&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The filter also converts the empty element that occurs in the line block
as a result of a blank line in the line block input into a RawBlock
that creates a blank line in the ms output, to show the division into
stanzas of the poem.&lt;/p&gt;
&lt;p&gt;Interestingly, the first Str elements in the each line in the content
of the line block preserved the leading spaces from the input as
Unicode NO-BREAK SPACE characters, preserving indentation of lines in
the line block.  Unfortunately, the width of those spaces alone is not
enough create a visually distinct indentation, so this filter changes
those Str elements into a RawInline that outputs a &lt;span class="app"&gt;groff&lt;/span&gt; horizfontal
movement whose width is based on the number of leading NO-BREAK SPACE
characters, and follow this with a new Str element that has the
leading NO-BREAK SPACE characters removed.&lt;/p&gt;
&lt;p&gt;Here is the Lua filter, &lt;span class="file"&gt;classify-rst-ms.lua&lt;/span&gt;:&lt;/p&gt;
&lt;pre class="code lua"&gt;&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-1" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-1" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;onig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;require&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"rex_onig"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;-- Need a regex package that understands UTF8.&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-2" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-2" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-2"&gt;&lt;/a&gt;&lt;span class="c1"&gt;-- text in LineBreak preserves leading spaces as Unicode NO-BREAK SPACE&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-3" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-3" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;leading_nobreakspace_rx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;onig&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"^(&lt;/span&gt;&lt;span class="se"&gt;\u{a0}&lt;/span&gt;&lt;span class="s2"&gt;+)(.*)$"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"UTF8"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-4" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-4" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-4"&gt;&lt;/a&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-5" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-5" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-5"&gt;&lt;/a&gt;&lt;span class="kr"&gt;function&lt;/span&gt; &lt;span class="nf"&gt;Div&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-6" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-6" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-6"&gt;&lt;/a&gt;  &lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;classes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;find_if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;matches&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-7" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-7" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-7"&gt;&lt;/a&gt;  &lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;numPara&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-8" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-8" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-8"&gt;&lt;/a&gt;   &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt; &lt;span class="kr"&gt;then&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-9" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-9" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-9"&gt;&lt;/a&gt;     &lt;span class="n"&gt;annotation&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;gsub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s2"&gt;"[^%w]*"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;""&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-10" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-10" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-10"&gt;&lt;/a&gt;     &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;"poem"&lt;/span&gt; &lt;span class="kr"&gt;then&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-11" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-11" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-11"&gt;&lt;/a&gt;        &lt;span class="n"&gt;element&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pandoc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;walk_block&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-12" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-12" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-12"&gt;&lt;/a&gt;           &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-13" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-13" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-13"&gt;&lt;/a&gt;              &lt;span class="c1"&gt;-- Replace LineBlock element with a list of Plain elements&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-14" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-14" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-14"&gt;&lt;/a&gt;              &lt;span class="c1"&gt;-- containing the LineBlock's subelements.&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-15" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-15" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-15"&gt;&lt;/a&gt;              &lt;span class="n"&gt;LineBlock&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kr"&gt;function&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;el&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-16" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-16" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-16"&gt;&lt;/a&gt;                 &lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-17" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-17" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-17"&gt;&lt;/a&gt;                 &lt;span class="kr"&gt;for&lt;/span&gt; &lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;subel&lt;/span&gt; &lt;span class="kr"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;ipairs&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;el&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="kr"&gt;do&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-18" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-18" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-18"&gt;&lt;/a&gt;                    &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="o"&gt;#&lt;/span&gt;&lt;span class="n"&gt;subel&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="kr"&gt;then&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-19" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-19" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-19"&gt;&lt;/a&gt;                       &lt;span class="c1"&gt;-- If subel is an empty table, output a raw empty line&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-20" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-20" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-20"&gt;&lt;/a&gt;                       &lt;span class="nb"&gt;table.insert&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pandoc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RawBlock&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"ms"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\n\n&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-21" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-21" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-21"&gt;&lt;/a&gt;                    &lt;span class="kr"&gt;else&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-22" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-22" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-22"&gt;&lt;/a&gt;                       &lt;span class="c1"&gt;-- Check for leading NO-BREAK SPACE charaters&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-23" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-23" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-23"&gt;&lt;/a&gt;                       &lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;m1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;onig&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;match&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;subel&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-24" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-24" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-24"&gt;&lt;/a&gt;                                                  &lt;span class="n"&gt;leading_nobreakspace_rx&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-25" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-25" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-25"&gt;&lt;/a&gt;                       &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="n"&gt;m1&lt;/span&gt; &lt;span class="kr"&gt;then&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-26" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-26" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-26"&gt;&lt;/a&gt;                          &lt;span class="c1"&gt;-- Replace the NO-BREAK SPACE characters with a raw&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-27" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-27" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-27"&gt;&lt;/a&gt;                          &lt;span class="c1"&gt;-- groff horizontal movement, because the&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-28" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-28" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-28"&gt;&lt;/a&gt;                          &lt;span class="c1"&gt;-- NO-BREAK SPACE characters are too narrow.&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-29" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-29" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-29"&gt;&lt;/a&gt;                          &lt;span class="nb"&gt;table.insert&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;subel&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pandoc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RawInline&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"ms"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;string.format&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s2"&gt;h'%dn'"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;utf8.len&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m1&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-30" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-30" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-30"&gt;&lt;/a&gt;                          &lt;span class="c1"&gt;-- Modify what was used to be the first item to just&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-31" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-31" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-31"&gt;&lt;/a&gt;                          &lt;span class="c1"&gt;-- include the trailing characters of the match.&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-32" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-32" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-32"&gt;&lt;/a&gt;                          &lt;span class="n"&gt;subel&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pandoc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Str&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-33" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-33" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-33"&gt;&lt;/a&gt;                          &lt;span class="nb"&gt;table.insert&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pandoc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Plain&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;subel&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-34" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-34" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-34"&gt;&lt;/a&gt;                       &lt;span class="kr"&gt;else&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-35" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-35" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-35"&gt;&lt;/a&gt;                          &lt;span class="c1"&gt;-- Just put the subel in Plain element.&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-36" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-36" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-36"&gt;&lt;/a&gt;                          &lt;span class="nb"&gt;table.insert&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pandoc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Plain&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;subel&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-37" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-37" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-37"&gt;&lt;/a&gt;                       &lt;span class="kr"&gt;end&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-38" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-38" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-38"&gt;&lt;/a&gt;                    &lt;span class="kr"&gt;end&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-39" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-39" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-39"&gt;&lt;/a&gt;                 &lt;span class="kr"&gt;end&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-40" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-40" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-40"&gt;&lt;/a&gt;                 &lt;span class="kr"&gt;return&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-41" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-41" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-41"&gt;&lt;/a&gt;        &lt;span class="kr"&gt;end&lt;/span&gt; &lt;span class="p"&gt;})&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-42" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-42" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-42"&gt;&lt;/a&gt;     &lt;span class="kr"&gt;end&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-43" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-43" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-43"&gt;&lt;/a&gt;     &lt;span class="kr"&gt;return&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-44" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-44" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-44"&gt;&lt;/a&gt;        &lt;span class="n"&gt;ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s2"&gt;".start"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt; &lt;span class="p"&gt;),&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-45" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-45" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-45"&gt;&lt;/a&gt;        &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-46" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-46" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-46"&gt;&lt;/a&gt;        &lt;span class="n"&gt;ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s2"&gt;".stop"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-47" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-47" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-47"&gt;&lt;/a&gt;     &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-48" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-48" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-48"&gt;&lt;/a&gt;  &lt;span class="kr"&gt;end&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-49" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-49" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-49"&gt;&lt;/a&gt;&lt;span class="kr"&gt;end&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-50" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-50" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-50"&gt;&lt;/a&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-51" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-51" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-51"&gt;&lt;/a&gt;&lt;span class="kr"&gt;function&lt;/span&gt; &lt;span class="nf"&gt;Span&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-52" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-52" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-52"&gt;&lt;/a&gt;  &lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;classes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;find_if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;matches&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-53" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-53" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-53"&gt;&lt;/a&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-54" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-54" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-54"&gt;&lt;/a&gt;  &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt; &lt;span class="kr"&gt;then&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-55" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-55" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-55"&gt;&lt;/a&gt;     &lt;span class="n"&gt;annotation&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;gsub&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"[^%w]*"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;""&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-56" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-56" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-56"&gt;&lt;/a&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-57" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-57" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-57"&gt;&lt;/a&gt;     &lt;span class="kr"&gt;return&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-58" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-58" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-58"&gt;&lt;/a&gt;        &lt;span class="n"&gt;ms_inline&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s2"&gt;*[start"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"]"&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-59" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-59" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-59"&gt;&lt;/a&gt;        &lt;span class="n"&gt;element&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-60" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-60" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-60"&gt;&lt;/a&gt;        &lt;span class="n"&gt;ms_inline&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s2"&gt;*[stop"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;"]"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-61" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-61" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-61"&gt;&lt;/a&gt;     &lt;span class="p"&gt;}&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-62" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-62" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-62"&gt;&lt;/a&gt;  &lt;span class="kr"&gt;end&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-63" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-63" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-63"&gt;&lt;/a&gt;&lt;span class="kr"&gt;end&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-64" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-64" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-64"&gt;&lt;/a&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-65" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-65" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-65"&gt;&lt;/a&gt;&lt;span class="kr"&gt;function&lt;/span&gt; &lt;span class="nf"&gt;matches&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-66" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-66" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-66"&gt;&lt;/a&gt; &lt;span class="kr"&gt;return&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;match&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s2"&gt;"^%a+"&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-67" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-67" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-67"&gt;&lt;/a&gt;&lt;span class="kr"&gt;end&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-68" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-68" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-68"&gt;&lt;/a&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-69" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-69" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-69"&gt;&lt;/a&gt;&lt;span class="kr"&gt;function&lt;/span&gt; &lt;span class="nf"&gt;ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;macro&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-70" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-70" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-70"&gt;&lt;/a&gt; &lt;span class="kr"&gt;return&lt;/span&gt; &lt;span class="n"&gt;pandoc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RawBlock&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="s2"&gt;"ms"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;macro&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-71" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-71" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-71"&gt;&lt;/a&gt;&lt;span class="kr"&gt;end&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-72" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-72" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-72"&gt;&lt;/a&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-73" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-73" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-73"&gt;&lt;/a&gt;&lt;span class="kr"&gt;function&lt;/span&gt; &lt;span class="nf"&gt;ms_inline&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;macro&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;stop&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-74" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-74" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-74"&gt;&lt;/a&gt;  &lt;span class="kr"&gt;return&lt;/span&gt; &lt;span class="n"&gt;pandoc&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RawInline&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;"ms"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;macro&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="n"&gt;annotation&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="n"&gt;stop&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a id="rest_code_1a8680f1f76e47129ecb214dbf926e19-75" name="rest_code_1a8680f1f76e47129ecb214dbf926e19-75" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_1a8680f1f76e47129ecb214dbf926e19-75"&gt;&lt;/a&gt;&lt;span class="kr"&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Here is the ReST source of the document, &lt;span class="file"&gt;poem-plus.rst&lt;/span&gt;:&lt;/p&gt;
&lt;pre class="code ReST"&gt;&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-1" name="rest_code_746eb16a74204ffb9374580b7f8c22de-1" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-1"&gt;&lt;/a&gt;Lua Filters For Massaging &lt;span class="s"&gt;``ms``&lt;/span&gt; Output
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-2" name="rest_code_746eb16a74204ffb9374580b7f8c22de-2" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-2"&gt;&lt;/a&gt;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-3" name="rest_code_746eb16a74204ffb9374580b7f8c22de-3" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-3"&gt;&lt;/a&gt;
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-4" name="rest_code_746eb16a74204ffb9374580b7f8c22de-4" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-4"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;raw&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; ms
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-5" name="rest_code_746eb16a74204ffb9374580b7f8c22de-5" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-5"&gt;&lt;/a&gt;
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-6" name="rest_code_746eb16a74204ffb9374580b7f8c22de-6" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-6"&gt;&lt;/a&gt;   .ds startprogram \\f[CW]\\m[red]
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-7" name="rest_code_746eb16a74204ffb9374580b7f8c22de-7" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-7"&gt;&lt;/a&gt;   .ds stopprogram \\m[]\\fP
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-8" name="rest_code_746eb16a74204ffb9374580b7f8c22de-8" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-8"&gt;&lt;/a&gt;   .de startpoem
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-9" name="rest_code_746eb16a74204ffb9374580b7f8c22de-9" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-9"&gt;&lt;/a&gt;   .ds OLDFAM \\*[FAM]
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-10" name="rest_code_746eb16a74204ffb9374580b7f8c22de-10" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-10"&gt;&lt;/a&gt;   .ds FAM BM
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-11" name="rest_code_746eb16a74204ffb9374580b7f8c22de-11" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-11"&gt;&lt;/a&gt;   .DS I 3
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-12" name="rest_code_746eb16a74204ffb9374580b7f8c22de-12" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-12"&gt;&lt;/a&gt;&lt;span class="cp"&gt;   ..&lt;/span&gt;
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-13" name="rest_code_746eb16a74204ffb9374580b7f8c22de-13" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-13"&gt;&lt;/a&gt;&lt;span class="cp"&gt;   .de stoppoem&lt;/span&gt;
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-14" name="rest_code_746eb16a74204ffb9374580b7f8c22de-14" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-14"&gt;&lt;/a&gt;&lt;span class="cp"&gt;   .DE&lt;/span&gt;
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-15" name="rest_code_746eb16a74204ffb9374580b7f8c22de-15" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-15"&gt;&lt;/a&gt;&lt;span class="cp"&gt;   .ds FAM \\*[OLDFAM]&lt;/span&gt;
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-16" name="rest_code_746eb16a74204ffb9374580b7f8c22de-16" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-16"&gt;&lt;/a&gt;&lt;span class="cp"&gt;   ..&lt;/span&gt;
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-17" name="rest_code_746eb16a74204ffb9374580b7f8c22de-17" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-17"&gt;&lt;/a&gt;
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-18" name="rest_code_746eb16a74204ffb9374580b7f8c22de-18" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-18"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;role&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; program
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-19" name="rest_code_746eb16a74204ffb9374580b7f8c22de-19" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-19"&gt;&lt;/a&gt;
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-20" name="rest_code_746eb16a74204ffb9374580b7f8c22de-20" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-20"&gt;&lt;/a&gt;This is a sentence.  This sentence talks about &lt;span class="na"&gt;:program:&lt;/span&gt;&lt;span class="nv"&gt;`pandoc`&lt;/span&gt;.
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-21" name="rest_code_746eb16a74204ffb9374580b7f8c22de-21" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-21"&gt;&lt;/a&gt;This is
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-22" name="rest_code_746eb16a74204ffb9374580b7f8c22de-22" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-22"&gt;&lt;/a&gt;another sentence.
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-23" name="rest_code_746eb16a74204ffb9374580b7f8c22de-23" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-23"&gt;&lt;/a&gt;
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-24" name="rest_code_746eb16a74204ffb9374580b7f8c22de-24" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-24"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;class&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; poem
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-25" name="rest_code_746eb16a74204ffb9374580b7f8c22de-25" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-25"&gt;&lt;/a&gt;
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-26" name="rest_code_746eb16a74204ffb9374580b7f8c22de-26" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-26"&gt;&lt;/a&gt;   &lt;span class="o"&gt;|&lt;/span&gt; Some say the world will end in fire,
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-27" name="rest_code_746eb16a74204ffb9374580b7f8c22de-27" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-27"&gt;&lt;/a&gt;   &lt;span class="o"&gt;|&lt;/span&gt;    Some say in ice.
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-28" name="rest_code_746eb16a74204ffb9374580b7f8c22de-28" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-28"&gt;&lt;/a&gt;   &lt;span class="o"&gt;|&lt;/span&gt; From what I've tasted of desire
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-29" name="rest_code_746eb16a74204ffb9374580b7f8c22de-29" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-29"&gt;&lt;/a&gt;   &lt;span class="o"&gt;|&lt;/span&gt;    I hold with those who favor fire.
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-30" name="rest_code_746eb16a74204ffb9374580b7f8c22de-30" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-30"&gt;&lt;/a&gt;   &lt;span class="o"&gt;|&lt;/span&gt; But if it had to perish twice,
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-31" name="rest_code_746eb16a74204ffb9374580b7f8c22de-31" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-31"&gt;&lt;/a&gt;   &lt;span class="o"&gt;|&lt;/span&gt;    I think I know enough of hate
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-32" name="rest_code_746eb16a74204ffb9374580b7f8c22de-32" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-32"&gt;&lt;/a&gt;   &lt;span class="o"&gt;|&lt;/span&gt;    To say that for destruction ice
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-33" name="rest_code_746eb16a74204ffb9374580b7f8c22de-33" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-33"&gt;&lt;/a&gt;   &lt;span class="o"&gt;|&lt;/span&gt;    Is also great,
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-34" name="rest_code_746eb16a74204ffb9374580b7f8c22de-34" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-34"&gt;&lt;/a&gt;   &lt;span class="o"&gt;|&lt;/span&gt; And would suffice.
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-35" name="rest_code_746eb16a74204ffb9374580b7f8c22de-35" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-35"&gt;&lt;/a&gt;   |
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-36" name="rest_code_746eb16a74204ffb9374580b7f8c22de-36" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-36"&gt;&lt;/a&gt;   &lt;span class="o"&gt;|&lt;/span&gt; And another line,
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-37" name="rest_code_746eb16a74204ffb9374580b7f8c22de-37" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-37"&gt;&lt;/a&gt;   &lt;span class="o"&gt;|&lt;/span&gt;    And an indented line.
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-38" name="rest_code_746eb16a74204ffb9374580b7f8c22de-38" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-38"&gt;&lt;/a&gt;
&lt;a id="rest_code_746eb16a74204ffb9374580b7f8c22de-39" name="rest_code_746eb16a74204ffb9374580b7f8c22de-39" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_746eb16a74204ffb9374580b7f8c22de-39"&gt;&lt;/a&gt;This is a final sentence.
&lt;/pre&gt;&lt;p&gt;And here is the ms output:&lt;/p&gt;
&lt;pre class="code groff"&gt;&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-1" name="rest_code_a92c8a6b605842b7af15efd2276e303b-1" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-1"&gt;&lt;/a&gt;.&lt;span class="k"&gt;SH&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-2" name="rest_code_a92c8a6b605842b7af15efd2276e303b-2" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-2"&gt;&lt;/a&gt;Lua Filters For Massaging &lt;span class="se"&gt;\f[CB]ms\f[B]&lt;/span&gt; Output
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-3" name="rest_code_a92c8a6b605842b7af15efd2276e303b-3" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-3"&gt;&lt;/a&gt;.&lt;span class="k"&gt;pdfhref&lt;/span&gt; &lt;span class="s"&gt;O&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="s2"&gt;"Lua Filters For Massaging ms Output"&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-4" name="rest_code_a92c8a6b605842b7af15efd2276e303b-4" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-4"&gt;&lt;/a&gt;.&lt;span class="k"&gt;pdfhref&lt;/span&gt; &lt;span class="s"&gt;M&lt;/span&gt; &lt;span class="s2"&gt;"lua-filters-for-massaging-ms-output"&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-5" name="rest_code_a92c8a6b605842b7af15efd2276e303b-5" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-5"&gt;&lt;/a&gt;.&lt;span class="k"&gt;ds&lt;/span&gt; &lt;span class="s"&gt;startprogram&lt;/span&gt; &lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;f[CW]\\m[red]&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-6" name="rest_code_a92c8a6b605842b7af15efd2276e303b-6" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-6"&gt;&lt;/a&gt;.&lt;span class="k"&gt;ds&lt;/span&gt; &lt;span class="s"&gt;stopprogram&lt;/span&gt; &lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;m[]\\fP&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-7" name="rest_code_a92c8a6b605842b7af15efd2276e303b-7" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-7"&gt;&lt;/a&gt;.&lt;span class="k"&gt;de&lt;/span&gt; &lt;span class="s"&gt;startpoem&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-8" name="rest_code_a92c8a6b605842b7af15efd2276e303b-8" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-8"&gt;&lt;/a&gt;.&lt;span class="k"&gt;ds&lt;/span&gt; &lt;span class="s"&gt;OLDFAM&lt;/span&gt; &lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;*[FAM]&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-9" name="rest_code_a92c8a6b605842b7af15efd2276e303b-9" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-9"&gt;&lt;/a&gt;.&lt;span class="k"&gt;ds&lt;/span&gt; &lt;span class="s"&gt;FAM&lt;/span&gt; &lt;span class="s"&gt;BM&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-10" name="rest_code_a92c8a6b605842b7af15efd2276e303b-10" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-10"&gt;&lt;/a&gt;.&lt;span class="k"&gt;DS&lt;/span&gt; &lt;span class="s"&gt;I&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-11" name="rest_code_a92c8a6b605842b7af15efd2276e303b-11" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-11"&gt;&lt;/a&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="s"&gt;.&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-12" name="rest_code_a92c8a6b605842b7af15efd2276e303b-12" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-12"&gt;&lt;/a&gt;.&lt;span class="k"&gt;de&lt;/span&gt; &lt;span class="s"&gt;stoppoem&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-13" name="rest_code_a92c8a6b605842b7af15efd2276e303b-13" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-13"&gt;&lt;/a&gt;.&lt;span class="k"&gt;DE&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-14" name="rest_code_a92c8a6b605842b7af15efd2276e303b-14" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-14"&gt;&lt;/a&gt;.&lt;span class="k"&gt;ds&lt;/span&gt; &lt;span class="s"&gt;FAM&lt;/span&gt; &lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;*[OLDFAM]&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-15" name="rest_code_a92c8a6b605842b7af15efd2276e303b-15" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-15"&gt;&lt;/a&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="s"&gt;.&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-16" name="rest_code_a92c8a6b605842b7af15efd2276e303b-16" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-16"&gt;&lt;/a&gt;.&lt;span class="k"&gt;LP&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-17" name="rest_code_a92c8a6b605842b7af15efd2276e303b-17" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-17"&gt;&lt;/a&gt;This is a sentence.
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-18" name="rest_code_a92c8a6b605842b7af15efd2276e303b-18" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-18"&gt;&lt;/a&gt;This sentence talks about &lt;span class="se"&gt;\*[startprogram]pandoc\*[stopprogram]&lt;/span&gt;.
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-19" name="rest_code_a92c8a6b605842b7af15efd2276e303b-19" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-19"&gt;&lt;/a&gt;This is
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-20" name="rest_code_a92c8a6b605842b7af15efd2276e303b-20" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-20"&gt;&lt;/a&gt;another sentence.
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-21" name="rest_code_a92c8a6b605842b7af15efd2276e303b-21" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-21"&gt;&lt;/a&gt;.&lt;span class="k"&gt;startpoem&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-22" name="rest_code_a92c8a6b605842b7af15efd2276e303b-22" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-22"&gt;&lt;/a&gt;Some say the world will end in fire,
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-23" name="rest_code_a92c8a6b605842b7af15efd2276e303b-23" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-23"&gt;&lt;/a&gt;&lt;span class="se"&gt;\h&lt;/span&gt;'3n'Some say in ice.
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-24" name="rest_code_a92c8a6b605842b7af15efd2276e303b-24" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-24"&gt;&lt;/a&gt;From what I&lt;span class="se"&gt;\[&lt;/span&gt;aq]ve tasted of desire
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-25" name="rest_code_a92c8a6b605842b7af15efd2276e303b-25" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-25"&gt;&lt;/a&gt;&lt;span class="se"&gt;\h&lt;/span&gt;'3n'I hold with those who favor fire.
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-26" name="rest_code_a92c8a6b605842b7af15efd2276e303b-26" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-26"&gt;&lt;/a&gt;But if it had to perish twice,
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-27" name="rest_code_a92c8a6b605842b7af15efd2276e303b-27" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-27"&gt;&lt;/a&gt;&lt;span class="se"&gt;\h&lt;/span&gt;'3n'I think I know enough of hate
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-28" name="rest_code_a92c8a6b605842b7af15efd2276e303b-28" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-28"&gt;&lt;/a&gt;&lt;span class="se"&gt;\h&lt;/span&gt;'3n'To say that for destruction ice
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-29" name="rest_code_a92c8a6b605842b7af15efd2276e303b-29" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-29"&gt;&lt;/a&gt;&lt;span class="se"&gt;\h&lt;/span&gt;'3n'Is also great,
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-30" name="rest_code_a92c8a6b605842b7af15efd2276e303b-30" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-30"&gt;&lt;/a&gt;And would suffice.
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-31" name="rest_code_a92c8a6b605842b7af15efd2276e303b-31" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-31"&gt;&lt;/a&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-32" name="rest_code_a92c8a6b605842b7af15efd2276e303b-32" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-32"&gt;&lt;/a&gt;And another line,
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-33" name="rest_code_a92c8a6b605842b7af15efd2276e303b-33" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-33"&gt;&lt;/a&gt;&lt;span class="se"&gt;\h&lt;/span&gt;'3n'And an indented line.
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-34" name="rest_code_a92c8a6b605842b7af15efd2276e303b-34" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-34"&gt;&lt;/a&gt;.&lt;span class="k"&gt;stoppoem&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-35" name="rest_code_a92c8a6b605842b7af15efd2276e303b-35" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-35"&gt;&lt;/a&gt;.&lt;span class="k"&gt;LP&lt;/span&gt;
&lt;a id="rest_code_a92c8a6b605842b7af15efd2276e303b-36" name="rest_code_a92c8a6b605842b7af15efd2276e303b-36" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_a92c8a6b605842b7af15efd2276e303b-36"&gt;&lt;/a&gt;This is a final sentence.
&lt;/pre&gt;&lt;p&gt;The command to produce the ms output is:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a id="rest_code_b1ee5962e85c4a858310770396c3619d-1" name="rest_code_b1ee5962e85c4a858310770396c3619d-1" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_b1ee5962e85c4a858310770396c3619d-1"&gt;&lt;/a&gt;pandoc -f rst -t ms --lua-filter classify-rst-ms.lua --wrap&lt;span class="o"&gt;=&lt;/span&gt;preserve poem-plus.rst --output&lt;span class="o"&gt;=&lt;/span&gt;poem-plus-rst.ms
&lt;/pre&gt;&lt;p&gt;and the command to produce a PDF is:&lt;/p&gt;
&lt;pre class="code bash"&gt;&lt;a id="rest_code_894d5b986e7a4dfda45f8bda83513313-1" name="rest_code_894d5b986e7a4dfda45f8bda83513313-1" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#rest_code_894d5b986e7a4dfda45f8bda83513313-1"&gt;&lt;/a&gt;pandoc -f rst -t ms --lua-filter classify-rst-ms.lua --wrap&lt;span class="o"&gt;=&lt;/span&gt;preserve poem-plus.rst --output&lt;span class="o"&gt;=&lt;/span&gt;poem-plus-rst.ms.pdf
&lt;/pre&gt;&lt;p&gt;&lt;a class="reference external" href="https://tkurtbond.github.io/poem-plus-rst.ms.pdf"&gt;Here&lt;/a&gt; is the output PDF.&lt;/p&gt;
&lt;p&gt;Being able to rewrite the tree and insert RawBlocks and RawInlines is
really powerful when it comes to customizing output for particular
output formats.&lt;/p&gt;
&lt;p&gt;I hope this example is useful for others like me just learning to use
Lua filters.&lt;/p&gt;
&lt;aside class="footnote brackets" id="lp" role="note"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/#footnote-reference-1"&gt;1&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;The &lt;code class="docutils literal"&gt;.LP&lt;/code&gt; macro in the &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-ms&lt;/span&gt;&lt;/code&gt; macros resets a lot of
things back to the default when it is used, so if you want the custom
&lt;span class="app"&gt;groff&lt;/span&gt; setting from your user defined macros to continue from the
start to the end you can't allow the use of &lt;code class="docutils literal"&gt;.LP&lt;/code&gt; between the
&lt;code class="docutils literal"&gt;.start&amp;lt;class&amp;gt;&lt;/code&gt; and &lt;code class="docutils literal"&gt;.stop&amp;lt;class&amp;gt;&lt;/code&gt; macros.&lt;/p&gt;
&lt;/aside&gt;</description><category>groff ms macros</category><category>lua filters</category><category>pandoc</category><category>pandoc-discuss</category><category>pdf</category><category>restructuredtext</category><guid>https://tkurtbond.github.io/posts/2020/05/03/customizing-pandoc-ms-output-with-a-lua-filter/</guid><pubDate>Sun, 03 May 2020 05:01:53 GMT</pubDate></item></channel></rss>