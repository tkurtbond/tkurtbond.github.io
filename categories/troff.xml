<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Lacking Natural Simplicity (Posts about troff)</title><link>https://tkurtbond.github.io/</link><description></description><atom:link href="https://tkurtbond.github.io/categories/troff.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents © 2022 &lt;a href="mailto:tkurtbond@gmail.com"&gt;T. Kurt Bond&lt;/a&gt; </copyright><lastBuildDate>Sun, 10 Jul 2022 22:45:33 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Making a newer version of groff work with man and emacs on macOS</title><link>https://tkurtbond.github.io/posts/2021/07/26/making-a-newer-version-of-groff-work-with-man-and-emacs-on-macos/</link><dc:creator>T. Kurt Bond</dc:creator><description>&lt;p&gt;I'm posting this mostly to remind myself if I ever have to fiddle with
this again.&lt;/p&gt;
&lt;p&gt;I use a version of &lt;span class="app"&gt;groff&lt;/span&gt; installed from &lt;span class="app"&gt;git&lt;/span&gt; because some
of my documents depend on fixes that are coming out in the next
release, 1.23.0.  I install it on my macOS machine in
&lt;span class="file"&gt;/usr/local/sw/versions/groff/git&lt;/span&gt;.  (The directory hierarchy
under &lt;span class="file"&gt;/usr/local/sw/versions&lt;/span&gt; is where I put programs that I
compile from scratch, to keep them separated from the programs that
come from the operating system and/or package managers.  I often have
more than one version of a program installed, therefore the
&lt;span class="file"&gt;versions&lt;/span&gt; component of the name.)&lt;/p&gt;
&lt;p&gt;Because the &lt;span class="command"&gt;groff&lt;/span&gt; that is first in my path is the new one I
installed, and because &lt;span class="app"&gt;man&lt;/span&gt; on macOS knows to look for man pages
according to what your &lt;code class="docutils literal"&gt;PATH&lt;/code&gt; is, when I say &lt;code class="docutils literal"&gt;man groff_ms&lt;/code&gt; I get
the new man page for &lt;code class="docutils literal"&gt;groff_ms&lt;/code&gt;.  Yay!  Unfortunately, it gets
rendered with the old &lt;span class="app"&gt;groff&lt;/span&gt; that macOS supplies, version
1.19.2, which doesn't include the &lt;code class="docutils literal"&gt;.SY&lt;/code&gt; macro that current versions
of &lt;span class="app"&gt;groff&lt;/span&gt; supply in their &lt;span class="app"&gt;man&lt;/span&gt; macros, and which they
&lt;em&gt;use&lt;/em&gt; in their man pages, so it renders wrong.  A typical example is
that when it renders &lt;span class="man"&gt;groff_ms(7)&lt;/span&gt; the &lt;code class="docutils literal"&gt;groff &lt;span class="pre"&gt;-ms&lt;/span&gt;&lt;/code&gt; and
&lt;code class="docutils literal"&gt;groff &lt;span class="pre"&gt;-m&lt;/span&gt; ms&lt;/code&gt; are missing from the lines in the SYNOPSIS section.
Boo!&lt;/p&gt;
&lt;p&gt;Luckily, &lt;span class="app"&gt;man&lt;/span&gt; takes a &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-C&lt;/span&gt;&lt;/code&gt; option that lets you specify an
alternate configuration file (on macOS the default one is in
&lt;span class="file"&gt;/private/etc/man.conf&lt;/span&gt;), so you can supply one that specifies
the absolute path to the newer &lt;span class="app"&gt;groff&lt;/span&gt; you are using.  So I added&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code bash"&gt;&lt;a id="rest_code_2ef498b826c24ba3abf2125ec09fe67a-1" name="rest_code_2ef498b826c24ba3abf2125ec09fe67a-1" href="https://tkurtbond.github.io/posts/2021/07/26/making-a-newer-version-of-groff-work-with-man-and-emacs-on-macos/#rest_code_2ef498b826c24ba3abf2125ec09fe67a-1"&gt;&lt;/a&gt;&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;man&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;'man -C ~/local/etc/man.conf'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;to the appropriate shell startup file.  And I can add&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code emacs-lisp"&gt;&lt;a id="rest_code_298b4628d24548a79c68a6d1fbc40d83-1" name="rest_code_298b4628d24548a79c68a6d1fbc40d83-1" href="https://tkurtbond.github.io/posts/2021/07/26/making-a-newer-version-of-groff-work-with-man-and-emacs-on-macos/#rest_code_298b4628d24548a79c68a6d1fbc40d83-1"&gt;&lt;/a&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;setq&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nv"&gt;Man-switches&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;"-C ~/local/etc/man.conf"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;to my &lt;span class="app"&gt;emacs&lt;/span&gt; configuration so it uses the right version of
&lt;span class="app"&gt;groff&lt;/span&gt; too.&lt;/p&gt;
&lt;p&gt;But a modern &lt;span class="app"&gt;groff&lt;/span&gt; produces ANSI escapes for bold and
underline, rather than the older convention of over-striking via the
backspace character with the same character for bold or with the
underscore character for underlining.  My pager, &lt;span class="app"&gt;less&lt;/span&gt;, can deal
with that, but something in &lt;span class="app"&gt;emacs&lt;/span&gt; doesn't like that, leaving
the buffer with &lt;span class="man"&gt;groff_ms(7)&lt;/span&gt; with underlining on every line.&lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2021/07/26/making-a-newer-version-of-groff-work-with-man-and-emacs-on-macos/#manual" id="footnote-reference-1" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;1&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Eventually I figured out that the old style over-striking via
backspaces worked just fine with emacs, so I added the &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-P-c&lt;/span&gt;&lt;/code&gt; option
to the invocation of &lt;span class="app"&gt;groff&lt;/span&gt; in the NROFF definition in my
modified &lt;span class="file"&gt;man.conf&lt;/span&gt; file.  That tells &lt;span class="command"&gt;groff&lt;/span&gt; to pass
the &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-c&lt;/span&gt;&lt;/code&gt; option to the &lt;span class="command"&gt;grotty&lt;/span&gt; output driver, which tells
it to use old-style backspace over-striking.&lt;/p&gt;
&lt;p&gt;This seems overly complicated.&lt;/p&gt;
&lt;p&gt;I suspect I'll need to do something different on the Linux boxes I
use.&lt;/p&gt;
&lt;section id="later"&gt;
&lt;h2&gt;Later&lt;/h2&gt;
&lt;p&gt;Aannnd I was right.  Fedora 33 has a similar problem, which I fixed by
creating a &lt;span class="file"&gt;~/.manpath&lt;/span&gt; file with&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code text"&gt;&lt;a id="rest_code_4501631dfd5d47c3acd557063505d8fe-1" name="rest_code_4501631dfd5d47c3acd557063505d8fe-1" href="https://tkurtbond.github.io/posts/2021/07/26/making-a-newer-version-of-groff-work-with-man-and-emacs-on-macos/#rest_code_4501631dfd5d47c3acd557063505d8fe-1"&gt;&lt;/a&gt;DEFINE       nroff   /sw/versions/groff/git/bin/nroff -mandoc -P-c
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;in it.  I found the information I needed in &lt;span class="man"&gt;manpath(5)&lt;/span&gt;, which
documents the format of the &lt;span class="file"&gt;/etc/man_db.conf&lt;/span&gt; file.  (Why isn't
it &lt;span class="man"&gt;man_db.conf(5)&lt;/span&gt;, then?)&lt;/p&gt;
&lt;aside class="footnote brackets" id="manual" role="note"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2021/07/26/making-a-newer-version-of-groff-work-with-man-and-emacs-on-macos/#footnote-reference-1"&gt;1&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;Oddly, if I direct &lt;span class="app"&gt;man&lt;/span&gt;'s output to a file, visit that file in
&lt;span class="app"&gt;emacs&lt;/span&gt;, and manually invoke the &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;Man-fontify-manpage&lt;/span&gt;&lt;/code&gt; function
&lt;span class="app"&gt;emacs&lt;/span&gt; uses to fontify the man page, it &lt;em&gt;doesn't&lt;/em&gt; end up
erroneously underlined.&lt;/p&gt;
&lt;/aside&gt;
&lt;p&gt;&lt;em&gt;Last edited: 2021-09-09 10:11:03 EDT&lt;/em&gt;&lt;/p&gt;
&lt;!-- Local Variables:
time-stamp-format: "%Y-%02m-%02d %02H:%02M:%02S %Z"
time-stamp-start: "\\*Last edited:[ \t]+\\\\?"
time-stamp-end: "\\*\\\\?\n"
time-stamp-line-limit: -20
End: --&gt;
&lt;/section&gt;</description><category>groff</category><category>macos</category><category>troff</category><guid>https://tkurtbond.github.io/posts/2021/07/26/making-a-newer-version-of-groff-work-with-man-and-emacs-on-macos/</guid><pubDate>Mon, 26 Jul 2021 21:30:19 GMT</pubDate></item><item><title>install-font.sh - The simple approach</title><link>https://tkurtbond.github.io/posts/2021/07/17/install-fontsh-the-simple-approach/</link><dc:creator>T. Kurt Bond</dc:creator><description>&lt;p&gt;The simple approach to using &lt;a class="reference external" href="https://www.schaffter.ca/mom/mom-05.html#install-font"&gt;install-font.sh&lt;/a&gt; to install fonts for
&lt;span class="app"&gt;groff&lt;/span&gt; probably works for almost everybody.&lt;/p&gt;
&lt;p&gt;First, make sure that &lt;a class="reference external" href="https://fontforge.org/"&gt;FontForge&lt;/a&gt; is installed; it is free and open
source and available for installation in most distributions.  Second,
call the &lt;span class="command"&gt;install-font.sh&lt;/span&gt; command with one argument, the
font file, and answer the prompts.&lt;/p&gt;
&lt;p&gt;This will install the fonts for &lt;span class="app"&gt;groff&lt;/span&gt;'s use in the appropriate
directories under &lt;span class="file"&gt;/usr/local/share/groff&lt;/span&gt;, creating the
directories if necessary.  If you need to install into
&lt;span class="file"&gt;/usr/share/groff&lt;/span&gt; you should specify the &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-s&lt;/span&gt;&lt;/code&gt; option to the
script.  For instance:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code text"&gt;&lt;a id="rest_code_69a63a3ecd37492ab2bc04dd78ff4d49-1" name="rest_code_69a63a3ecd37492ab2bc04dd78ff4d49-1" href="https://tkurtbond.github.io/posts/2021/07/17/install-fontsh-the-simple-approach/#rest_code_69a63a3ecd37492ab2bc04dd78ff4d49-1"&gt;&lt;/a&gt;$ install-font.sh Lora-Regular.ttf
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;will install the Regular variant of the font, leading you through four
prompts, for three of which you just need to take the default.&lt;/p&gt;
&lt;p&gt;The only prompt where you need to do something other than accept the
default is the prompt for the style.  For &lt;span class="file"&gt;Lora-Regular&lt;/span&gt; you'd
specify &lt;code class="docutils literal"&gt;+R&lt;/code&gt;.  For italic, bold, and bold italic, the other
traditional &lt;span class="app"&gt;troff&lt;/span&gt; font styles, you'd specify &lt;code class="docutils literal"&gt;+I&lt;/code&gt;, &lt;code class="docutils literal"&gt;+B&lt;/code&gt;,
and &lt;code class="docutils literal"&gt;+BI&lt;/code&gt;.  The prompt lists them all for you to choose from.&lt;/p&gt;
&lt;p&gt;Here's a walk-through of installing the &lt;a class="reference external" href="https://fonts.google.com/specimen/Lora"&gt;Lora&lt;/a&gt; font, assuming that
&lt;span class="command"&gt;install-font.sh&lt;/span&gt; is in your path.  (If your
&lt;span class="file"&gt;/usr/local/share/groff&lt;/span&gt; directory isn't writable for your
normal user, you should prefix the command with &lt;code class="docutils literal"&gt;sudo&lt;/code&gt;.)&lt;/p&gt;
&lt;p&gt;&lt;span class="command"&gt;install-font.sh&lt;/span&gt; does produce a lot of output, but the
colorizing helps pick out the important things.  I've put the
responses the user types in bold and red, and added “&amp;lt;RETURN&amp;gt;”
where the user presses the RETURN key to accept defaults.&lt;/p&gt;
&lt;pre&gt;
$ &lt;span style="color:red;"&gt;&lt;b&gt;install-font.sh Lora-Regular.ttf&lt;/b&gt;&lt;/span&gt;
/usr/local/share/groff/site-font not found; creating.
/usr/local/share/groff/site-font/devps not found; creating.
/usr/local/share/groff/site-font/devpdf not found; creating.
Processing &lt;span style="color:teal;"&gt;Lora-Regular.ttf&lt;/span&gt;...
Running fontforge...
Copyright (c) 2000-2020. See AUTHORS for Contributors.
 License GPLv3+: GNU GPL version 3 or later &amp;lt;http://gnu.org/licenses/gpl.html&amp;gt;
 with many parts BSD &amp;lt;http://fontforge.org/license.html&amp;gt;. Please read LICENSE.
 Version: 20201107
 Based on sources from 2020-11-16 19:11 UTC-D.
The following table(s) in the font have been ignored by FontForge
  Ignoring 'STAT' style attributes table
Done.
Family name (default = Lora): &lt;span style="color:red;"&gt;&lt;b&gt;&amp;lt;RETURN&amp;gt;&lt;/b&gt;&lt;/span&gt;
  =&amp;gt;&lt;span style="color:teal;"&gt;Lora-Regular&lt;/span&gt; (Lora-Regular.ttf) assigned to family '&lt;span style="color:olive;"&gt;Lora&lt;/span&gt;'.
Enter +STYLE (eg +R, +I, +B, +BI), or a unique groff name for &lt;span style="color:teal;"&gt;Lora-Regular&lt;/span&gt;.
Leave blank to set name to '&lt;span style="color:teal;"&gt;Lora-Regular&lt;/span&gt;': &lt;span style="color:red;"&gt;&lt;b&gt;+R&lt;/b&gt;&lt;/span&gt;
  =&amp;gt;&lt;span style="color:teal;"&gt;Lora-Regular&lt;/span&gt; assigned groff fontname '&lt;span style="color:olive;"&gt;LoraR&lt;/span&gt;'.
Creating &lt;span style="color:olive;"&gt;LoraR&lt;/span&gt;...
afmtodit: both uni00B5 and uni03BC map to mc at /Users/tkb/sw/versions/groff/git/bin/afmtodit line 6441.
Done.
Installing &lt;span style="color:olive;"&gt;LoraR&lt;/span&gt; in /usr/local/share/groff/site-font/devps/... Done.
Make &lt;span style="color:olive;"&gt;LoraR&lt;/span&gt; available to gropdf? (y/n; default = y) &lt;span style="color:red;"&gt;&lt;b&gt;&amp;lt;RETURN&amp;gt;&lt;/b&gt;&lt;/span&gt;
Checking for gropdf executable and devpdf directory... gropdf found.
Installing &lt;span style="color:olive;"&gt;LoraR&lt;/span&gt; in /usr/local/share/groff/site-font/devpdf/... Done.
Copy &lt;span style="color:teal;"&gt;Lora-Regular.ttf&lt;/span&gt; to /usr/local/share/fonts/truetype/Lora/
  (y/n; default = n) &lt;span style="color:red;"&gt;&lt;b&gt;&amp;lt;RETURN&amp;gt;&lt;/b&gt;&lt;/span&gt;
Install &lt;span style="color:teal;"&gt;Lora-Regular.ttf&lt;/span&gt; manually to make it available system-wide.
$ &lt;span style="color:red;"&gt;&lt;b&gt;install-font.sh Lora-Italic.ttf&lt;/b&gt;&lt;/span&gt;
Processing &lt;span style="color:teal;"&gt;Lora-Italic.ttf&lt;/span&gt;...
Running fontforge...
Copyright (c) 2000-2020. See AUTHORS for Contributors.
 License GPLv3+: GNU GPL version 3 or later &amp;lt;http://gnu.org/licenses/gpl.html&amp;gt;
 with many parts BSD &amp;lt;http://fontforge.org/license.html&amp;gt;. Please read LICENSE.
 Version: 20201107
 Based on sources from 2020-11-16 19:11 UTC-D.
The following table(s) in the font have been ignored by FontForge
  Ignoring 'STAT' style attributes table
Done.
Family name (default = Lora): &lt;span style="color:red;"&gt;&lt;b&gt;&amp;lt;RETURN&amp;gt;&lt;/b&gt;&lt;/span&gt;
  =&amp;gt;&lt;span style="color:teal;"&gt;Lora-Italic&lt;/span&gt; (Lora-Italic.ttf) assigned to family '&lt;span style="color:olive;"&gt;Lora&lt;/span&gt;'.
Enter +STYLE (eg +R, +I, +B, +BI), or a unique groff name for &lt;span style="color:teal;"&gt;Lora-Italic&lt;/span&gt;.
Leave blank to set name to '&lt;span style="color:teal;"&gt;Lora-Italic&lt;/span&gt;': &lt;span style="color:red;"&gt;&lt;b&gt;+I&lt;/b&gt;&lt;/span&gt;
  =&amp;gt;&lt;span style="color:teal;"&gt;Lora-Italic&lt;/span&gt; assigned groff fontname '&lt;span style="color:olive;"&gt;LoraI&lt;/span&gt;'.
Creating &lt;span style="color:olive;"&gt;LoraI&lt;/span&gt;...
afmtodit: both uni00B5 and uni03BC map to mc at /Users/tkb/sw/versions/groff/git/bin/afmtodit line 6441.
Done.
Installing &lt;span style="color:olive;"&gt;LoraI&lt;/span&gt; in /usr/local/share/groff/site-font/devps/... Done.
Make &lt;span style="color:olive;"&gt;LoraI&lt;/span&gt; available to gropdf? (y/n; default = y) &lt;span style="color:red;"&gt;&lt;b&gt;&amp;lt;RETURN&amp;gt;&lt;/b&gt;&lt;/span&gt;
Checking for gropdf executable and devpdf directory... gropdf found.
Installing &lt;span style="color:olive;"&gt;LoraI&lt;/span&gt; in /usr/local/share/groff/site-font/devpdf/... Done.
Copy &lt;span style="color:teal;"&gt;Lora-Italic.ttf&lt;/span&gt; to /usr/local/share/fonts/truetype/Lora/
  (y/n; default = n) &lt;span style="color:red;"&gt;&lt;b&gt;&amp;lt;RETURN&amp;gt;&lt;/b&gt;&lt;/span&gt;
Install &lt;span style="color:teal;"&gt;Lora-Italic.ttf&lt;/span&gt; manually to make it available system-wide.
$ &lt;span style="color:red;"&gt;&lt;b&gt;install-font.sh Lora-Bold.ttf&lt;/b&gt;&lt;/span&gt;
Processing &lt;span style="color:teal;"&gt;Lora-Bold.ttf&lt;/span&gt;...
Running fontforge...
Copyright (c) 2000-2020. See AUTHORS for Contributors.
 License GPLv3+: GNU GPL version 3 or later &amp;lt;http://gnu.org/licenses/gpl.html&amp;gt;
 with many parts BSD &amp;lt;http://fontforge.org/license.html&amp;gt;. Please read LICENSE.
 Version: 20201107
 Based on sources from 2020-11-16 19:11 UTC-D.
The following table(s) in the font have been ignored by FontForge
  Ignoring 'STAT' style attributes table
Glyph bounding box data exceeds font bounding box data for GID 4
  Subsequent errors will not be reported.
In GID 769 the advance width (1316) is greater than the stated maximum (1291)
  Subsequent errors will not be reported.
Done.
Family name (default = Lora): &lt;span style="color:red;"&gt;&lt;b&gt;&amp;lt;RETURN&amp;gt;&lt;/b&gt;&lt;/span&gt;
  =&amp;gt;&lt;span style="color:teal;"&gt;Lora-Bold&lt;/span&gt; (Lora-Bold.ttf) assigned to family '&lt;span style="color:olive;"&gt;Lora&lt;/span&gt;'.
Enter +STYLE (eg +R, +I, +B, +BI), or a unique groff name for &lt;span style="color:teal;"&gt;Lora-Bold&lt;/span&gt;.
Leave blank to set name to '&lt;span style="color:teal;"&gt;Lora-Bold&lt;/span&gt;': &lt;span style="color:red;"&gt;&lt;b&gt;+B&lt;/b&gt;&lt;/span&gt;
  =&amp;gt;&lt;span style="color:teal;"&gt;Lora-Bold&lt;/span&gt; assigned groff fontname '&lt;span style="color:olive;"&gt;LoraB&lt;/span&gt;'.
Creating &lt;span style="color:olive;"&gt;LoraB&lt;/span&gt;...
afmtodit: both uni00B5 and uni03BC map to mc at /Users/tkb/sw/versions/groff/git/bin/afmtodit line 6441.
Done.
Installing &lt;span style="color:olive;"&gt;LoraB&lt;/span&gt; in /usr/local/share/groff/site-font/devps/... Done.
Make &lt;span style="color:olive;"&gt;LoraB&lt;/span&gt; available to gropdf? (y/n; default = y) &lt;span style="color:red;"&gt;&lt;b&gt;&amp;lt;RETURN&amp;gt;&lt;/b&gt;&lt;/span&gt;
Checking for gropdf executable and devpdf directory... gropdf found.
Installing &lt;span style="color:olive;"&gt;LoraB&lt;/span&gt; in /usr/local/share/groff/site-font/devpdf/... Done.
Copy &lt;span style="color:teal;"&gt;Lora-Bold.ttf&lt;/span&gt; to /usr/local/share/fonts/truetype/Lora/
  (y/n; default = n) &lt;span style="color:red;"&gt;&lt;b&gt;&amp;lt;RETURN&amp;gt;&lt;/b&gt;&lt;/span&gt;
Install &lt;span style="color:teal;"&gt;Lora-Bold.ttf&lt;/span&gt; manually to make it available system-wide.
$ install-font.sh Lora-BoldItalic.ttf
Processing &lt;span style="color:teal;"&gt;Lora-BoldItalic.ttf&lt;/span&gt;...
Running fontforge...
Copyright (c) 2000-2020. See AUTHORS for Contributors.
 License GPLv3+: GNU GPL version 3 or later &amp;lt;http://gnu.org/licenses/gpl.html&amp;gt;
 with many parts BSD &amp;lt;http://fontforge.org/license.html&amp;gt;. Please read LICENSE.
 Version: 20201107
 Based on sources from 2020-11-16 19:11 UTC-D.
The following table(s) in the font have been ignored by FontForge
  Ignoring 'STAT' style attributes table
Glyph bounding box data exceeds font bounding box data for GID 4
  Subsequent errors will not be reported.
In GID 776 the advance width (1297) is greater than the stated maximum (1273)
  Subsequent errors will not be reported.
Done.
Family name (default = Lora): &lt;span style="color:red;"&gt;&lt;b&gt;&amp;lt;RETURN&amp;gt;&lt;/b&gt;&lt;/span&gt;
  =&amp;gt;&lt;span style="color:teal;"&gt;Lora-BoldItalic&lt;/span&gt; (Lora-BoldItalic.ttf) assigned to family '&lt;span style="color:olive;"&gt;Lora&lt;/span&gt;'.
Enter +STYLE (eg +R, +I, +B, +BI), or a unique groff name for &lt;span style="color:teal;"&gt;Lora-BoldItalic&lt;/span&gt;.
Leave blank to set name to '&lt;span style="color:teal;"&gt;Lora-BoldItalic&lt;/span&gt;': &lt;span style="color:red;"&gt;&lt;b&gt;+BI&lt;/b&gt;&lt;/span&gt;
  =&amp;gt;&lt;span style="color:teal;"&gt;Lora-BoldItalic&lt;/span&gt; assigned groff fontname '&lt;span style="color:olive;"&gt;LoraBI&lt;/span&gt;'.
Creating &lt;span style="color:olive;"&gt;LoraBI&lt;/span&gt;...
afmtodit: both uni00B5 and uni03BC map to mc at /Users/tkb/sw/versions/groff/git/bin/afmtodit line 6441.
Done.
Installing &lt;span style="color:olive;"&gt;LoraBI&lt;/span&gt; in /usr/local/share/groff/site-font/devps/... Done.
Make &lt;span style="color:olive;"&gt;LoraBI&lt;/span&gt; available to gropdf? (y/n; default = y) &lt;span style="color:red;"&gt;&lt;b&gt;&amp;lt;RETURN&amp;gt;&lt;/b&gt;&lt;/span&gt;
Checking for gropdf executable and devpdf directory... gropdf found.
Installing &lt;span style="color:olive;"&gt;LoraBI&lt;/span&gt; in /usr/local/share/groff/site-font/devpdf/... Done.
Copy &lt;span style="color:teal;"&gt;Lora-BoldItalic.ttf&lt;/span&gt; to /usr/local/share/fonts/truetype/Lora/
  (y/n; default = n) &lt;span style="color:red;"&gt;&lt;b&gt;&amp;lt;RETURN&amp;gt;&lt;/b&gt;&lt;/span&gt;
Install &lt;span style="color:teal;"&gt;Lora-BoldItalic.ttf&lt;/span&gt; manually to make it available system-wide.
&lt;/pre&gt;&lt;p&gt;&lt;em&gt;Last edited: 2021-07-20 12:40:30 EDT&lt;/em&gt;&lt;/p&gt;
&lt;!-- Local Variables:
time-stamp-format: "%Y-%02m-%02d %02H:%02M:%02S %Z"
time-stamp-start: "\\*Last edited:[ \t]+\\\\?"
time-stamp-end: "\\*\\\\?\n"
time-stamp-line-limit: -20
End: --&gt;</description><category>fonts</category><category>groff</category><category>install-font.sh</category><category>troff</category><guid>https://tkurtbond.github.io/posts/2021/07/17/install-fontsh-the-simple-approach/</guid><pubDate>Sat, 17 Jul 2021 19:36:43 GMT</pubDate></item><item><title>groff and install-font.sh and installing fonts for use in groff</title><link>https://tkurtbond.github.io/posts/2021/07/17/groff-and-install-fontsh-and-installing-fonts-for-use-in-groff/</link><dc:creator>T. Kurt Bond</dc:creator><description>&lt;aside class="admonition note"&gt;
&lt;p class="admonition-title"&gt;Note&lt;/p&gt;
&lt;p&gt;This was originally a &lt;a class="reference external" href="https://lists.gnu.org/archive/html/groff/2021-07/msg00089.html"&gt;post&lt;/a&gt; to the &lt;a class="reference external" href="https://www.gnu.org/software/groff/"&gt;groff&lt;/a&gt; &lt;a class="reference external" href="https://lists.gnu.org/mailman/listinfo/groff/"&gt;mailing list&lt;/a&gt;.  It has
been slightly modified.&lt;/p&gt;
&lt;/aside&gt;
&lt;p&gt;Currently &lt;span class="command"&gt;install-font.sh&lt;/span&gt; is not part of &lt;span class="app"&gt;groff&lt;/span&gt;.
We've had some discussion on the list &lt;a class="reference external" href="https://lists.gnu.org/archive/html/groff/2021-07/msg00061.html"&gt;recently&lt;/a&gt; and in the past about
integrating it into the &lt;span class="app"&gt;groff&lt;/span&gt; distribution, and in response to
recent &lt;a class="reference external" href="https://lists.gnu.org/archive/html/groff/2021-07/msg00054.html"&gt;discussion&lt;/a&gt; there is a new bug, &lt;a class="reference external" href="https://savannah.gnu.org/bugs/index.php?60930"&gt;#60930&lt;/a&gt;, requesting
integrating it, including documentation, etc.&lt;/p&gt;
&lt;p&gt;In the meantime, if you want to install fonts in OpenType or TrueType
formats for use with &lt;code class="docutils literal"&gt;devps&lt;/code&gt; and &lt;code class="docutils literal"&gt;devpdf&lt;/code&gt;,
&lt;span class="command"&gt;install-font.sh&lt;/span&gt; greatly simplifies the process.&lt;/p&gt;
&lt;p&gt;The &lt;span class="command"&gt;install-font.sh&lt;/span&gt; script was written by Peter Schaffter, the author
of the &lt;a class="reference external" href="https://www.schaffter.ca/mom/mom-01.html"&gt;mom macros&lt;/a&gt; for
&lt;span class="app"&gt;groff&lt;/span&gt;, and is distributed on mom's &lt;a class="reference external" href="https://www.schaffter.ca/mom/mom-05.html#install-font"&gt;download page&lt;/a&gt; and can be
downloaded &lt;a class="reference external" href="https://www.schaffter.ca/mom/bin/install-font.sh"&gt;directly&lt;/a&gt;.  It has a &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-H&lt;/span&gt;&lt;/code&gt;
option that prints the documentation for it.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="https://fontforge.org/"&gt;Fontforge&lt;/a&gt; is a free and open source font
editor.  It can run scripts to manipulate fonts and convert between
font formats.  (I only use &lt;span class="app"&gt;fontforge&lt;/span&gt; to install fonts with
&lt;span class="command"&gt;install-font.sh&lt;/span&gt;, so I use a version that is command line
only, but the normal build has a GUI for interactively building
fonts.)  The &lt;span class="command"&gt;install-font.sh&lt;/span&gt; script uses &lt;span class="app"&gt;Fontforge&lt;/span&gt; to convert
OpenType and TrueType fonts to PostScript Type42 (&lt;span class="file"&gt;.t42&lt;/span&gt;) and Type1
(&lt;span class="file"&gt;.pfa&lt;/span&gt;), from which a &lt;span class="app"&gt;groff&lt;/span&gt; font is generated by the
&lt;span class="app"&gt;groff&lt;/span&gt; utility &lt;span class="command"&gt;afmtodit&lt;/span&gt;.  Then the necessary files are moved to
&lt;span class="file"&gt;site-font/devps&lt;/span&gt; and registered in its download file for use by &lt;span class="command"&gt;grops&lt;/span&gt;.
Optionally the same can be done for &lt;span class="file"&gt;site-font/devpdf&lt;/span&gt; for the use of
&lt;span class="file"&gt;gropdf&lt;/span&gt;.  Then the fonts are available for use by &lt;code class="docutils literal"&gt;groff
&lt;span class="pre"&gt;-Tps&lt;/span&gt;&lt;/code&gt; and &lt;code class="docutils literal"&gt;groff &lt;span class="pre"&gt;-Tpdf&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;So, suppose you wanted to use &lt;a class="reference external" href="https://fonts.google.com/specimen/Cormorant+Garamond"&gt;Cormorant Garamond&lt;/a&gt;, a free
font.  You could download the Regular, Italic, Bold, and Bold Italic
variants of the font, since &lt;span class="app"&gt;groff&lt;/span&gt; tends to expect there to be
R, I, B, and BI variants of the fonts it uses, though that is not
mandatory.  This would give you the files
&lt;span class="file"&gt;CormorantGaramond-Regular.ttf&lt;/span&gt;,
&lt;span class="file"&gt;CormorantGaramond-Italic.ttf&lt;/span&gt;,
&lt;span class="file"&gt;CormorantGaramond-Bold.ttf&lt;/span&gt;, and
&lt;span class="file"&gt;CormorantGaramond-BoldItalic.ttf&lt;/span&gt;.  You would then use
&lt;span class="command"&gt;install-font.sh&lt;/span&gt; to convert them and install the resulting
files into proper places under &lt;span class="app"&gt;groff&lt;/span&gt;'s site-font directory.&lt;/p&gt;
&lt;p&gt;So, for instance, you'd cd to the directory that holds the &lt;span class="file"&gt;.ttf&lt;/span&gt; files
you downloaded.  Then, to install the Regular variant of Cormorant
Garamond you'd run the command&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code bash"&gt;&lt;a id="rest_code_89b8005a5c194758bd10012685873e22-1" name="rest_code_89b8005a5c194758bd10012685873e22-1" href="https://tkurtbond.github.io/posts/2021/07/17/groff-and-install-fontsh-and-installing-fonts-for-use-in-groff/#rest_code_89b8005a5c194758bd10012685873e22-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;$(&lt;/span&gt;IFDIR&lt;span class="k"&gt;)&lt;/span&gt;/install-font.sh -n -P &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="nv"&gt;$DEST&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; -d -F CormorantGaramond -f +R CormorantGaramond-Regular.ttf
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;where &lt;code class="docutils literal"&gt;IFDIR&lt;/code&gt; is an environment variable indicating the directory
where &lt;span class="command"&gt;install-font.sh&lt;/span&gt; is located and &lt;code class="docutils literal"&gt;DEST&lt;/code&gt; is an
environment variable indicating the directory that contains
&lt;span class="app"&gt;groff&lt;/span&gt;'s &lt;span class="file"&gt;site-font&lt;/span&gt; directory (not the actual
&lt;span class="file"&gt;site-font&lt;/span&gt; directory itself).  The &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-n&lt;/span&gt;&lt;/code&gt; option means don't
try to copy the TrueType file to where the system font files are
located.  The &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-P&lt;/span&gt;&lt;/code&gt; option takes as its argument the directory that
contains the &lt;span class="app"&gt;groff&lt;/span&gt;'s site-font directory.  Usually this is some
place like &lt;span class="file"&gt;/usr/share/groff&lt;/span&gt; or &lt;span class="file"&gt;/usr/local/share/groff&lt;/span&gt;,
but not all distributions create the &lt;span class="file"&gt;site-font&lt;/span&gt; directory.  If
you don't specify &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-P&lt;/span&gt;&lt;/code&gt; &lt;span class="command"&gt;install-font.sh&lt;/span&gt; will guess the
location.  (If the &lt;span class="file"&gt;site-font&lt;/span&gt; directory doesn't exist, or you
don't have write access to it I think you can use the environment
variable &lt;code class="docutils literal"&gt;GROFF_FONT_PATH&lt;/code&gt; to tell &lt;span class="app"&gt;groff&lt;/span&gt; where to find it,
but I've never used that and don't know the specifics.  I often build
&lt;span class="app"&gt;groff&lt;/span&gt; from git and install it someplace my normal user has
write access to, so I haven't had to worry about it.)  The &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-d&lt;/span&gt;&lt;/code&gt;
option says to make the font available to &lt;span class="command"&gt;gropdf&lt;/span&gt;.  The
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-F&lt;/span&gt;&lt;/code&gt; option takes an argument that specifies the font family name to
use.  This is the name that you would use with the &lt;code class="docutils literal"&gt;.fam&lt;/code&gt; request or
the &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-f&lt;/span&gt;&lt;/code&gt; option to &lt;span class="command"&gt;groff&lt;/span&gt; to let it know you want to use
this font family.  The &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-f&lt;/span&gt;&lt;/code&gt; option takes an argument that specifies
the font style to use, &lt;code class="docutils literal"&gt;+R&lt;/code&gt;, &lt;code class="docutils literal"&gt;+I&lt;/code&gt;, &lt;code class="docutils literal"&gt;+B&lt;/code&gt;, or &lt;code class="docutils literal"&gt;+BI&lt;/code&gt;.  (The
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-f&lt;/span&gt;&lt;/code&gt; option can instead take a name, but I don't use that form and
can't explain the distinctions.)  The style (&lt;code class="docutils literal"&gt;R&lt;/code&gt;, &lt;code class="docutils literal"&gt;I&lt;/code&gt;, &lt;code class="docutils literal"&gt;B&lt;/code&gt;, or
&lt;code class="docutils literal"&gt;BI&lt;/code&gt;) is appended to the font family name specified with &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-F&lt;/span&gt;&lt;/code&gt; to
produce the name of the &lt;span class="app"&gt;groff&lt;/span&gt; font, and consequently the name
of the &lt;span class="app"&gt;groff&lt;/span&gt; font file that is written to the &lt;code class="docutils literal"&gt;devps&lt;/code&gt; and
&lt;code class="docutils literal"&gt;devpdf&lt;/code&gt; directories under &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;site-font&lt;/span&gt;&lt;/code&gt;.  So, in this example, the
name of the &lt;span class="app"&gt;groff&lt;/span&gt; font and the &lt;span class="app"&gt;groff&lt;/span&gt; font file would be
&lt;span class="file"&gt;CormorantGaramondR&lt;/span&gt;.  The last argument to the script is the
name of the Truetype or OpenType file you are converting.&lt;/p&gt;
&lt;p&gt;To complete the example, here are the commands to install the Italic,
Bold, and Bold Italic variants of Cormorant Garamond:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code bash"&gt;&lt;a id="rest_code_edd0015f5f144805ae9017e0ae6c0926-1" name="rest_code_edd0015f5f144805ae9017e0ae6c0926-1" href="https://tkurtbond.github.io/posts/2021/07/17/groff-and-install-fontsh-and-installing-fonts-for-use-in-groff/#rest_code_edd0015f5f144805ae9017e0ae6c0926-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;$(&lt;/span&gt;IFDIR&lt;span class="k"&gt;)&lt;/span&gt;/install-font.sh -n -P &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="nv"&gt;$DEST&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; -d -F CormorantGaramond -f +I CormorantGaramond-Italic.ttf
&lt;a id="rest_code_edd0015f5f144805ae9017e0ae6c0926-2" name="rest_code_edd0015f5f144805ae9017e0ae6c0926-2" href="https://tkurtbond.github.io/posts/2021/07/17/groff-and-install-fontsh-and-installing-fonts-for-use-in-groff/#rest_code_edd0015f5f144805ae9017e0ae6c0926-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;$(&lt;/span&gt;IFDIR&lt;span class="k"&gt;)&lt;/span&gt;/install-font.sh -n -P &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="nv"&gt;$DEST&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; -d -F CormorantGaramond -f +B CormorantGaramond-Bold.ttf
&lt;a id="rest_code_edd0015f5f144805ae9017e0ae6c0926-3" name="rest_code_edd0015f5f144805ae9017e0ae6c0926-3" href="https://tkurtbond.github.io/posts/2021/07/17/groff-and-install-fontsh-and-installing-fonts-for-use-in-groff/#rest_code_edd0015f5f144805ae9017e0ae6c0926-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;$(&lt;/span&gt;IFDIR&lt;span class="k"&gt;)&lt;/span&gt;/install-font.sh -n -P &lt;span class="s2"&gt;"&lt;/span&gt;&lt;span class="nv"&gt;$DEST&lt;/span&gt;&lt;span class="s2"&gt;"&lt;/span&gt; -d -F CormorantGaramond -f +BI CormorantGaramond-BoldItalic.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As I said in an earlier email to the list, I tend to put all four
commands into a script so I can run them again if something goes wrong
or when I need to install them on a new machine or in a new
installation of &lt;span class="app"&gt;groff&lt;/span&gt;.  In the case of Cormorant Garamond I named the
file &lt;span class="file"&gt;install-cormorant-garamond.sh&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Later:&lt;/strong&gt; Peter Schaffter &lt;a class="reference external" href="https://lists.gnu.org/archive/html/groff/2021-07/msg00090.html"&gt;pointed out&lt;/a&gt; that the &lt;em&gt;simple&lt;/em&gt; use of
&lt;span class="command"&gt;install-font.sh&lt;/span&gt; is:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code bash"&gt;&lt;a id="rest_code_3286440d867a404aa1a0ae9a5641f89a-1" name="rest_code_3286440d867a404aa1a0ae9a5641f89a-1" href="https://tkurtbond.github.io/posts/2021/07/17/groff-and-install-fontsh-and-installing-fonts-for-use-in-groff/#rest_code_3286440d867a404aa1a0ae9a5641f89a-1"&gt;&lt;/a&gt;sudo install-font.sh fontfile
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;and then answer the questions the script asks.  He also pointed out
that it creates the &lt;span class="file"&gt;site-font&lt;/span&gt; directory and necessary
subdirectories if needed in, and here I quote: “the only two locations
it's ever likely to be”.  Looking at &lt;span class="command"&gt;install-font.sh&lt;/span&gt; reveal
those locations are &lt;span class="file"&gt;/usr/local/share/groff&lt;/span&gt; and
&lt;span class="file"&gt;/usr/share/groff&lt;/span&gt;, defaulting to
&lt;span class="file"&gt;/usr/local/share/groff&lt;/span&gt;; to get it to use
&lt;span class="file"&gt;/usr/share/groff&lt;/span&gt; you specify the &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-s&lt;/span&gt;&lt;/code&gt; option.&lt;/p&gt;
&lt;p&gt;For a walk-through of the simple use see the &lt;a class="reference external" href="https://tkurtbond.github.io/posts/2021/07/17/install-fontsh-the-simple-approach/"&gt;follow-up&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Last edited: 2021-07-15 17:46:40 EDT&lt;/em&gt;&lt;/p&gt;
&lt;!-- Local Variables:
time-stamp-format: "%Y-%02m-%02d %02H:%02M:%02S %Z"
time-stamp-start: "\\*Last edited:[ \t]+\\\\?"
time-stamp-end: "\\*\\\\?\n"
time-stamp-line-limit: -20
End: --&gt;</description><category>fonts</category><category>groff</category><category>install-font.sh</category><category>mom</category><category>troff</category><guid>https://tkurtbond.github.io/posts/2021/07/17/groff-and-install-fontsh-and-installing-fonts-for-use-in-groff/</guid><pubDate>Sat, 17 Jul 2021 04:16:49 GMT</pubDate></item><item><title>troff Memorandum Macros documentation</title><link>https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/</link><dc:creator>T. Kurt Bond</dc:creator><description>&lt;p&gt;&lt;strong&gt;TL;DR:&lt;/strong&gt; Look &lt;a class="reference external" href="https://tkurtbond.github.io/troff/mm-all.pdf"&gt;here&lt;/a&gt; for documentation for the &lt;span class="app"&gt;Documenter's Workbench&lt;/span&gt; &lt;span class="app"&gt;mm&lt;/span&gt; Memorandum
Macros for &lt;span class="app"&gt;groff&lt;/span&gt;, based on the original paper &lt;cite&gt;MM - Memorandum
Macros&lt;/cite&gt;.  If you read that far there is a &lt;a class="reference internal" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#bonus"&gt;bonus&lt;/a&gt; at the end.&lt;/p&gt;
&lt;p&gt;When I learned &lt;span class="app"&gt;troff&lt;/span&gt; it was actually on a VAX running VMS (used
by &lt;a class="reference external" href="http://www.mpl.com/"&gt;MPL Corporation&lt;/a&gt;) using a port of &lt;span class="app"&gt;troff&lt;/span&gt; called
&lt;span class="app"&gt;xroff&lt;/span&gt; &lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#who-produced-xroff" id="footnote-reference-1" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;1&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt;, probably around 1986.  (The VAX
also had TeX and LaTeX, and I used them too.  Both supported the DEC
LNO3 laserprinter that MPL had.)  While I don't know who produced
&lt;span class="app"&gt;xroff&lt;/span&gt; and can't find anything out about it on the Internet, it
was a complete port of &lt;span class="app"&gt;troff&lt;/span&gt; to VMS, including all the standard
utilities and macro packages, including documentation for &lt;span class="app"&gt;ms&lt;/span&gt;,
&lt;span class="app"&gt;me&lt;/span&gt;, and, significantly for this post &lt;span class="app"&gt;mm&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;span class="app"&gt;mm&lt;/span&gt; documentation was the paper &lt;cite&gt;MM - Memorandum Macros&lt;/cite&gt;, by
D. W. Smith, J. R. Mashey, E. C. Pariser, and N. W. Smith, AT&amp;amp;T Bell
Laboratories, June 1980.  I tried out all the macro packages, but
found &lt;span class="app"&gt;mm&lt;/span&gt; most to my liking.  I think a large part of that was the
&lt;span class="app"&gt;mm&lt;/span&gt; documentation — it described the many features of that macro
package pretty well, in a user guide sort of way, teaching you how to
use the features as it went along, rather than being a pure reference
manual.  And I found &lt;span class="app"&gt;mm&lt;/span&gt; most comparable in features to LaTeX of the
troff macro packages.  While configuring &lt;span class="app"&gt;mm&lt;/span&gt; documents is somewhat
quirky &lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#quirky" id="footnote-reference-2" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;2&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt;, I felt that the added features over those found in
&lt;span class="app"&gt;me&lt;/span&gt; and &lt;span class="app"&gt;ms&lt;/span&gt; made it worthwhile.  So I wrote a lot of
documents using &lt;span class="app"&gt;mm&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Years later when I first got access to &lt;span class="app"&gt;groff&lt;/span&gt; on Unix machines
(early 90s?) the documentation supplied with it for &lt;span class="app"&gt;mm&lt;/span&gt; was the
&lt;span class="man"&gt;groff_mm(7)&lt;/span&gt; man page.  It was very complete as a reference, but
very poor for teaching you how to use &lt;span class="app"&gt;mm&lt;/span&gt;.  I continued to use &lt;span class="app"&gt;mm&lt;/span&gt;
off and on, but I think the lack of the user guide documentation of
the &lt;span class="app"&gt;mm&lt;/span&gt; paper made &lt;span class="app"&gt;mm&lt;/span&gt; less popular among the users of &lt;span class="app"&gt;groff&lt;/span&gt;
than it could have been.  So when modern features for PDF appeared for
groff later on (the &lt;span class="app"&gt;pdfmark&lt;/span&gt; macros), they were adapted to
&lt;span class="app"&gt;ms&lt;/span&gt; but not &lt;span class="app"&gt;mm&lt;/span&gt;.  (&lt;span class="app"&gt;me&lt;/span&gt; was left out, as well.)  I was sad
to see &lt;span class="app"&gt;mm&lt;/span&gt;'s apparently low popularity, and the &lt;span class="app"&gt;mm&lt;/span&gt; paper apparently
is not available on the Internet in a form that copyright allows to be
copied around, unlike the papers on &lt;span class="app"&gt;ms&lt;/span&gt; and &lt;span class="app"&gt;me&lt;/span&gt;, which
come with &lt;span class="app"&gt;groff&lt;/span&gt;.  I suspect this is because &lt;span class="app"&gt;mm&lt;/span&gt; was used
heavily in AT&amp;amp;T's &lt;span class="app"&gt;Documenter's Workbench&lt;/span&gt;, a commercial product that was distributed
separately from UNIX System V, if I understand correctly.&lt;/p&gt;
&lt;p&gt;However, eventually the sources to the &lt;span class="app"&gt;Documenter's Workbench&lt;/span&gt; became available under
the Eclipse Public License, and they are &lt;a class="reference external" href="https://github.com/n-t-roff/DWB3.3"&gt;available&lt;/a&gt; in the &lt;a class="reference external" href="https://github.com/n-t-roff"&gt;n-t-roff&lt;/a&gt;
github repository (along with &lt;a class="reference external" href="http://n-t-roff.github.io/heirloom/doctools.html"&gt;Heirloom Docutils&lt;/a&gt;, a descendant of
the original &lt;span class="app"&gt;ditroff&lt;/span&gt; with native UTF-8 input and easy use of
fonts).  This includes the &lt;a class="reference external" href="https://github.com/n-t-roff/DWB3.3/tree/master/doc/mm"&gt;source&lt;/a&gt; to documentation that is derived
from the &lt;span class="app"&gt;mm&lt;/span&gt; paper!  Unfortunately, I haven't been able to find a PDF
of this on the Internet.&lt;/p&gt;
&lt;p&gt;I think that having this available might help those who might want to
try out &lt;span class="app"&gt;mm&lt;/span&gt;, or are returning to it after a long break, so I've
posted a version that I built a while ago &lt;a class="reference external" href="https://tkurtbond.github.io/troff/mm-all.pdf"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p id="bonus"&gt;As a bonus for reading down this far, here is how I add PDF
outline/table-of-contents entries for sections in &lt;span class="app"&gt;groff&lt;/span&gt; &lt;span class="app"&gt;mm&lt;/span&gt;,
using the &lt;code class="docutils literal"&gt;HZ&lt;/code&gt; user-defined heading exit macro (see
&lt;span class="man"&gt;groff_mm(7)&lt;/span&gt;):&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code nroff"&gt;&lt;a id="rest_code_74adfd24285d4e28ae724249cb6a2655-1" name="rest_code_74adfd24285d4e28ae724249cb6a2655-1" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#rest_code_74adfd24285d4e28ae724249cb6a2655-1"&gt;&lt;/a&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="c"&gt;\" pdf outline fold level&lt;/span&gt;
&lt;a id="rest_code_74adfd24285d4e28ae724249cb6a2655-2" name="rest_code_74adfd24285d4e28ae724249cb6a2655-2" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#rest_code_74adfd24285d4e28ae724249cb6a2655-2"&gt;&lt;/a&gt;.&lt;span class="k"&gt;nr&lt;/span&gt; &lt;span class="s"&gt;PDFOUTLINE.FOLDLEVEL&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt;
&lt;a id="rest_code_74adfd24285d4e28ae724249cb6a2655-3" name="rest_code_74adfd24285d4e28ae724249cb6a2655-3" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#rest_code_74adfd24285d4e28ae724249cb6a2655-3"&gt;&lt;/a&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="c"&gt;\" start out in outline view&lt;/span&gt;
&lt;a id="rest_code_74adfd24285d4e28ae724249cb6a2655-4" name="rest_code_74adfd24285d4e28ae724249cb6a2655-4" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#rest_code_74adfd24285d4e28ae724249cb6a2655-4"&gt;&lt;/a&gt;.&lt;span class="k"&gt;pdfview&lt;/span&gt; &lt;span class="s"&gt;/PageMode&lt;/span&gt; &lt;span class="s"&gt;/UseOutlines&lt;/span&gt;
&lt;a id="rest_code_74adfd24285d4e28ae724249cb6a2655-5" name="rest_code_74adfd24285d4e28ae724249cb6a2655-5" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#rest_code_74adfd24285d4e28ae724249cb6a2655-5"&gt;&lt;/a&gt;.&lt;span class="k"&gt;de&lt;/span&gt; &lt;span class="s"&gt;HZ&lt;/span&gt;
&lt;a id="rest_code_74adfd24285d4e28ae724249cb6a2655-6" name="rest_code_74adfd24285d4e28ae724249cb6a2655-6" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#rest_code_74adfd24285d4e28ae724249cb6a2655-6"&gt;&lt;/a&gt;.&lt;span class="k"&gt;pdfhref&lt;/span&gt; &lt;span class="s"&gt;O&lt;/span&gt; &lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;$2&lt;/span&gt; &lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;*[}0]&lt;/span&gt; &lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;$3&lt;/span&gt;
&lt;a id="rest_code_74adfd24285d4e28ae724249cb6a2655-7" name="rest_code_74adfd24285d4e28ae724249cb6a2655-7" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#rest_code_74adfd24285d4e28ae724249cb6a2655-7"&gt;&lt;/a&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="s"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And here's how to do it in &lt;a class="reference external" href="http://n-t-roff.github.io/heirloom/doctools.html"&gt;Heirloom Docutils&lt;/a&gt; &lt;span class="app"&gt;troff&lt;/span&gt;:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code nroff"&gt;&lt;a id="rest_code_45b903ee779947279ff5bec339547d44-1" name="rest_code_45b903ee779947279ff5bec339547d44-1" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#rest_code_45b903ee779947279ff5bec339547d44-1"&gt;&lt;/a&gt;.&lt;span class="k"&gt;de&lt;/span&gt; &lt;span class="s"&gt;HY&lt;/span&gt;
&lt;a id="rest_code_45b903ee779947279ff5bec339547d44-2" name="rest_code_45b903ee779947279ff5bec339547d44-2" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#rest_code_45b903ee779947279ff5bec339547d44-2"&gt;&lt;/a&gt;.&lt;span class="k"&gt;nr&lt;/span&gt; &lt;span class="s"&gt;HYtmp&lt;/span&gt; &lt;span class="s"&gt;(\\$1-1)&lt;/span&gt;
&lt;a id="rest_code_45b903ee779947279ff5bec339547d44-3" name="rest_code_45b903ee779947279ff5bec339547d44-3" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#rest_code_45b903ee779947279ff5bec339547d44-3"&gt;&lt;/a&gt;&lt;span class="se"&gt;\\&lt;/span&gt;X'PDFMark: Bookmark &lt;span class="se"&gt;\\&lt;/span&gt;n[HYtmp] &lt;span class="se"&gt;\\&lt;/span&gt;$3'
&lt;a id="rest_code_45b903ee779947279ff5bec339547d44-4" name="rest_code_45b903ee779947279ff5bec339547d44-4" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#rest_code_45b903ee779947279ff5bec339547d44-4"&gt;&lt;/a&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="s"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This version uses the &lt;code class="docutils literal"&gt;HY&lt;/code&gt; user-defined heading exit macro and
doesn't include the section numbers.&lt;/p&gt;
&lt;p&gt;I'm not sure why the two use different macros.  All I can say is that
I wrote them at different times for slightly different purposes.&lt;/p&gt;
&lt;aside class="footnote brackets" id="who-produced-xroff" role="note"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#footnote-reference-1"&gt;1&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;While I still maintain a descendant of the VAX I where I used
&lt;span class="app"&gt;xroff&lt;/span&gt; (emulated using &lt;a class="reference external" href="https://www.stromasys.com/solutions/charon-vax/"&gt;Charon-VAX&lt;/a&gt;), sometime in the past the
&lt;span class="app"&gt;xroff&lt;/span&gt; software disappeared from it.  I have no idea what
happened to it.  I blame user PDL!&lt;/p&gt;
&lt;/aside&gt;
&lt;aside class="footnote brackets" id="quirky" role="note"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/#footnote-reference-2"&gt;2&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;The page offset, page width, and page length have to be set before
the &lt;span class="app"&gt;mm&lt;/span&gt; macros were loaded, so while on Unix it is easy to set those
values on the command line, on VMS due to oddities in its command line
it was easiest to use &lt;code class="docutils literal"&gt;.so&lt;/code&gt; and load the macros directly&lt;/p&gt;
&lt;/aside&gt;
&lt;p&gt;&lt;em&gt;Last edited: 2021-07-17 19:09:27 EDT&lt;/em&gt;&lt;/p&gt;
&lt;!-- Local Variables:
time-stamp-format: "%Y-%02m-%02d %02H:%02M:%02S %Z"
time-stamp-start: "\\*Last edited:[ \t]+\\\\?"
time-stamp-end: "\\*\\\\?\n"
time-stamp-line-limit: -20
End: --&gt;</description><category>charon-vax</category><category>documenter's workbench</category><category>dwb</category><category>groff</category><category>memorandum macros</category><category>mm</category><category>troff</category><category>vms</category><category>xroff</category><guid>https://tkurtbond.github.io/posts/2021/07/15/troff-memorandum-macros-documentation/</guid><pubDate>Thu, 15 Jul 2021 19:57:09 GMT</pubDate></item><item><title>EPUB files, Markup Languages, and briefly Unix</title><link>https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/</link><dc:creator>T. Kurt Bond</dc:creator><description>&lt;p&gt;What follows is a lightly edited version (for clarity and relevance)
of the postscripts from an email that I recently wrote, transferred
here for posterity and the general good.&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;&lt;strong&gt;Danger! Danger Will Robinson! Danger!&lt;/strong&gt; The postscripts and
footnotes are much longer than the main body of the reply!  And the
footnotes are longer than the text of the postscripts!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;P.S&lt;/strong&gt;. H., P. (and H. M., if you are interested, though I
admit this combines some of my more geeky interests and thus may be of
less interest to all of you, or for Howard and Paul, for that matter):&lt;/p&gt;
&lt;p&gt;I actually figured out how to make ebooks (to a limited degree)
because I wanted to try an ebook I made of an RPG adventure I wrote
for a currently on hiatus&lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-1" id="footnote-reference-1" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;0&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt; fantasy &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Savage_Worlds"&gt;Savage Worlds&lt;/a&gt; roleplaying game
campaign for my daughter &lt;a class="reference external" href="https://www.facebook.com/lily.bond.31"&gt;Lily&lt;/a&gt; and my &lt;a class="reference external" href="https://www.facebook.com/eva.atha.7"&gt;niece&lt;/a&gt; and nephews (&lt;a class="reference external" href="https://www.facebook.com/mason.atha.7"&gt;N1&lt;/a&gt;). I originally wrote the
adventure&lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-2" id="footnote-reference-2" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;1&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt; in three typesetting systems which use &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Markup_language"&gt;markup
languages&lt;/a&gt;, &lt;a class="reference external" href="https://en.wikipedia.org/wiki/LaTeX"&gt;LaTeX&lt;/a&gt;, &lt;a class="reference external" href="https://en.wikipedia.org/wiki/ConTeXt"&gt;ConTeXt&lt;/a&gt;, and &lt;a class="reference external" href="https://troff.org/"&gt;troff&lt;/a&gt;&lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-3" id="footnote-reference-3" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;2&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt; (which I usually use in its guise as
&lt;a class="reference external" href="https://en.wikipedia.org/wiki/GNU"&gt;GNU&lt;/a&gt; &lt;a class="reference external" href="https://www.gnu.org/software/groff/"&gt;groff&lt;/a&gt;, but this time I
used &lt;span class="app"&gt;Heirloom troff&lt;/span&gt;, part of the &lt;a class="reference external" href="http://n-t-roff.github.io/heirloom/doctools.html"&gt;Heirloom Documentation
Tools&lt;/a&gt;, for its easy access to modern fonts) to compare the markup
languages and their PDF output to decide which one I prefered to
use. Later I converted it to &lt;a class="reference external" href="https://docutils.sourceforge.io/rst.html"&gt;ReStructuredText&lt;/a&gt;, a lightweight markup
language&lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-4" id="footnote-reference-4" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;3&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt; that I use, to compare it to the other markup
languages.&lt;/p&gt;
&lt;p&gt;I have used ReStructuredText on and off for many years, but the main
drawbacks to it was that (1) the output produced by its original
&lt;a class="reference external" href="https://docutils.sourceforge.io/"&gt;docutils&lt;/a&gt; implementation was
excessively stark and difficult to customize to have a nicer
appearance, and (2) its workflow was somewhat difficult,&lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-5" id="footnote-reference-5" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;4&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt; Some
time ago I discovered &lt;a class="reference external" href="https://pandoc.org/"&gt;Pandoc&lt;/a&gt;, a “universal
document converter” which can read many input sources, including
ReStructuredText, and produce output in many output formats, including
PDF (via &lt;span class="app"&gt;LaTeX&lt;/span&gt;, &lt;span class="app"&gt;ConTeXt&lt;/span&gt;, or &lt;span class="app"&gt;troff&lt;/span&gt;; in ways easier
to customize the appearance of) and HTML, and, as it turns and
importantly to this story, EPUB, the most common format for ebooks! I
started using &lt;span class="app"&gt;Pandoc&lt;/span&gt; because it made it easier to generate PDF from
ReStructuredText with one command (since &lt;span class="app"&gt;Pandoc&lt;/span&gt; runs all the
intermediate steps and cleans up any temporary files needed). It
turned out that the abilities to read multiple input formats and to
more easily customize the output was important to me as well.&lt;/p&gt;
&lt;p&gt;So, having converted the adventure over to ReStructuredTexT for
comparison&lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-6" id="footnote-reference-6" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;5&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt; and at first using PDF through &lt;span class="app"&gt;Pandoc&lt;/span&gt;'s
&lt;code class="docutils literal"&gt;troff &lt;span class="pre"&gt;-ms&lt;/span&gt;&lt;/code&gt; output, I soon decided to take a look at &lt;span class="app"&gt;Pandoc&lt;/span&gt;'s other
output formats. I started with &lt;span class="app"&gt;LaTeX&lt;/span&gt; and &lt;span class="app"&gt;ConTeXt&lt;/span&gt;, and decided that the
PDF output via &lt;span class="app"&gt;LaTeX&lt;/span&gt; was not of much interest to me, but the PDF
output via &lt;span class="app"&gt;ConTeXt&lt;/span&gt; offered greater control over the appearance of the
final PDF output and the opportunity of adding via writing Lua filters
some features to the resulting documents that lightweight markup
languages normally don't offer, such as indexes and cross references
that are both hyperlinks and include page numbers and section names in
the PDF output, which are features that I didn't need in the adventure
document, but which I expect to need in future documents.&lt;/p&gt;
&lt;p&gt;But back to the important point, &lt;span class="app"&gt;Pandoc&lt;/span&gt; can produce EBUB output for
ebooks!  Since I already had the adventure in ReStructuredText, and
&lt;span class="app"&gt;Pandoc&lt;/span&gt; produces EPUB, and I have an ebook reader, a Kindle, it just
makes sense to figure out how to get it onto my Kindle! First I used
&lt;span class="app"&gt;Pandoc&lt;/span&gt; to generate the EPUB. That required figuring out how to
generate a reasonably attractive cover. Then wrote a small config file
for &lt;span class="app"&gt;Pandoc&lt;/span&gt;.  Then I generated the EPUB output. Then I figured out how
to convert that over to MOBI, one of the formats that the Kindle can
use.&lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-7" id="footnote-reference-7" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;6&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt; Then I mailed it to my Kindle's email, and it looked
reasonably good!&lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-8" id="footnote-reference-8" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;7&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I hope you've enjoyed this twisty maze of passages, all different!&lt;/p&gt;
&lt;p&gt;And with a &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Zork"&gt;Zork&lt;/a&gt; reference I
really must end this email!&lt;/p&gt;
&lt;aside class="footnote brackets" id="footnote-1" role="note"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-reference-1"&gt;0&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;Pandemics are no fun!&lt;/p&gt;
&lt;p&gt;I originally thought I'd get through this email without footnotes, but
&lt;a class="reference external" href="https://www.worldwidewords.org/qa/qa-nee1.htm"&gt;needs must when the devil
drives&lt;/a&gt;. I rather
enjoy footnotes in email messages, but it's not as convenient in gmail
as it used to be in Emacs. And since it offered the opportunity for a
Shakespeare reference of sorts, I'm quite pleased, in general.&lt;/p&gt;
&lt;/aside&gt;
&lt;aside class="footnote brackets" id="footnote-2" role="note"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-reference-2"&gt;1&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;As it turns out, I actually wrote &lt;strong&gt;seven&lt;/strong&gt; Savage Worlds
adventures in &lt;span class="app"&gt;troff&lt;/span&gt;, and then converted them all to
&lt;span class="app"&gt;LaTeX&lt;/span&gt; and &lt;span class="app"&gt;ConTeXt&lt;/span&gt; for comparison later. I actually
wrote the first &lt;strong&gt;three&lt;/strong&gt; adventures using &lt;a class="reference external" href="https://www.libreoffice.org/"&gt;LibreOffice&lt;/a&gt;, a conventional office suite with
a word processor, something I normally dislike but was giving
another chance. I decided after three adventures that I wasn't
going to do another in &lt;span class="app"&gt;LibreOffice&lt;/span&gt;, and started looking for
alternatives, hence comparing markup languages. I tend to like
markup languages better than &lt;a class="reference external" href="https://en.wikipedia.org/wiki/WYSIWYG"&gt;WYSIWYG&lt;/a&gt; editors; this may just be the
programmer in me liking the idea of languages over WYSIWYG, but
there did turn out to be significant advantages to switching to a
markup language in the end. The primary one was that I could put
character and creature descriptions in external files and reference
them in the main file, rather than cut and paste them from one
document to another, which meant I could just change the external
file and it would automatically be included in the updated document
next time I generated output from it. With a WYSIWYG tool I'd have
had to go back and cut and paste the changed material in every
document every time I changed it, which would be immensely tedious
and horribly error prone and all too common.&lt;/p&gt;
&lt;/aside&gt;
&lt;aside class="footnote brackets" id="footnote-3" role="note"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-reference-3"&gt;2&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;This footnote is about &lt;span class="app"&gt;LaTeX&lt;/span&gt;, &lt;span class="app"&gt;ConTeXt&lt;/span&gt;, and
&lt;span class="app"&gt;troff&lt;/span&gt;, and peripherally about &lt;a class="reference external" href="https://en.wikipedia.org/wiki/TeX"&gt;TeX&lt;/a&gt;, the progenitor of
&lt;span class="app"&gt;LaTeX&lt;/span&gt; and &lt;span class="app"&gt;ConTeXt&lt;/span&gt;. &lt;span class="app"&gt;Troff&lt;/span&gt; was one of the
earliest computer typesetting systems, invented in 1973 as a scheme
at the computer science portion of Bell Labs to get a PDP-11 so
they could have an &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Time-sharing"&gt;time-sharing&lt;/a&gt; operating system,
like the earlier &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Multics"&gt;Multics&lt;/a&gt; that ran on much more
expensive hardware and that the researchers had worked on
previously and looked back fondly after Bell Labs pulled out of
that research. Bell Labs wouldn't just pay for a computer for the
researchers to play with, so they proposed developing a computer
typesetting system for the secretaries to use, largely for patent
submission, something Bell Labs did a lot of. Their scheme
succeeded and as a result they invented Unix and &lt;span class="app"&gt;troff&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;So, Unix was invented &lt;strong&gt;explicitly&lt;/strong&gt; to run &lt;span class="app"&gt;troff&lt;/span&gt;!&lt;/p&gt;
&lt;p&gt;&lt;span class="app"&gt;TeX&lt;/span&gt;, by contrast, was not invented until 1978, &lt;span class="app"&gt;LaTeX&lt;/span&gt; in
1985, and &lt;cite&gt;ConTeXt&lt;/cite&gt; not until 1990! (I wish I'd found out about the
latter earlier!)  &lt;span class="app"&gt;TeX&lt;/span&gt; was invented because of &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Donald_Knuth"&gt;Donald
Knuth&lt;/a&gt;'s desire to produce gloriously typeset books with
mathematics for his multi-volume work &lt;a class="reference external" href="https://en.wikipedia.org/wiki/The_Art_of_Computer_Programming"&gt;The Art of Computer
Programming&lt;/a&gt;.
He finished &lt;span class="app"&gt;TeX&lt;/span&gt; long ago, but is still working on those
books.&lt;/p&gt;
&lt;p&gt;All of these typesetting systems have what are called markup
languages, where the text of the document is interspersed with
commands distinguished in some way from the regular text. For
instance, the command &lt;code class="docutils literal"&gt;\begin{document}&lt;/code&gt; from &lt;span class="app"&gt;LaTeX&lt;/span&gt; is
typical of &lt;span class="app"&gt;TeX&lt;/span&gt;, &lt;span class="app"&gt;LaTeX&lt;/span&gt;, and &lt;span class="app"&gt;ConTeXt&lt;/span&gt;, all of
which are related. &lt;span class="app"&gt;Troff&lt;/span&gt; uses backslash commands in the
middle of text and and commands on separate lines starting with
periods but historically those commands have been limited to names
of two characters, though this was relaxed in the later
&lt;span class="app"&gt;troff&lt;/span&gt; implementation &lt;span class="app"&gt;groff&lt;/span&gt;, and in the &lt;span class="app"&gt;Heirloom
troff&lt;/span&gt; implementation
which extended the second &lt;span class="app"&gt;troff&lt;/span&gt; implementation,
&lt;span class="app"&gt;ditroff&lt;/span&gt;, with similar features as gnu groff, but easier
access to modern fonts.&lt;/p&gt;
&lt;p&gt;I am particularly impressed by &lt;span class="app"&gt;troff&lt;/span&gt;'s ability to
correctly typeset documents that I wrote 30 years ago and that
others have written even earlier. It has never failed me in this
task.† This has often been a problem for me with documents from
WYSIWYG systems on the contrary, even when those documents were
more recently created, including one significant one
from 2004. (&lt;a class="reference external" href="https://en.wikipedia.org/wiki/StarOffice"&gt;Star Office&lt;/a&gt;, I'm looking at
you!‡). &lt;span class="app"&gt;LaTeX&lt;/span&gt; is reasonably backward compatible, though it
did go through some big changes earlier it is now mostly stable. I
did experience some compatibility problems, minor with my documents
and major with complicated documents written by others.
&lt;span class="app"&gt;ConTeXt&lt;/span&gt; is generally stable, but it is developing rapidly so
has more changes, though the developers are good about backward
compatibility. The increasing sophistication of &lt;span class="app"&gt;ConTeXt&lt;/span&gt;,
which along its development has subsumed both &lt;span class="app"&gt;TeX&lt;/span&gt; and
&lt;a class="reference external" href="https://en.wikipedia.org/wiki/MetaPost"&gt;MetaPost&lt;/a&gt; and combined and extended them with the Lua scripting
language (mentioned again below), producing something that is even
more flexible and impressive than &lt;span class="app"&gt;TeX&lt;/span&gt; and &lt;span class="app"&gt;LaTeX&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Another thing I like about markup languages is the fact that they
are &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Plain_text"&gt;plain text&lt;/a&gt;‖, and can be manipulated with any program you
want. Before the emergence of &lt;a class="reference external" href="https://en.wikipedia.org/wiki/XML"&gt;XML&lt;/a&gt;-based WYSIWYG document formats
in &lt;span class="app"&gt;Microsoft Word&lt;/span&gt;§ and &lt;span class="app"&gt;Star Office&lt;/span&gt; this was
practically impossible. Even now the complexity of the ZIP file and
XML markup renders this much much more unpleasant to deal
with. Kicking dead whales down the beach indeed! Being able to use
any tool at all on a document is considerably more useful than
being limited to the poor extensions languages of &lt;span class="app"&gt;Microsoft
Word&lt;/span&gt; and &lt;span class="app"&gt;LibreOffice&lt;/span&gt;, and usually much simpler.&lt;/p&gt;
&lt;p&gt;† I &lt;strong&gt;have&lt;/strong&gt; had to change a few external programs I've written to
help in the build process. &lt;a class="reference external" href="https://www.perl.org/"&gt;Perl&lt;/a&gt; was a problem here. (I tried to resist
the footnote within the footnote, but again, need must when the devil
drives.)&lt;/p&gt;
&lt;p&gt;‡ Sure, the current &lt;span class="app"&gt;LibreOffice&lt;/span&gt; will open the file, but the
formatting is significantly messed up.  Earlier versions, if I
remember correctly, did not open the file correctly.&lt;/p&gt;
&lt;p&gt;§ I have never written a document in &lt;span class="app"&gt;Microsoft Word&lt;/span&gt; for my
personal use, though unfortunately I have used it often at work.&lt;/p&gt;
&lt;p&gt;‖ I have delightedly taken to using Unicode characters in my plain text
documents, as the ReStructuredText source of this document shows.&lt;/p&gt;
&lt;/aside&gt;
&lt;aside class="footnote brackets" id="footnote-4" role="note"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-reference-4"&gt;3&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;Lightweight markup languages, in contrast with &lt;span class="app"&gt;TeX&lt;/span&gt;,
&lt;span class="app"&gt;LaTeX&lt;/span&gt;, &lt;span class="app"&gt;ConTeXt&lt;/span&gt;, and &lt;span class="app"&gt;troff&lt;/span&gt;, are usually things
that start with the conventions like indicating *italics* by
surrounding phrases in plain text email messages and &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Usenet"&gt;USENET&lt;/a&gt; posts
around them in the olden days. Most of them avoid the use of lots
of keywords and backslashes, of the sort &lt;span class="app"&gt;TeX&lt;/span&gt;, &lt;span class="app"&gt;LaTeX&lt;/span&gt;,
&lt;span class="app"&gt;ConTeXt&lt;/span&gt;, and to a partial extent &lt;span class="app"&gt;troff&lt;/span&gt; use. Instead,
they largely try to use the non-alphanumeric characters on a
standard keyboard to indicate how the text should be typeset, and
without using long command names. The lack of these long command
names (or short ones in &lt;span class="app"&gt;troff&lt;/span&gt;'s case) and the relatively
unobtrusive nature of the non-alphanumeric characters makes
documents easier to read. This is why they are called “lightweight”
markup languages. &lt;a class="reference external" href="http://Lightweight_markup_language"&gt;Wikipedia&lt;/a&gt; has a good article that
explains and compares them. Another advantage of most lightweight
markup languages is that since they don't generally use command
names, native speakers of languages other than English don't have
to learn English command names, a significant matter.&lt;/p&gt;
&lt;p&gt;I happen to prefer ReStructuredText, but Markdown is another very
popular lightweight markup language that I sometimes use.&lt;/p&gt;
&lt;p&gt;Another advantage to lightweight markup languages such as
ReStructuredText and Markdown is that they often have programs allowing
multiple kinds of output from them (PDF and HTML are typical) and since
lightweight markup languages make no pretensions to being programming
languages, which the markup languages of the original typesetting
systems do (since that was how they allowed customization and
extension), writing the programs to output multiple output types for
lightweight markup languages is simpler than than writing programs to
parse the heavy markup languages, which is the common approach that
people take to get HTML from &lt;span class="app"&gt;LaTeX&lt;/span&gt;, for instance. The fact that heavy
markup languages are usually &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Turing_completeness"&gt;Turing
complete&lt;/a&gt; and so
can be extensively (and definitely are in practice) extended and often
have programmable syntax makes processing them with other tools
difficult and usually require much hand conversion. It is my impression
that while &lt;span class="app"&gt;LaTeX&lt;/span&gt; to HTML translators like
&lt;a class="reference external" href="https://tug.org/tex4ht/"&gt;TeXht&lt;/a&gt; and
&lt;a class="reference external" href="http://hevea.inria.fr/"&gt;HEVEA&lt;/a&gt; are very good for documents that only
use the standard features of &lt;span class="app"&gt;LaTeX&lt;/span&gt; they can't deal easily with heavily
programmed documents, since that would require more semantic
understanding of the original &lt;span class="app"&gt;LaTeX&lt;/span&gt; source.&lt;/p&gt;
&lt;p&gt;One interesting attempt in this direction for &lt;span class="app"&gt;troff&lt;/span&gt; was the &lt;a class="reference external" href="http://www-rn.informatik.uni-bremen.de/software/unroff/"&gt;unroff&lt;/a&gt;
program, written in &lt;a class="reference external" href="http://sam.zoy.org/elk/"&gt;Elk Scheme&lt;/a&gt;. It
took the approach of implementing a complete &lt;span class="app"&gt;troff&lt;/span&gt; parser and
proving Scheme as an extension language so you could completely
customize the output.  It provided a complete implementation for
the &lt;code class="docutils literal"&gt;troff &lt;span class="pre"&gt;-ms&lt;/span&gt;&lt;/code&gt; macros, and I was easily able to extend those to
handle cross references and indexes that I had extended that &lt;span class="app"&gt;troff&lt;/span&gt;
document's build process to provide, in 170 lines of Scheme.&lt;/p&gt;
&lt;/aside&gt;
&lt;aside class="footnote brackets" id="footnote-5" role="note"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-reference-5"&gt;4&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;In particular, there was no standard name for the commands used
to generate various kinds of output; on some operating systems it
was rst2latex, and on others it was rst2latex.py. Also, the
&lt;span class="app"&gt;docutils&lt;/span&gt; toolchain for producing PDF output generated
intermediate &lt;span class="app"&gt;LaTeX&lt;/span&gt; files which necessitated processing with
further tools, which usually necessitated writing a &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Makefile"&gt;Makefile&lt;/a&gt; so I didn't have to
retype multiple commands whenever I regenerated the output
document. For a simple document that was considerable hassle and
overhead, even when worth it for a more complicated
document. (Makefiles are well worth it for complicated documents
with complicated build processes, of course.  I have lots of those.)&lt;/p&gt;
&lt;/aside&gt;
&lt;aside class="footnote brackets" id="footnote-6" role="note"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-reference-6"&gt;5&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;As a result of the comparison, I decided that I greatly
prefered ReStructuredText and &lt;span class="app"&gt;pandoc&lt;/span&gt; for the tool to process
it. &lt;span class="app"&gt;Pandoc&lt;/span&gt;'s ability to customize its output using
&lt;a class="reference external" href="https://pandoc.org/lua-filters.html"&gt;filters&lt;/a&gt; written in the
programming language &lt;a class="reference external" href="https://www.lua.org/"&gt;Lua&lt;/a&gt; was
particularly appealing, as was the ability to customize its default
templates for generating output using the &lt;code class="docutils literal"&gt;troff &lt;span class="pre"&gt;-ms&lt;/span&gt;&lt;/code&gt; macros and
&lt;span class="app"&gt;ConTeXt&lt;/span&gt;. I see a use for both of those, since the -ms output
is easier to customize for things that the base -ms provides, but
the &lt;span class="app"&gt;ConTeXt&lt;/span&gt; output offers greater control over the final
appearance, though often at the cost of greater effort. For
instance, I have a moderately long document† that is currently in
&lt;a class="reference external" href="https://docbook.org/"&gt;DocBook&lt;/a&gt; 5.0 XML format, and I now find
it tedious to edit and the open source tool for generating PDF from
it has serious flaws. (I'm resisting another footnote in a
footnote. Be impressed that I succeeded!) I can see how I can
convert it to ReStructuredText (or Markdown, for that matter) and
use &lt;span class="app"&gt;Pandoc&lt;/span&gt;'s &lt;span class="app"&gt;ConTeXt&lt;/span&gt; output to produce a nicer, more
attractive PDF. Now I just need the time to write the lua filter
and do the conversion. (&lt;span class="app"&gt;Pandoc&lt;/span&gt; will convert it from DocBook, but
will lose the indexing information, which I would have to do all
over again, a task with more work than I want to contemplate at the
moment.)&lt;/p&gt;
&lt;p&gt;I still find uses for &lt;span class="app"&gt;troff&lt;/span&gt; and &lt;span class="app"&gt;ConTeXt&lt;/span&gt;. In
particular, if I have to use complicated tables in a document I
find that the either &lt;span class="app"&gt;troff&lt;/span&gt; or &lt;span class="app"&gt;ConTeXt&lt;/span&gt; works
better. (Simple tables for either are OK from ReStructuredText
output, but complicated ones…!)&lt;/p&gt;
&lt;p&gt;† The DocBook version of the document was derived from the &lt;code class="docutils literal"&gt;troff &lt;span class="pre"&gt;-ms&lt;/span&gt;&lt;/code&gt;
source mentioned previously, though by the time the
conversion happened I vaguely recall I no longer had access to a working
&lt;span class="app"&gt;unroff&lt;/span&gt;, I think because of &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Software_rot"&gt;bitrot&lt;/a&gt;. &lt;a class="reference external" href="http://netbsd.org/"&gt;NetBSD&lt;/a&gt; has an &lt;span class="app"&gt;unroff&lt;/span&gt;
&lt;a class="reference external" href="https://pkgsrc.se/textproc/unroff"&gt;package&lt;/a&gt; in its pkgsrc
collection of program, and I could install it now on my NetBSD
machine, but when I tried to process the document &lt;span class="app"&gt;unroff&lt;/span&gt; exited
complaining about a syntax error in one of its Scheme files. So bitrot
seems to prevail.&lt;/p&gt;
&lt;/aside&gt;
&lt;aside class="footnote brackets" id="footnote-7" role="note"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-reference-7"&gt;6&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;Using an open source command line utility provided with
&lt;a class="reference external" href="https://calibre-ebook.com/"&gt;Calibre&lt;/a&gt; ebook reader, of course!&lt;/p&gt;
&lt;/aside&gt;
&lt;aside class="footnote brackets" id="footnote-8" role="note"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/#footnote-reference-8"&gt;7&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;There are some oddities in the current build with the conversion to
mobi complaining about fonts not being found in the right places and
being deleted from the result, but I don't know enough about ebooks to
debug it at this time. Besides, I've hit the auspicious footnote number
seven (though it's not the seventh footnote, as it is actually the
eighth!) and should really finish this email now.&lt;/p&gt;
&lt;/aside&gt;
&lt;p&gt;&lt;strong&gt;P.P.S.&lt;/strong&gt; &lt;em&gt;Omitted for irrelevance&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;P.P.P.S.&lt;/strong&gt; Sorry, no deeply nested parenthetical expressions this
time!&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;Here's an addendum with two Apple &lt;span class="app"&gt;Messenger&lt;/span&gt; messages to P.,
reflecting on converting this from an HTML email into a blog post:&lt;/p&gt;
&lt;p&gt;The HTML dialect Google uses in its MIME emails is very odd.  It
doesn’t use &lt;code class="docutils literal"&gt;&amp;lt;p&amp;gt;&lt;/code&gt; elements, using instead &lt;code class="docutils literal"&gt;&amp;lt;div&amp;gt;&lt;/code&gt; elements.
Unfortunately, &lt;span class="app"&gt;pandoc&lt;/span&gt; converts those into containers, and nests
them according to the nesting of the &lt;code class="docutils literal"&gt;&amp;lt;div&amp;gt;&lt;/code&gt; elements.  To fix this
I hand edited the HTML to remove the outer &lt;code class="docutils literal"&gt;&amp;lt;div&amp;gt;&lt;/code&gt; elements and
convert the remaining ones into &amp;lt;p&amp;gt;s.  Also, for some reason when I
ran the documents through HTML tidy it converted the unicode
characters into incorrect HTML character entities.  I see now that it
has a &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-utf8&lt;/span&gt;&lt;/code&gt; switch, which I’ll have to remember for the next time
I do this.  (There will inevitably be a next time.)&lt;/p&gt;
&lt;p&gt;OMG, now I have have to put that in the blog post!  How many &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Saving_throw"&gt;saving
throws&lt;/a&gt; am I going to fail today anyway?&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Last edited: 2021-07-17 00:53:29 EDT&lt;/em&gt;&lt;/p&gt;
&lt;!-- Local Variables:
time-stamp-format: "%Y-%02m-%02d %02H:%02M:%02S %Z"
time-stamp-start: "\\*Last edited:[ \t]+\\\\?"
time-stamp-end: "\\*\\\\?\n"
time-stamp-line-limit: -20
End: --&gt;</description><category>context</category><category>epub</category><category>latex</category><category>lightweight markup languages</category><category>markup languages</category><category>tex</category><category>troff</category><category>unix</category><guid>https://tkurtbond.github.io/posts/2020/12/01/epub-files-markup-languages-and-briefly-unix/</guid><pubDate>Tue, 01 Dec 2020 20:56:13 GMT</pubDate></item></channel></rss>