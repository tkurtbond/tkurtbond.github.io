<?xml version='1.0' encoding='UTF-8'?>
<?xml-stylesheet href="https://tkurtbond.github.io/assets/xml/atom.xsl" type="text/xsl media="all"?>
<feed xml:lang="en" xmlns="http://www.w3.org/2005/Atom">
  <title>Lacking Natural Simplicity (Posts about gmail)</title>
  <id>https://tkurtbond.github.io/categories/gmail.atom</id>
  <updated>2024-01-22T04:12:51Z</updated>
  <author>
    <name>T. Kurt Bond</name>
  </author>
  <link rel="self" type="application/atom+xml" href="https://tkurtbond.github.io/categories/gmail.atom"/>
  <link rel="alternate" type="text/html" href="https://tkurtbond.github.io/categories/gmail/"/>
  <generator uri="https://getnikola.com/">Nikola</generator>
  <entry>
    <title>MIME and Gmail vs other mailers</title>
    <id>https://tkurtbond.github.io/posts/2020/12/11/mime-and-gmail-vs-other-mailers/</id>
    <updated>2020-12-11T09:12:17-05:00</updated>
    <published>2020-12-11T09:12:17-05:00</published>
    <author>
      <name>T. Kurt Bond</name>
    </author>
    <link rel="alternate" type="text/html" href="https://tkurtbond.github.io/posts/2020/12/11/mime-and-gmail-vs-other-mailers/"/>
    <summary type="html">&lt;p&gt;I composed a carefully constructed &lt;a class="reference external" href="https://en.wikipedia.org/wiki/MIME"&gt;MIME&lt;/a&gt; message using &lt;a class="reference external" href="http://www.mew.org/"&gt;Mew&lt;/a&gt;, which has
a nice way to build &lt;a class="reference external" href="https://en.wikipedia.org/wiki/MIME"&gt;MIME&lt;/a&gt; messages, but Gmail doesn’t know that if you
have a multipart &lt;a class="reference external" href="https://en.wikipedia.org/wiki/MIME"&gt;MIME&lt;/a&gt; message that has a text part, then an image,
then a text part, then an image, then a text part then what you want
is for the image parts to be displayed inline.  In messages like that
composed in Gmail, it uses the content type of &lt;code class="docutils literal"&gt;multipart/related&lt;/code&gt;,
which then encloses a &lt;code class="docutils literal"&gt;multipart/alternative&lt;/code&gt;, which has a plain
text version of the message and an HTML version, which refers to the
images with an &lt;code class="docutils literal"&gt;img&lt;/code&gt; tag that has an id that refers to the id in a
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;Content-ID&lt;/span&gt;&lt;/code&gt; &lt;a class="reference external" href="https://en.wikipedia.org/wiki/MIME"&gt;MIME&lt;/a&gt; header in following parts of the multipart-related
&lt;a class="reference external" href="https://en.wikipedia.org/wiki/MIME"&gt;MIME&lt;/a&gt; part that is the main body of the email.&lt;/p&gt;
&lt;p&gt;I don’t know why Gmail doesn’t display the simpler &lt;code class="docutils literal"&gt;multipart/mixed&lt;/code&gt;
messages correctly.&lt;/p&gt;
&lt;p&gt;It is very annoying.  I don’t mind them using the
&lt;code class="docutils literal"&gt;multipart/related&lt;/code&gt; (which I didn’t even know about before looking
at one of their messages using &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;wl-summary-reedit&lt;/span&gt;&lt;/code&gt; in &lt;a class="reference external" href="https://www.emacswiki.org/emacs/WanderLust"&gt;Wanderlust&lt;/a&gt;,
which pulls it up in the &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;mime-edit-mode&lt;/span&gt;&lt;/code&gt; &lt;a class="reference external" href="https://en.wikipedia.org/wiki/MIME"&gt;MIME&lt;/a&gt; composition mode
&lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2020/12/11/mime-and-gmail-vs-other-mailers/#mime-edit-mode" id="footnote-reference-1" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;1&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt;, which revealed all the details), but I wish they’d
get the simpler &lt;code class="docutils literal"&gt;multipart/mixed&lt;/code&gt; version right.  Instead, they
don’t display the inline attachments (regardless of whether they are
images or text) and put them all at the end of the display as
attachments, and display the other text parts smushed together.&lt;/p&gt;
&lt;p&gt;Interestingly, if a text part it has a &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;Content-Type:&lt;/span&gt; Text/Plain&lt;/code&gt;
&lt;a class="reference external" href="https://en.wikipedia.org/wiki/MIME"&gt;MIME&lt;/a&gt; header field it is displayed inline in Gmail, unless it has a&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code text"&gt;&lt;a id="rest_code_705790eb1df742d99b556f3cab9dd978-1" name="rest_code_705790eb1df742d99b556f3cab9dd978-1" href="https://tkurtbond.github.io/posts/2020/12/11/mime-and-gmail-vs-other-mailers/#rest_code_705790eb1df742d99b556f3cab9dd978-1"&gt;&lt;/a&gt;Content-Disposition: inline; filename="JRandomFilename.txt"
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a class="reference external" href="https://en.wikipedia.org/wiki/MIME"&gt;MIME&lt;/a&gt; header field, and then it &lt;strong&gt;doesn’t&lt;/strong&gt; display it inline,
unlike all the other mail readers I tried: &lt;a class="reference external" href="https://www.emacswiki.org/emacs/WanderLust"&gt;Wanderlust&lt;/a&gt;, &lt;a class="reference external" href="http://www.mew.org/"&gt;Mew&lt;/a&gt;, &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Alpine_(email_client)"&gt;Alpine&lt;/a&gt;,
&lt;a class="reference external" href="https://www.thunderbird.ne"&gt;Thunderbird&lt;/a&gt; (had to have a pure GUI client for comparison), and &lt;a class="reference external" href="http://www.mutt.org/"&gt;mutt&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Interestingly, &lt;a class="reference external" href="https://www.emacswiki.org/emacs/WanderLust"&gt;Wanderlust&lt;/a&gt; displays Gmail’s &lt;code class="docutils literal"&gt;multipart/related&lt;/code&gt;
messages correctly, which impressed me.&lt;/p&gt;
&lt;p&gt;I originally I thought that &lt;a class="reference external" href="http://www.mew.org/"&gt;Mew&lt;/a&gt; did not display the
&lt;code class="docutils literal"&gt;multipart/related&lt;/code&gt; message correctly, punting to just displaying
original &lt;a class="reference external" href="https://en.wikipedia.org/wiki/MIME"&gt;MIME&lt;/a&gt;-encoded text instead, and not displaying the image
parts.&lt;/p&gt;
&lt;p&gt;I was wrong about that; I was just confused by its presentation.
First it displays the text version of the enclosed
&lt;code class="docutils literal"&gt;multipart/alternative&lt;/code&gt;, which is what made me think it didn’t
display the image parts; it just hasn't yet!  Then if I hit space, it
displays the first of the images, and then if I hit space it displays
the second of the images.&lt;/p&gt;
&lt;p&gt;And you can make &lt;a class="reference external" href="http://www.mew.org/"&gt;Mew&lt;/a&gt; display the HTML part, but it doesn’t know how
the &lt;code class="docutils literal"&gt;&amp;lt;img &lt;span class="pre"&gt;id=“foo”&amp;gt;&lt;/span&gt;&lt;/code&gt; elements work, so it doesn’t display the
images.&lt;/p&gt;
&lt;p&gt;I was pleased to see that the &lt;a class="reference external" href="https://www.emacswiki.org/emacs/WanderLust"&gt;Wanderlust&lt;/a&gt; (&lt;a class="reference external" href="https://github.com/wanderlust/wanderlust"&gt;WGH&lt;/a&gt;) and &lt;a class="reference external" href="http://www.mew.org/"&gt;Mew&lt;/a&gt; (&lt;a class="reference external" href="https://github.com/kazu-yamamoto/Mew"&gt;MGH&lt;/a&gt;) github
repositories both have recent commits.&lt;/p&gt;
&lt;p&gt;And &lt;a class="reference external" href="https://www.emacswiki.org/emacs/WanderLust"&gt;Wanderlust&lt;/a&gt; and &lt;a class="reference external" href="http://www.mew.org/"&gt;Mew&lt;/a&gt; are both in &lt;a class="reference external" href="https://melpa.org/"&gt;MELPA&lt;/a&gt; these days, although
&lt;a class="reference external" href="http://www.mew.org/"&gt;Mew&lt;/a&gt;’s &lt;a class="reference external" href="https://melpa.org/"&gt;MELPA&lt;/a&gt; package doesn’t include the command line program,
&lt;span class="command"&gt;incm&lt;/span&gt;, that is used to pull emails from &lt;span class="file"&gt;/var/mail&lt;/span&gt;
into &lt;a class="reference external" href="https://en.wikipedia.org/wiki/MH_Message_Handling_System"&gt;MH&lt;/a&gt; style files under &lt;span class="file"&gt;~/Mail&lt;/span&gt;.  &lt;a class="reference external" href="https://www.emacswiki.org/emacs/WanderLust"&gt;Wanderlust&lt;/a&gt; and &lt;a class="reference external" href="http://www.mew.org/"&gt;Mew&lt;/a&gt; both
use &lt;a class="reference external" href="https://en.wikipedia.org/wiki/MH_Message_Handling_System"&gt;MH&lt;/a&gt; style files under &lt;span class="file"&gt;~/Mail&lt;/span&gt; as their local message store.
&lt;a class="reference external" href="https://en.wikipedia.org/wiki/MH_Message_Handling_System"&gt;MH&lt;/a&gt; puts subdirectories there for folders, and in each folder the
messages are named with integers that correspond to the order in which
they were incorporated from whatever mail source you were using
(historically &lt;span class="file"&gt;/var/mail&lt;/span&gt;).  &lt;a class="reference external" href="https://en.wikipedia.org/wiki/MH_Message_Handling_System"&gt;MH&lt;/a&gt; used command line programs to
incorporate mail, list mail messages, display mail messages, and file
it into folders.  I rather liked it.  I used &lt;a class="reference external" href="https://www.nongnu.org/nmh/"&gt;nmh&lt;/a&gt; (the New MH, a new
implementation of the original Rand MH commands, which ran on newer
Unixes) and &lt;a class="reference external" href="https://mailutils.org/"&gt;GNU mailutils&lt;/a&gt; (which provided MH-compatible command
line programs, if not configured out), sometimes during the same
period of time, for a considerable time.  At one time, when I was
getting mail at a server I had online, I was using &lt;a class="reference external" href="https://www.nongnu.org/nmh/"&gt;nmh&lt;/a&gt;, &lt;a class="reference external" href="https://mailutils.org/"&gt;GNU
mailutils&lt;/a&gt;, Emacs’s built-in interface to MH (&lt;a class="reference external" href="https://www.emacswiki.org/emacs/MH-E"&gt;MH-E&lt;/a&gt;), &lt;a class="reference external" href="https://www.emacswiki.org/emacs/WanderLust"&gt;Wanderlust&lt;/a&gt;,
and &lt;a class="reference external" href="http://www.mew.org/"&gt;Mew&lt;/a&gt;. (Before that I used &lt;a class="reference external" href="http://savannah.nongnu.org/projects/viewmail"&gt;ViewMail&lt;/a&gt;, and before that I used
&lt;a class="reference external" href="https://www.emacswiki.org/emacs/Rmail"&gt;RMAIL&lt;/a&gt;) They each had features the other lacked.&lt;/p&gt;
&lt;p&gt;I tried using &lt;a class="reference external" href="https://www.seas.upenn.edu/~bcpierce/unison/"&gt;Unison&lt;/a&gt; to sync that mail between my server online and
my computer at home, but that did not work well, since &lt;a class="reference external" href="https://en.wikipedia.org/wiki/MH_Message_Handling_System"&gt;MH&lt;/a&gt; commands
change the names of files when they move them from one folder to
another (remember, each message in a folder gets a name that is an
integer based on the order in which it was incorporated in that
folder, and its folder command provided an option, &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;-pack&lt;/span&gt;&lt;/code&gt;, that
renamed all the messages in a folder sequentially, used after you’d
deleted messages) so you couldn’t keep track if the message named 32
in one folder on one machine was a new one or just renamed from 976
when you ran folder -pack last.  Syncing with &lt;a class="reference external" href="https://www.seas.upenn.edu/~bcpierce/unison/"&gt;Unison&lt;/a&gt; just did not
work at all.  Hmm.  I could have changed the &lt;code class="docutils literal"&gt;Path&lt;/code&gt; option in my
&lt;span class="file"&gt;.mh-profile`&lt;/span&gt; file on each machine, so that instead of all the
&lt;a class="reference external" href="https://en.wikipedia.org/wiki/MH_Message_Handling_System"&gt;MH&lt;/a&gt; mail being under &lt;span class="file"&gt;~/Mail&lt;/span&gt; on both machines, on my home
machine it could have been under &lt;span class="file"&gt;~/Mail-home&lt;/span&gt; and on
tkb.mpl.com it could have been under &lt;span class="file"&gt;~/Mail-onlineserver&lt;/span&gt;, and
then I could have used &lt;a class="reference external" href="https://rsync.samba.org/"&gt;rsync&lt;/a&gt; to copy those from one machine to the
other appropriately so I’d have a backup.  Huh.  Wish I’d figured that
out back in the day.  Of course, to read email in &lt;span class="file"&gt;~/Mail-home&lt;/span&gt;
on my online server I’d have had to changed the &lt;code class="docutils literal"&gt;Path&lt;/code&gt; option in my
&lt;span class="file"&gt;~/.mh_profile&lt;/span&gt; on that machine, and then changed it back when I
wanted to use &lt;span class="file"&gt;~/Mail-onlineserver&lt;/span&gt;.  It would have worked,
however.&lt;/p&gt;
&lt;p&gt;Completion made me go look at the &lt;a class="reference external" href="https://en.wikipedia.org/wiki/MIME"&gt;MIME&lt;/a&gt; messages I was testing in
&lt;a class="reference external" href="https://www.emacswiki.org/emacs/MH-E"&gt;MH-E&lt;/a&gt;.  In the &lt;code class="docutils literal"&gt;multipart/mixed&lt;/code&gt; message &lt;a class="reference external" href="https://www.emacswiki.org/emacs/MH-E"&gt;MH-E&lt;/a&gt; does not show the
PNG files inline, though emacs has the capability to do that now.  It
&lt;em&gt;does&lt;/em&gt; have keybindings to open an external viewer for you.  If you
specify the macOS command &lt;span class="command"&gt;open&lt;/span&gt; it will open it in whatever
app is the default for macOS; in the case of PNGs that is
&lt;span class="app"&gt;Preview&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;I do most of my email reading and sending in Gmail these days, alas.  I
still use &lt;a class="reference external" href="https://www.emacswiki.org/emacs/WanderLust"&gt;Wanderlust&lt;/a&gt; and &lt;a class="reference external" href="http://www.mew.org/"&gt;Mew&lt;/a&gt; occasionally, since they support &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Internet_Message_Access_Protocol"&gt;IMAP&lt;/a&gt;
very well.  Now if only Google didn't make it harder to use them:
Gmail declares IMAP-over-SSL is a “less secure” application, and turns
&lt;a class="reference external" href="https://en.wikipedia.org/wiki/Internet_Message_Access_Protocol"&gt;IMAP&lt;/a&gt; access off if you don't use it regularly.&lt;/p&gt;
&lt;aside class="footnote-list brackets"&gt;
&lt;aside class="footnote brackets" id="mime-edit-mode" role="doc-footnote"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2020/12/11/mime-and-gmail-vs-other-mailers/#footnote-reference-1"&gt;1&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;This is provided by &lt;a class="reference external" href="https://www.emacswiki.org/emacs/SemiIsEmacsMimeInterface"&gt;SEMI&lt;/a&gt;, an Emacs Lisp package,
and it has a GitHub repo (&lt;a class="reference external" href="https://github.com/wanderlust/semi"&gt;SEMIGH&lt;/a&gt;), last commit 27 days ago as of
the time of this writing.&lt;/p&gt;
&lt;/aside&gt;
&lt;/aside&gt;</summary>
    <category term="alpine" label="alpine"/>
    <category term="e-mail" label="e-mail"/>
    <category term="gmail" label="gmail"/>
    <category term="mew" label="mew"/>
    <category term="mime" label="mime"/>
    <category term="mutt" label="mutt"/>
    <category term="thunderbird" label="thunderbird"/>
    <category term="wanderlust" label="wanderlust"/>
  </entry>
  <entry>
    <title>Line number anchors in pandoc's HTML output for codeblocks with highlighting mess up Gmail text/plain multipart alternative</title>
    <id>https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/</id>
    <updated>2020-07-05T18:48:44-04:00</updated>
    <published>2020-07-05T18:48:44-04:00</published>
    <author>
      <name>T. Kurt Bond</name>
    </author>
    <link rel="alternate" type="text/html" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/"/>
    <summary type="html">&lt;p&gt;I’ve found that if I write something in &lt;a class="reference external" href="https://docutils.sourceforge.io/rst.html"&gt;ReStructuredText&lt;/a&gt;, create HTML
from it and embed a stylesheet with the proper css in the
&lt;span class="file"&gt;.html&lt;/span&gt; file using &lt;a class="reference external" href="https://pandoc.org/"&gt;pandoc&lt;/a&gt;’s &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;--include-in-header&lt;/span&gt;&lt;/code&gt; option that
I can cut and paste from the web page displayed in my browser from
that HTML directly into gmail, and things like code blocks and literal
text will have the nice surrounded by a box, light gray background
formatting that carries over to &lt;a class="reference external" href="https://www.google.com/gmail/"&gt;Gmail&lt;/a&gt;.  That's nice because Gmail's
native formatting is a … minimalist user experience.&lt;/p&gt;
&lt;p&gt;However, I've found that if I use the &lt;code class="docutils literal"&gt;.. include::&lt;/code&gt; directive with
the &lt;code class="docutils literal"&gt;:code:&lt;/code&gt; option (which basically makes it a code block) and
specify a language for highlighting with an argument to the &lt;code class="docutils literal"&gt;:code:&lt;/code&gt;
option that the text/html part in the resulting multipart/alternative
e-mail displays fine in Gmail (and probably other &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Email_client"&gt;mail user agent&lt;/a&gt;s
that display the HTML part; &lt;a class="reference external" href="http://www.mew.org/en/"&gt;Mew&lt;/a&gt; in Emacs works too), but the
&lt;code class="docutils literal"&gt;text/plain&lt;/code&gt; part is messed up, with weird HTML-like tags in the
plain text. &lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#plain-code-directive" id="footnote-reference-1" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;1&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;For instance, suppose I have the following RST source for the message
I want to write (&lt;span class="file"&gt;missing-ampersand.rst&lt;/span&gt;):&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code restructuredtext"&gt;&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-1" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-1" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-1"&gt;&lt;/a&gt;&lt;span class="nc"&gt;:title:&lt;/span&gt; Missing Ampersand in Code Blocks in &lt;span class="s"&gt;``-ms``&lt;/span&gt; Output
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-2" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-2" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-2"&gt;&lt;/a&gt;
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-3" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-3" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-3"&gt;&lt;/a&gt;Here's some ReStructuredText input that has a code block in it:
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-4" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-4" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-4"&gt;&lt;/a&gt;
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-5" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-5" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-5"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;include&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; ma.rst
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-6" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-6" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-6"&gt;&lt;/a&gt;   &lt;span class="nc"&gt;:code:&lt;/span&gt; restructuredtext
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-7" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-7" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-7"&gt;&lt;/a&gt;
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-8" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-8" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-8"&gt;&lt;/a&gt;Here's the &lt;span class="s"&gt;``-ms``&lt;/span&gt; output from it:
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-9" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-9" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-9"&gt;&lt;/a&gt;
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-10" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-10" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-10"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;include&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; ma-rst.ms
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-11" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-11" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-11"&gt;&lt;/a&gt;   &lt;span class="nc"&gt;:code:&lt;/span&gt; nroff
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-12" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-12" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-12"&gt;&lt;/a&gt;
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-13" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-13" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-13"&gt;&lt;/a&gt;See the first line that starts with &lt;span class="s"&gt;``.. container::``&lt;/span&gt;?  That line
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-14" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-14" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-14"&gt;&lt;/a&gt;should start with &lt;span class="s"&gt;``\&amp;amp;``&lt;/span&gt; so it isn't interpreted as an &lt;span class="gs"&gt;**roff**&lt;/span&gt;
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-15" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-15" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-15"&gt;&lt;/a&gt;command.  As it is, when you build the PDF output from output that
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-16" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-16" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-16"&gt;&lt;/a&gt;line disappears entirely with no warning to the user.  (The default
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-17" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-17" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-17"&gt;&lt;/a&gt;for &lt;span class="gs"&gt;**roff**&lt;/span&gt; processors like &lt;span class="gs"&gt;**groff**&lt;/span&gt; is to ignore unknown commands.)
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-18" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-18" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-18"&gt;&lt;/a&gt;
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-19" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-19" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-19"&gt;&lt;/a&gt;See the second line that starts with &lt;span class="s"&gt;``.. container::``&lt;/span&gt;?  That line
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-20" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-20" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-20"&gt;&lt;/a&gt;&lt;span class="gs"&gt;**does**&lt;/span&gt; start with &lt;span class="s"&gt;``\&amp;amp;``&lt;/span&gt;.  It makes it through fine.  The other
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-21" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-21" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-21"&gt;&lt;/a&gt;lines whose first non-whitespace character is &lt;span class="s"&gt;``.``&lt;/span&gt; make it through
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-22" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-22" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-22"&gt;&lt;/a&gt;fine because to make it a &lt;span class="gs"&gt;**roff**&lt;/span&gt; command the first character on the
&lt;a id="rest_code_16a28e42b1874654977037fbfa5ccbe0-23" name="rest_code_16a28e42b1874654977037fbfa5ccbe0-23" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_16a28e42b1874654977037fbfa5ccbe0-23"&gt;&lt;/a&gt;line has to be a period.
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;where the included &lt;a class="reference external" href="https://docutils.sourceforge.io/rst.html"&gt;ReStructuredText&lt;/a&gt; file (&lt;span class="file"&gt;ma.rst&lt;/span&gt;) is&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code restructuredtext"&gt;&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-1" name="rest_code_09edc285df2449cf82dd5767dafb63fc-1" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-1"&gt;&lt;/a&gt;Missing Ampersand in Code Block -ms output
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-2" name="rest_code_09edc285df2449cf82dd5767dafb63fc-2" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-2"&gt;&lt;/a&gt;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-3" name="rest_code_09edc285df2449cf82dd5767dafb63fc-3" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-3"&gt;&lt;/a&gt;
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-4" name="rest_code_09edc285df2449cf82dd5767dafb63fc-4" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-4"&gt;&lt;/a&gt;Here's a code block containing ReStructuredText:
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-5" name="rest_code_09edc285df2449cf82dd5767dafb63fc-5" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-5"&gt;&lt;/a&gt;
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-6" name="rest_code_09edc285df2449cf82dd5767dafb63fc-6" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-6"&gt;&lt;/a&gt;&lt;span class="p"&gt;..&lt;/span&gt; &lt;span class="ow"&gt;code&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt;
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-7" name="rest_code_09edc285df2449cf82dd5767dafb63fc-7" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-7"&gt;&lt;/a&gt;
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-8" name="rest_code_09edc285df2449cf82dd5767dafb63fc-8" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-8"&gt;&lt;/a&gt;&lt;span class="p"&gt;   ..&lt;/span&gt; &lt;span class="ow"&gt;container&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; for-format ms
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-9" name="rest_code_09edc285df2449cf82dd5767dafb63fc-9" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-9"&gt;&lt;/a&gt;
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-10" name="rest_code_09edc285df2449cf82dd5767dafb63fc-10" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-10"&gt;&lt;/a&gt;&lt;span class="p"&gt;      ..&lt;/span&gt; &lt;span class="ow"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; davesmapper-2017-04-10-caves-4-numbered.eps
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-11" name="rest_code_09edc285df2449cf82dd5767dafb63fc-11" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-11"&gt;&lt;/a&gt;         &lt;span class="nc"&gt;:alt:&lt;/span&gt; Map of Bandit's Cave
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-12" name="rest_code_09edc285df2449cf82dd5767dafb63fc-12" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-12"&gt;&lt;/a&gt;
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-13" name="rest_code_09edc285df2449cf82dd5767dafb63fc-13" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-13"&gt;&lt;/a&gt;      Map of Bandit's Cave
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-14" name="rest_code_09edc285df2449cf82dd5767dafb63fc-14" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-14"&gt;&lt;/a&gt;
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-15" name="rest_code_09edc285df2449cf82dd5767dafb63fc-15" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-15"&gt;&lt;/a&gt;&lt;span class="p"&gt;   ..&lt;/span&gt; &lt;span class="ow"&gt;container&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; for-format html latex context epub
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-16" name="rest_code_09edc285df2449cf82dd5767dafb63fc-16" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-16"&gt;&lt;/a&gt;
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-17" name="rest_code_09edc285df2449cf82dd5767dafb63fc-17" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-17"&gt;&lt;/a&gt;&lt;span class="p"&gt;      ..&lt;/span&gt; &lt;span class="ow"&gt;figure&lt;/span&gt;&lt;span class="p"&gt;::&lt;/span&gt; davesmapper-2017-04-10-caves-4-numbered.png
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-18" name="rest_code_09edc285df2449cf82dd5767dafb63fc-18" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-18"&gt;&lt;/a&gt;         &lt;span class="nc"&gt;:alt:&lt;/span&gt; Map of Bandit's Cave
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-19" name="rest_code_09edc285df2449cf82dd5767dafb63fc-19" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-19"&gt;&lt;/a&gt;
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-20" name="rest_code_09edc285df2449cf82dd5767dafb63fc-20" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-20"&gt;&lt;/a&gt;         Map of Bandit's Cave
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-21" name="rest_code_09edc285df2449cf82dd5767dafb63fc-21" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-21"&gt;&lt;/a&gt;
&lt;a id="rest_code_09edc285df2449cf82dd5767dafb63fc-22" name="rest_code_09edc285df2449cf82dd5767dafb63fc-22" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_09edc285df2449cf82dd5767dafb63fc-22"&gt;&lt;/a&gt;How's that look?
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;and the included roff source file (&lt;span class="file"&gt;ms-rst.ms&lt;/span&gt;) is&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code groff"&gt;&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-1" name="rest_code_779e724ac2e84a9d954646710de13f8b-1" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-1"&gt;&lt;/a&gt;.&lt;span class="k"&gt;SH&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-2" name="rest_code_779e724ac2e84a9d954646710de13f8b-2" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-2"&gt;&lt;/a&gt;Missing Ampersand in Code Block -ms output
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-3" name="rest_code_779e724ac2e84a9d954646710de13f8b-3" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-3"&gt;&lt;/a&gt;.&lt;span class="k"&gt;pdfhref&lt;/span&gt; &lt;span class="s"&gt;O&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="s2"&gt;"Missing Ampersand in Code Block -ms output"&lt;/span&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-4" name="rest_code_779e724ac2e84a9d954646710de13f8b-4" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-4"&gt;&lt;/a&gt;.&lt;span class="k"&gt;pdfhref&lt;/span&gt; &lt;span class="s"&gt;M&lt;/span&gt; &lt;span class="s2"&gt;"missing-ampersand-in-code-block--ms-output"&lt;/span&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-5" name="rest_code_779e724ac2e84a9d954646710de13f8b-5" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-5"&gt;&lt;/a&gt;.&lt;span class="k"&gt;LP&lt;/span&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-6" name="rest_code_779e724ac2e84a9d954646710de13f8b-6" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-6"&gt;&lt;/a&gt;Here&lt;span class="se"&gt;\[&lt;/span&gt;aq]s a code block containing ReStructuredText:
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-7" name="rest_code_779e724ac2e84a9d954646710de13f8b-7" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-7"&gt;&lt;/a&gt;.&lt;span class="k"&gt;IP&lt;/span&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-8" name="rest_code_779e724ac2e84a9d954646710de13f8b-8" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-8"&gt;&lt;/a&gt;.&lt;span class="k"&gt;nf&lt;/span&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-9" name="rest_code_779e724ac2e84a9d954646710de13f8b-9" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-9"&gt;&lt;/a&gt;&lt;span class="se"&gt;\f[C]&lt;/span&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-10" name="rest_code_779e724ac2e84a9d954646710de13f8b-10" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-10"&gt;&lt;/a&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="s"&gt;.&lt;/span&gt; &lt;span class="s"&gt;container::&lt;/span&gt; &lt;span class="s"&gt;for-format&lt;/span&gt; &lt;span class="s"&gt;ms&lt;/span&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-11" name="rest_code_779e724ac2e84a9d954646710de13f8b-11" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-11"&gt;&lt;/a&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-12" name="rest_code_779e724ac2e84a9d954646710de13f8b-12" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-12"&gt;&lt;/a&gt;   .. figure:: davesmapper-2017-04-10-caves-4-numbered.eps
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-13" name="rest_code_779e724ac2e84a9d954646710de13f8b-13" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-13"&gt;&lt;/a&gt;      :alt: Map of Bandit&lt;span class="se"&gt;\[&lt;/span&gt;aq]s Cave
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-14" name="rest_code_779e724ac2e84a9d954646710de13f8b-14" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-14"&gt;&lt;/a&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-15" name="rest_code_779e724ac2e84a9d954646710de13f8b-15" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-15"&gt;&lt;/a&gt;   Map of Bandit&lt;span class="se"&gt;\[&lt;/span&gt;aq]s Cave
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-16" name="rest_code_779e724ac2e84a9d954646710de13f8b-16" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-16"&gt;&lt;/a&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-17" name="rest_code_779e724ac2e84a9d954646710de13f8b-17" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-17"&gt;&lt;/a&gt;&lt;span class="se"&gt;\&amp;amp;&lt;/span&gt;.. container:: for-format html latex context epub
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-18" name="rest_code_779e724ac2e84a9d954646710de13f8b-18" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-18"&gt;&lt;/a&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-19" name="rest_code_779e724ac2e84a9d954646710de13f8b-19" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-19"&gt;&lt;/a&gt;   .. figure:: davesmapper-2017-04-10-caves-4-numbered.png
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-20" name="rest_code_779e724ac2e84a9d954646710de13f8b-20" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-20"&gt;&lt;/a&gt;      :alt: Map of Bandit&lt;span class="se"&gt;\[&lt;/span&gt;aq]s Cave
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-21" name="rest_code_779e724ac2e84a9d954646710de13f8b-21" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-21"&gt;&lt;/a&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-22" name="rest_code_779e724ac2e84a9d954646710de13f8b-22" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-22"&gt;&lt;/a&gt;      Map of Bandit&lt;span class="se"&gt;\[&lt;/span&gt;aq]s Cave
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-23" name="rest_code_779e724ac2e84a9d954646710de13f8b-23" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-23"&gt;&lt;/a&gt;&lt;span class="se"&gt;\f[]&lt;/span&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-24" name="rest_code_779e724ac2e84a9d954646710de13f8b-24" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-24"&gt;&lt;/a&gt;.&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-25" name="rest_code_779e724ac2e84a9d954646710de13f8b-25" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-25"&gt;&lt;/a&gt;.&lt;span class="k"&gt;LP&lt;/span&gt;
&lt;a id="rest_code_779e724ac2e84a9d954646710de13f8b-26" name="rest_code_779e724ac2e84a9d954646710de13f8b-26" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_779e724ac2e84a9d954646710de13f8b-26"&gt;&lt;/a&gt;How&lt;span class="se"&gt;\[&lt;/span&gt;aq]s that look?
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then the resulting HTML output for the first code block &lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#toolong" id="footnote-reference-2" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;2&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt; is:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code html"&gt;&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-1" name="rest_code_0daf25e95fe0401ba204796731cce8a8-1" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-1"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"sourceCode"&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;pre&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"sourceCode restructuredtext"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;code&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"sourceCode rest"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-1"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-1"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Missing Ampersand in Code Block -ms output&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-2" name="rest_code_0daf25e95fe0401ba204796731cce8a8-2" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-2"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-2"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-2"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-3" name="rest_code_0daf25e95fe0401ba204796731cce8a8-3" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-3"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-3"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-3"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-4" name="rest_code_0daf25e95fe0401ba204796731cce8a8-4" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-4"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-4"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-4"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Here&lt;span class="ni"&gt;&amp;amp;#39;&lt;/span&gt;s a code block containing ReStructuredText:&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-5" name="rest_code_0daf25e95fe0401ba204796731cce8a8-5" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-5"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-5"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-5"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-6" name="rest_code_0daf25e95fe0401ba204796731cce8a8-6" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-6"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-6"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-6"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"dt"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;.. code::&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-7" name="rest_code_0daf25e95fe0401ba204796731cce8a8-7" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-7"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-7"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-7"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-8" name="rest_code_0daf25e95fe0401ba204796731cce8a8-8" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-8"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-8"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-8"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"dt"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;   .. container:: for-format ms&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-9" name="rest_code_0daf25e95fe0401ba204796731cce8a8-9" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-9"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-9"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-9"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-10" name="rest_code_0daf25e95fe0401ba204796731cce8a8-10" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-10"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-10"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-10"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"dt"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;      .. figure:: davesmapper-2017-04-10-caves-4-numbered.eps&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-11" name="rest_code_0daf25e95fe0401ba204796731cce8a8-11" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-11"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-11"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-11"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"dt"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;         :alt: Map of Bandit&lt;span class="ni"&gt;&amp;amp;#39;&lt;/span&gt;s Cave&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-12" name="rest_code_0daf25e95fe0401ba204796731cce8a8-12" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-12"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-12"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-12"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-13" name="rest_code_0daf25e95fe0401ba204796731cce8a8-13" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-13"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-13"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-13"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"dt"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;      Map of Bandit&lt;span class="ni"&gt;&amp;amp;#39;&lt;/span&gt;s Cave&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-14" name="rest_code_0daf25e95fe0401ba204796731cce8a8-14" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-14"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-14"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-14"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-15" name="rest_code_0daf25e95fe0401ba204796731cce8a8-15" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-15"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-15"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-15"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"dt"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;   .. container:: for-format html latex context epub&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-16" name="rest_code_0daf25e95fe0401ba204796731cce8a8-16" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-16"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-16"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-16"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-17" name="rest_code_0daf25e95fe0401ba204796731cce8a8-17" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-17"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-17"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-17"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"dt"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;      .. figure:: davesmapper-2017-04-10-caves-4-numbered.png&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-18" name="rest_code_0daf25e95fe0401ba204796731cce8a8-18" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-18"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-18"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-18"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"dt"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;         :alt: Map of Bandit&lt;span class="ni"&gt;&amp;amp;#39;&lt;/span&gt;s Cave&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-19" name="rest_code_0daf25e95fe0401ba204796731cce8a8-19" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-19"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-19"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-19"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-20" name="rest_code_0daf25e95fe0401ba204796731cce8a8-20" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-20"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-20"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-20"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"dt"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;         Map of Bandit&lt;span class="ni"&gt;&amp;amp;#39;&lt;/span&gt;s Cave&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-21" name="rest_code_0daf25e95fe0401ba204796731cce8a8-21" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-21"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-21"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-21"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-22" name="rest_code_0daf25e95fe0401ba204796731cce8a8-22" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-22"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-22"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-22"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;How&lt;span class="ni"&gt;&amp;amp;#39;&lt;/span&gt;s that look?&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;a id="rest_code_0daf25e95fe0401ba204796731cce8a8-23" name="rest_code_0daf25e95fe0401ba204796731cce8a8-23" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_0daf25e95fe0401ba204796731cce8a8-23"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-23"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-23"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;code&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;pre&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And the HTML output for the second code block is:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code html"&gt;&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-1" name="rest_code_9b1916776ad944d39c7eb837317ae53f-1" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-1"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;pre&lt;/span&gt; &lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"nroff"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;code&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;.SH 1
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-2" name="rest_code_9b1916776ad944d39c7eb837317ae53f-2" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-2"&gt;&lt;/a&gt;Missing Ampersand in Code Block -ms output
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-3" name="rest_code_9b1916776ad944d39c7eb837317ae53f-3" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-3"&gt;&lt;/a&gt;.pdfhref O 1 &lt;span class="ni"&gt;&amp;amp;quot;&lt;/span&gt;Missing Ampersand in Code Block -ms output&lt;span class="ni"&gt;&amp;amp;quot;&lt;/span&gt;
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-4" name="rest_code_9b1916776ad944d39c7eb837317ae53f-4" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-4"&gt;&lt;/a&gt;.pdfhref M &lt;span class="ni"&gt;&amp;amp;quot;&lt;/span&gt;missing-ampersand-in-code-block--ms-output&lt;span class="ni"&gt;&amp;amp;quot;&lt;/span&gt;
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-5" name="rest_code_9b1916776ad944d39c7eb837317ae53f-5" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-5"&gt;&lt;/a&gt;.LP
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-6" name="rest_code_9b1916776ad944d39c7eb837317ae53f-6" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-6"&gt;&lt;/a&gt;Here\[aq]s a code block containing ReStructuredText:
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-7" name="rest_code_9b1916776ad944d39c7eb837317ae53f-7" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-7"&gt;&lt;/a&gt;.IP
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-8" name="rest_code_9b1916776ad944d39c7eb837317ae53f-8" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-8"&gt;&lt;/a&gt;.nf
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-9" name="rest_code_9b1916776ad944d39c7eb837317ae53f-9" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-9"&gt;&lt;/a&gt;\f[C]
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-10" name="rest_code_9b1916776ad944d39c7eb837317ae53f-10" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-10"&gt;&lt;/a&gt;.. container:: for-format ms
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-11" name="rest_code_9b1916776ad944d39c7eb837317ae53f-11" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-11"&gt;&lt;/a&gt;
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-12" name="rest_code_9b1916776ad944d39c7eb837317ae53f-12" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-12"&gt;&lt;/a&gt;   .. figure:: davesmapper-2017-04-10-caves-4-numbered.eps
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-13" name="rest_code_9b1916776ad944d39c7eb837317ae53f-13" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-13"&gt;&lt;/a&gt;      :alt: Map of Bandit\[aq]s Cave
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-14" name="rest_code_9b1916776ad944d39c7eb837317ae53f-14" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-14"&gt;&lt;/a&gt;
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-15" name="rest_code_9b1916776ad944d39c7eb837317ae53f-15" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-15"&gt;&lt;/a&gt;   Map of Bandit\[aq]s Cave
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-16" name="rest_code_9b1916776ad944d39c7eb837317ae53f-16" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-16"&gt;&lt;/a&gt;
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-17" name="rest_code_9b1916776ad944d39c7eb837317ae53f-17" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-17"&gt;&lt;/a&gt;\&lt;span class="ni"&gt;&amp;amp;amp;&lt;/span&gt;.. container:: for-format html latex context epub
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-18" name="rest_code_9b1916776ad944d39c7eb837317ae53f-18" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-18"&gt;&lt;/a&gt;
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-19" name="rest_code_9b1916776ad944d39c7eb837317ae53f-19" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-19"&gt;&lt;/a&gt;   .. figure:: davesmapper-2017-04-10-caves-4-numbered.png
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-20" name="rest_code_9b1916776ad944d39c7eb837317ae53f-20" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-20"&gt;&lt;/a&gt;      :alt: Map of Bandit\[aq]s Cave
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-21" name="rest_code_9b1916776ad944d39c7eb837317ae53f-21" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-21"&gt;&lt;/a&gt;
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-22" name="rest_code_9b1916776ad944d39c7eb837317ae53f-22" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-22"&gt;&lt;/a&gt;      Map of Bandit\[aq]s Cave
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-23" name="rest_code_9b1916776ad944d39c7eb837317ae53f-23" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-23"&gt;&lt;/a&gt;\f[]
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-24" name="rest_code_9b1916776ad944d39c7eb837317ae53f-24" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-24"&gt;&lt;/a&gt;.fi
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-25" name="rest_code_9b1916776ad944d39c7eb837317ae53f-25" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-25"&gt;&lt;/a&gt;.LP
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-26" name="rest_code_9b1916776ad944d39c7eb837317ae53f-26" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-26"&gt;&lt;/a&gt;How\[aq]s that look?
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-27" name="rest_code_9b1916776ad944d39c7eb837317ae53f-27" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-27"&gt;&lt;/a&gt;
&lt;a id="rest_code_9b1916776ad944d39c7eb837317ae53f-28" name="rest_code_9b1916776ad944d39c7eb837317ae53f-28" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_9b1916776ad944d39c7eb837317ae53f-28"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;code&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;pre&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the first code block you see a lot of HTML spans that look like this:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code html"&gt;&lt;a id="rest_code_f700d0ceb94e461ba605490c6b9a6370-1" name="rest_code_f700d0ceb94e461ba605490c6b9a6370-1" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_f700d0ceb94e461ba605490c6b9a6370-1"&gt;&lt;/a&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"cb1-3"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;"#cb1-3"&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;…&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;span&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;They appear to be anchors so you can link to a particular line in the
code block.  When I displayed the HTML file in my browser (Google
Chrome), selected the text, and pasted it into the Gmail message
composition window in the message body area (except for the header
text, which I put in the Subject line text entry box instead) and it
looked fine, so I sent it.&lt;/p&gt;
&lt;p&gt;But when I got a reply from someone who uses a &lt;a class="reference external" href="https://en.wikipedia.org/wiki/Email_client"&gt;mail user agent&lt;/a&gt;
that displays the &lt;code class="docutils literal"&gt;text/plain&lt;/code&gt; alternative that Gmail automatically
creates the supposedly plain text was this:&lt;/p&gt;
&lt;div class="code"&gt;&lt;pre class="code text"&gt;&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-1" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-1" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-1"&gt;&lt;/a&gt;--000000000000360d1105a9a4da6e
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-2" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-2" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-2"&gt;&lt;/a&gt;Content-Type: text/plain; charset="UTF-8"
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-3" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-3" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-3"&gt;&lt;/a&gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-4" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-4" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-4"&gt;&lt;/a&gt;Here's some ReStructuredText input that has a code block in it:
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-5" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-5" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-5"&gt;&lt;/a&gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-6" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-6" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-6"&gt;&lt;/a&gt; &amp;lt;#cb1-1&amp;gt;Missing Ampersand in Code Block -ms output
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-7" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-7" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-7"&gt;&lt;/a&gt;&amp;lt;#cb1-2&amp;gt;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ &amp;lt;#cb1-3&amp;gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-8" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-8" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-8"&gt;&lt;/a&gt;&amp;lt;#cb1-4&amp;gt;Here's a code block containing ReStructuredText: &amp;lt;#cb1-5&amp;gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-9" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-9" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-9"&gt;&lt;/a&gt;&amp;lt;#cb1-6&amp;gt;.. code:: &amp;lt;#cb1-7&amp;gt; &amp;lt;#cb1-8&amp;gt;   .. container:: for-format ms
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-10" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-10" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-10"&gt;&lt;/a&gt;&amp;lt;#cb1-9&amp;gt; &amp;lt;#cb1-10&amp;gt;      .. figure::
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-11" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-11" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-11"&gt;&lt;/a&gt;davesmapper-2017-04-10-caves-4-numbered.eps &amp;lt;#cb1-11&amp;gt;         :alt:
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-12" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-12" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-12"&gt;&lt;/a&gt;Map of Bandit's Cave &amp;lt;#cb1-12&amp;gt; &amp;lt;#cb1-13&amp;gt;      Map of Bandit's Cave
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-13" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-13" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-13"&gt;&lt;/a&gt;&amp;lt;#cb1-14&amp;gt; &amp;lt;#cb1-15&amp;gt;   .. container:: for-format html latex context
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-14" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-14" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-14"&gt;&lt;/a&gt;epub &amp;lt;#cb1-16&amp;gt; &amp;lt;#cb1-17&amp;gt;      .. figure::
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-15" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-15" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-15"&gt;&lt;/a&gt;davesmapper-2017-04-10-caves-4-numbered.png &amp;lt;#cb1-18&amp;gt;         :alt:
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-16" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-16" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-16"&gt;&lt;/a&gt;Map of Bandit's Cave &amp;lt;#cb1-19&amp;gt; &amp;lt;#cb1-20&amp;gt;         Map of Bandit's Cave
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-17" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-17" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-17"&gt;&lt;/a&gt;&amp;lt;#cb1-21&amp;gt; &amp;lt;#cb1-22&amp;gt;How's that look? &amp;lt;#cb1-23&amp;gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-18" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-18" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-18"&gt;&lt;/a&gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-19" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-19" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-19"&gt;&lt;/a&gt;Here's the -ms output from it:
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-20" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-20" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-20"&gt;&lt;/a&gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-21" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-21" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-21"&gt;&lt;/a&gt;.SH 1
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-22" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-22" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-22"&gt;&lt;/a&gt;Missing Ampersand in Code Block -ms output
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-23" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-23" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-23"&gt;&lt;/a&gt;.pdfhref O 1 "Missing Ampersand in Code Block -ms output"
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-24" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-24" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-24"&gt;&lt;/a&gt;.pdfhref M "missing-ampersand-in-code-block--ms-output"
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-25" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-25" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-25"&gt;&lt;/a&gt;.LP
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-26" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-26" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-26"&gt;&lt;/a&gt;Here\[aq]s a code block containing ReStructuredText:
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-27" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-27" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-27"&gt;&lt;/a&gt;.IP
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-28" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-28" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-28"&gt;&lt;/a&gt;.nf
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-29" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-29" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-29"&gt;&lt;/a&gt;\f[C]
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-30" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-30" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-30"&gt;&lt;/a&gt;.. container:: for-format ms
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-31" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-31" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-31"&gt;&lt;/a&gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-32" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-32" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-32"&gt;&lt;/a&gt;   .. figure:: davesmapper-2017-04-10-caves-4-numbered.eps
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-33" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-33" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-33"&gt;&lt;/a&gt;      :alt: Map of Bandit\[aq]s Cave
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-34" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-34" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-34"&gt;&lt;/a&gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-35" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-35" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-35"&gt;&lt;/a&gt;   Map of Bandit\[aq]s Cave
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-36" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-36" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-36"&gt;&lt;/a&gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-37" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-37" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-37"&gt;&lt;/a&gt;\&amp;amp;.. container:: for-format html latex context epub
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-38" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-38" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-38"&gt;&lt;/a&gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-39" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-39" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-39"&gt;&lt;/a&gt;   .. figure:: davesmapper-2017-04-10-caves-4-numbered.png
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-40" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-40" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-40"&gt;&lt;/a&gt;      :alt: Map of Bandit\[aq]s Cave
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-41" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-41" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-41"&gt;&lt;/a&gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-42" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-42" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-42"&gt;&lt;/a&gt;      Map of Bandit\[aq]s Cave
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-43" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-43" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-43"&gt;&lt;/a&gt;\f[]
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-44" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-44" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-44"&gt;&lt;/a&gt;.fi
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-45" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-45" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-45"&gt;&lt;/a&gt;.LP
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-46" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-46" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-46"&gt;&lt;/a&gt;How\[aq]s that look?
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-47" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-47" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-47"&gt;&lt;/a&gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-48" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-48" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-48"&gt;&lt;/a&gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-49" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-49" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-49"&gt;&lt;/a&gt;See the first line that starts with .. container::? That line should start
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-50" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-50" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-50"&gt;&lt;/a&gt;with \&amp;amp; so it isn't interpreted as an *roff* command. As it is, when you
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-51" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-51" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-51"&gt;&lt;/a&gt;build the PDF output from output that line disappears entirely with no
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-52" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-52" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-52"&gt;&lt;/a&gt;warning to the user. (The default for *roff* processors like *groff* is to
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-53" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-53" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-53"&gt;&lt;/a&gt;ignore unknown commands.)
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-54" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-54" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-54"&gt;&lt;/a&gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-55" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-55" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-55"&gt;&lt;/a&gt;See the second line that starts with .. container::? That line *does* start
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-56" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-56" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-56"&gt;&lt;/a&gt;with \&amp;amp;. It makes it through fine. The other lines whose first
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-57" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-57" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-57"&gt;&lt;/a&gt;non-whitespace character is . make it through fine because to make it a
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-58" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-58" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-58"&gt;&lt;/a&gt;*roff* command the first character on the line has to be a period.
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-59" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-59" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-59"&gt;&lt;/a&gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-60" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-60" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-60"&gt;&lt;/a&gt;--
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-61" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-61" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-61"&gt;&lt;/a&gt;T. Kurt Bond, tkurtbond@gmail.com
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-62" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-62" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-62"&gt;&lt;/a&gt;
&lt;a id="rest_code_18b4b6112f5a40599a041d2103b2fbd5-63" name="rest_code_18b4b6112f5a40599a041d2103b2fbd5-63" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#rest_code_18b4b6112f5a40599a041d2103b2fbd5-63"&gt;&lt;/a&gt;--000000000000360d1105a9a4da6e
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;See the weird psuedo-HTML tags like &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;&amp;lt;#cb1-3&amp;gt;&lt;/span&gt;&lt;/code&gt; in the “plain” text
that seems to have resulted from &lt;code class="docutils literal"&gt;&amp;lt;span &lt;span class="pre"&gt;id="cb1-3"&amp;gt;&amp;lt;a&lt;/span&gt;
&lt;span class="pre"&gt;href="#cb1-3"&amp;gt;&amp;lt;/a&amp;gt;…&amp;lt;/span&amp;gt;&lt;/span&gt;&lt;/code&gt;?  The person who replied to my message
used the &lt;code class="docutils literal"&gt;text/plain&lt;/code&gt;, and that included all those weird
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;&amp;lt;#cbX-Y&amp;gt;&lt;/span&gt;&lt;/code&gt; tags in the plain text reply, which, although they didn't
remark on the oddity, is how I came to know about the problem.&lt;/p&gt;
&lt;p&gt;So, one thing to notice is that it was the first code block that was
messed up, and not the second.  It turns out that I specified a
(correct) language for syntax highlighting in the first code block,
&lt;code class="docutils literal"&gt;restructuredtext&lt;/code&gt;, and supplied an incorrect language for syntax
highlighting in the second block, &lt;code class="docutils literal"&gt;nroff&lt;/code&gt; &lt;a class="footnote-reference brackets" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#pygments-groff" id="footnote-reference-3" role="doc-noteref"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;3&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/a&gt;, which
should have been simply &lt;code class="docutils literal"&gt;roff&lt;/code&gt;.  And it turns out that if I don't
specify a language for the highlighting I don't get the &lt;code class="docutils literal"&gt;&amp;lt;span
&lt;span class="pre"&gt;id="cb1-3"&amp;gt;&amp;lt;a&lt;/span&gt; &lt;span class="pre"&gt;href="#cb1-3"&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/span&amp;gt;&lt;/span&gt;&lt;/code&gt; type output, just a plain
&amp;lt;code&amp;gt; block in a plain &amp;lt;pre&amp;gt; block.&lt;/p&gt;
&lt;p&gt;Weird.&lt;/p&gt;
&lt;p&gt;(I suppose I could have made this entry shorter and easier to
understand by writing new shorter examples directly using
&lt;code class="docutils literal"&gt;.. code::&lt;/code&gt; directly, but I'm writing about an e-mail that I
actually sent, not a hypothetical e-mail.)&lt;/p&gt;
&lt;aside class="footnote-list brackets"&gt;
&lt;aside class="footnote brackets" id="plain-code-directive" role="doc-footnote"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#footnote-reference-1"&gt;1&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;I've checked and this weirdness happens with plain &lt;code class="docutils literal"&gt;.. code::&lt;/code&gt;
directives as well.&lt;/p&gt;
&lt;/aside&gt;
&lt;aside class="footnote brackets" id="toolong" role="doc-footnote"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#footnote-reference-2"&gt;2&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;I'm not quoting the whole file because the CSS portion of the
HTML makes it much too long to quote here.&lt;/p&gt;
&lt;/aside&gt;
&lt;aside class="footnote brackets" id="pygments-groff" role="doc-footnote"&gt;
&lt;span class="label"&gt;&lt;span class="fn-bracket"&gt;[&lt;/span&gt;&lt;a role="doc-backlink" href="https://tkurtbond.github.io/posts/2020/07/05/line-number-anchors-in-pandocs-html-output-for-codeblocks-with-highlighting-mess-up-gmail-textplain-multipart-alternative/#footnote-reference-3"&gt;3&lt;/a&gt;&lt;span class="fn-bracket"&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;p&gt;Annoyingly, &lt;a class="reference external" href="https://pygments.org/languages/"&gt;pygments&lt;/a&gt;, which I'm using to write this post for my
blog, calls that &lt;code class="docutils literal"&gt;groff&lt;/code&gt; instead of &lt;code class="docutils literal"&gt;roff&lt;/code&gt;, so if I want to turn
this into a e-mail via the route described here, I'll have to
change the source file for this.&lt;/p&gt;
&lt;/aside&gt;
&lt;/aside&gt;</summary>
    <category term="gmail" label="gmail"/>
    <category term="html" label="html"/>
    <category term="pandoc" label="pandoc"/>
    <category term="rst" label="rst"/>
  </entry>
  <entry>
    <title>multipart/alternative</title>
    <id>https://tkurtbond.github.io/posts/2009/04/24/multipartalternative/</id>
    <updated>2009-04-24T02:52:46-05:00</updated>
    <published>2009-04-24T02:52:46-05:00</published>
    <author>
      <name>T. Kurt Bond</name>
    </author>
    <link rel="alternate" type="text/html" href="https://tkurtbond.github.io/posts/2009/04/24/multipartalternative/"/>
    <summary type="html">&lt;p&gt;Oddly enough, both &lt;span class="program"&gt;gmail&lt;/span&gt; and &lt;span class="program"&gt;Lotus Notes&lt;/span&gt; prefer
the &lt;em&gt;last&lt;/em&gt; displayable alternative in a multipart/alternative section.
In other words, I sent a multipart/alternative e-mail with once with
html, text and pdf alternatives, and once with the same parts, but in
the order text, html, and pdf.  The first time &lt;span class="program"&gt;Lotus Notes&lt;/span&gt;
and program:&lt;cite&gt;gmail&lt;/cite&gt; displayed the text alternative, and the second
time they displayed the HTML alternative.  &lt;span class="program"&gt;Wanderlust&lt;/span&gt;
always displayed the HTML alternative.&lt;/p&gt;</summary>
    <category term="e-mail" label="e-mail"/>
    <category term="gmail" label="gmail"/>
    <category term="lotus-notes" label="lotus notes"/>
    <category term="wanderlust" label="wanderlust"/>
  </entry>
</feed>
